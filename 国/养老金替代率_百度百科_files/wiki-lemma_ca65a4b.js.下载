;/*!wiki-lemma:widget/tools/bkshare/share.js*/
define("wiki-lemma:widget/tools/bkshare/share",function(){window._bd_share_main?window._bd_share_is_recently_loaded=!0:(window._bd_share_is_recently_loaded=!1,window._bd_share_main={version:"2.0",jscfg:{domain:{staticUrl:"https://gss0.baidu.com/9rA4cT8aBw9FktbgoI7O1ygwehsv/"}}}),!window._bd_share_is_recently_loaded&&(window._bd_share_main.F=window._bd_share_main.F||function(e,t){function n(e,t){if(e instanceof Array){for(var n=0,s=e.length;s>n;n++)if(t.call(e[n],e[n],n)===!1)return}else for(var n in e)if(e.hasOwnProperty(n)&&t.call(e[n],e[n],n)===!1)return}function s(e,t){if(this.svnMod="",this.name=null,this.path=e,this.fn=null,this.exports={},this._loaded=!1,this._requiredStack=[],this._readyStack=[],s.cache[this.path]=this,t&&"."!==t.charAt(0)){var n=t.split(":");n.length>1?(this.svnMod=n[0],this.name=n[1]):this.name=t}this.svnMod||(this.svnMod=this.path.split("/js/")[0].substr(1)),this.type="js",this.getKey=function(){return this.svnMod+":"+this.name},this._info={}}function i(e,t){var n="css"==t,s=document.createElement(n?"link":"script");return s}function a(t,n,s){function a(){a.isCalled||(a.isCalled=!0,clearTimeout(d),s&&s())}var c=i(t,n);"SCRIPT"===c.nodeName?r(c,a):o(c,a);var d=setTimeout(function(){throw new Error("load "+n+" timeout : "+t)},e._loadScriptTimeout||1e4),h=document.getElementsByTagName("head")[0];"css"==n?(c.rel="stylesheet",c.href=t,h.appendChild(c)):(c.type="text/javascript",c.src=t,h.insertBefore(c,h.firstChild))}function r(e,t){e.onload=e.onerror=e.onreadystatechange=function(){if(/loaded|complete|undefined/.test(e.readyState)){if(e.onload=e.onerror=e.onreadystatechange=null,e.parentNode){e.parentNode.removeChild(e);try{if(e.clearAttributes)e.clearAttributes();else for(var n in e)delete e[n]}catch(s){}}e=void 0,t&&t()}}}function o(e,t){e.attachEvent?e.attachEvent("onload",t):setTimeout(function(){c(e,t)},0)}function c(e,t){if(!t||!t.isCalled){var n,s=navigator.userAgent,i=~s.indexOf("AppleWebKit"),a=~s.indexOf("Opera");if(i||a)e.sheet&&(n=!0);else if(e.sheet)try{e.sheet.cssRules&&(n=!0)}catch(r){("SecurityError"===r.name||"NS_ERROR_DOM_SECURITY_ERR"===r.name)&&(n=!0)}setTimeout(function(){n?t&&t():c(e,t)},1)}}var d="api";e.each=n,s.currentPath="",s.loadedPaths={},s.loadingPaths={},s.cache={},s.paths={},s.handlers=[],s.moduleFileMap={},s.requiredPaths={},s.lazyLoadPaths={},s.services={},s.isPathsLoaded=function(e){var t=!0;return n(e,function(e){return e in s.loadedPaths?void 0:t=!1}),t},s.require=function(e,t){e.search(":")<0&&(t||(t=d,s.currentPath&&(t=s.currentPath.split("/js/")[0].substr(1))),e=t+":"+e);var n=s.get(e,s.currentPath);if("css"!=n.type){if(n){if(!n._inited){n._inited=!0;var i,a=n.svnMod;(i=n.fn.call(null,function(e){return s.require(e,a)},n.exports,new _(n.name,a)))&&(n.exports=i)}return n.exports}throw new Error('Module "'+e+'" not found!')}},s.baseUrl=t?"/"==t[t.length-1]?t:t+"/":"/",s.getBasePath=function(e){var t,n;return-1!==(n=e.indexOf("/"))&&(t=e.slice(0,n)),t&&t in s.paths?s.paths[t]:s.baseUrl},s.getJsPath=function(t,n){if("."===t.charAt(0)){n=n.replace(/\/[^\/]+\/[^\/]+$/,""),0===t.search("./")&&(t=t.substr(2));var i=0;for(t=t.replace(/^(\.\.\/)+/g,function(e){return i=e.length/3,""});i>0;)n=n.substr(0,n.lastIndexOf("/")),i--;return n+"/"+t+"/"+t.substr(t.lastIndexOf("/")+1)+".js"}var a,r,o,c,h,l;if(t.search(":")>=0){var _=t.split(":");a=_[0],t=_[1]}else n&&(a=n.split("/")[1]);a=a||d;var u=/\.css(?:\?|$)/i.test(t);u&&e._useConfig&&s.moduleFileMap[a][t]&&(t=s.moduleFileMap[a][t]);var t=h=t,f=s.getBasePath(t);return-1!==(o=t.indexOf("/"))&&(r=t.slice(0,o),c=t.lastIndexOf("/"),h=t.slice(c+1)),r&&r in s.paths&&(t=t.slice(o+1)),l=f+a+"/js/"+t+".js"},s.get=function(e,t){var n=s.getJsPath(e,t);return s.cache[n]?s.cache[n]:new s(n,e)},s.prototype={load:function(){s.loadingPaths[this.path]=!0;var t=this.svnMod||d,n=window._bd_share_main.jscfg.domain.staticUrl+"static/"+t+"/",i=this,a=/\.css(?:\?|$)/i.test(this.name);this.type=a?"css":"js";var r="/"+this.type+"/"+s.moduleFileMap[t][this.name];if(n+=e._useConfig&&s.moduleFileMap[t][this.name]?this.type+"/"+s.moduleFileMap[t][this.name]:this.type+"/"+this.name+(a?"":".js"),e._firstScreenCSS.indexOf(this.name)>0||e._useConfig&&r==e._firstScreenJS)i._loaded=!0,i.ready();else{var o=(new Date).getTime();h.create({src:n,type:this.type,loaded:function(){i._info.loadedTime=(new Date).getTime()-o,"css"==i.type&&(i._loaded=!0,i.ready())}})}},lazyLoad:function(){this.name;if(s.lazyLoadPaths[this.getKey()])this.define(),delete s.lazyLoadPaths[this.getKey()];else{if(this.exist())return;s.requiredPaths[this.getKey()]=!0,this.load()}},ready:function(e,t){var i=t?this._requiredStack:this._readyStack;if(e)this._loaded?e():i.push(e);else{if(s.loadedPaths[this.path]=!0,delete s.loadingPaths[this.path],this._loaded=!0,s.currentPath=this.path,this._readyStack&&this._readyStack.length>0){this._inited=!0;var a,r=this.svnMod;this.fn&&(a=this.fn.call(null,function(e){return s.require(e,r)},this.exports,new _(this.name,r)))&&(this.exports=a),n(this._readyStack,function(e){e()}),delete this._readyStack}this._requiredStack&&this._requiredStack.length>0&&(n(this._requiredStack,function(e){e()}),delete this._requiredStack)}},define:function(){var e=this,t=this.deps,i=(this.path,[]);t||(t=this.getDependents()),t.length?(n(t,function(t){i.push(s.getJsPath(t,e.path))}),n(t,function(t){var n=s.get(t,e.path);n.ready(function(){s.isPathsLoaded(i)&&e.ready()},!0),n.lazyLoad()})):this.ready()},exist:function(){var e=this.path;return e in s.loadedPaths||e in s.loadingPaths},getDependents:function(){var e=this.fn.toString(),t=e.match(/function\s*\(([^,]*),/i),s=new RegExp("[^.]\\b"+t[1]+"\\(\\s*('|\")([^()\"']*)('|\")\\s*\\)","g"),i=e.match(s),a=[];return i&&n(i,function(e,n){a[n]=e.substr(t[1].length+3).slice(0,-2)}),a}};var h={create:function(e){var t=e.src;t in this._paths||(this._paths[t]=!0,n(this._rules,function(e){t=e.call(null,t)}),a(t,e.type,e.loaded))},_paths:{},_rules:[],addPathRule:function(e){this._rules.push(e)}};e.version="1.0",e.use=function(e,t){"string"==typeof e&&(e=[e]);var i=[],a=[];n(e,function(e,t){a[t]=!1}),n(e,function(e,r){var o=s.get(e),c=o._loaded;o.ready(function(){var e=o.exports||{};e._INFO=o._info,e._INFO&&(e._INFO.isNew=!c),i[r]=e,a[r]=!0;var s=!0;n(a,function(e){return e===!1?s=!1:void 0}),t&&s&&t.apply(null,i)}),o.lazyLoad()})},e.module=function(e,t,n){var i=s.get(e);i.fn=t,i.deps=n,s.requiredPaths[i.getKey()]?i.define():s.lazyLoadPaths[i.getKey()]=!0},e.pathRule=function(e){h.addPathRule(e)},e._addPath=function(e,t){if("/"!==t.slice(-1)&&(t+="/"),e in s.paths)throw new Error(e+" has already in Module.paths");s.paths[e]=t};var l=d;e._setMod=function(e){l=e||d},e._fileMap=function(t,i){if("object"==typeof t)n(t,function(t,n){e._fileMap(n,t)});else{var a=l;"string"==typeof i&&(i=[i]),t=1==t.indexOf("js/")?t.substr(4):t,t=1==t.indexOf("css/")?t.substr(5):t;var r=s.moduleFileMap[a];r||(r={}),n(i,function(e){r[e]||(r[e]=t)}),s.moduleFileMap[a]=r}},e._eventMap={},e.call=function(t,n){for(var s=[],i=2,a=arguments.length;a>i;i++)s.push(arguments[i]);e.use(t,function(e){for(var t=n.split("."),i=0,a=t.length;a>i;i++)e=e[t[i]];e&&e.apply(this,s)})},e._setContext=function(e){"object"==typeof e&&n(e,function(e,t){_.prototype[t]=s.require(e)})},e._setContextMethod=function(e,t){_.prototype[e]=t};var _=function(e,t){this.modName=e,this.svnMod=t};return _.prototype={domain:window._bd_share_main.jscfg.domain,use:function(t,n){"string"==typeof t&&(t=[t]);for(var s=t.length-1;s>=0;s--)t[s]=this.svnMod+":"+t[s];e.use(t,n)}},e._Context=_,e.addLog=function(t,n){e.use("lib/log",function(e){e.defaultLog(t,n)})},e.fire=function(t,n,s){e.use("lib/mod_evt",function(e){e.fire(t,n,s)})},e._defService=function(e,t){if(e){var i=s.services[e];i=i||{},n(t,function(e,t){i[t]=e}),s.services[e]=i}},e.getService=function(t,n,i){var a=s.services[t];if(!a)throw new Error(t+" mod didn't define any services");var r=a[n];if(!r)throw new Error(t+" mod didn't provide service "+n);e.use(t+":"+r,i)},e}({})),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.module("base/min_tangram",function(e,t){var n={};n.each=function(e,t,n){var s,i,a,r=e.length;if("function"==typeof t)for(a=0;r>a&&(i=e[a],s=t.call(n||e,a,i),s!==!1);a++);return e};var s=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};n.extend=function(){for(var e=arguments[0],t=1,n=arguments.length;n>t;t++)s(e,arguments[t]);return e},n.domready=function(e,t){if(t=t||document,/complete/.test(t.readyState))e();else if(t.addEventListener)"interactive"==t.readyState?e():t.addEventListener("DOMContentLoaded",e,!1);else{var n=function(){n=new Function,e()};void function(){try{t.body.doScroll("left")}catch(e){return setTimeout(arguments.callee,10)}n()}(),t.attachEvent("onreadystatechange",function(){"complete"==t.readyState&&n()})}},n.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.T=n}),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.module("base/class",function(e,t){var n=e("base/min_tangram").T;t.BaseClass=function(){var e=this,t={};e.on=function(e,n){var s=t[e];s||(s=t[e]=[]),s.push(n)},e.un=function(e,s){if(!e)return void(t={});var i=t[e];i&&(s?n.each(i,function(e,t){return t==s?(i.splice(e,1),!1):void 0}):t[e]=[])},e.fire=function(s,i){var a=t[s];a&&(i=i||{},n.each(a,function(t,s){i._result=s.call(e,n.extend({_ctx:{src:e}},i))}))}};var s={};s.create=function(e,s){return s=s||t.BaseClass,function(){s.apply(this,arguments);var t=n.extend({},this);e.apply(this,arguments),this._super=t}},t.Class=s}),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.module("conf/const",function(e,t){t.CMD_ATTR="data-cmd",t.CONFIG_TAG_ATTR="data-tag",t.URLS={likeSetUrl:"http://like.baidu.com/set",commitUrl:"http://s.share.baidu.com/commit",jumpUrl:"http://s.share.baidu.com",mshareUrl:"http://s.share.baidu.com/mshare",emailUrl:"http://s.share.baidu.com/sendmail",nsClick:"http://nsclick.baidu.com/v.gif",backUrl:"http://s.share.baidu.com/back",shortUrl:"http://dwz.cn/v2cut.php"}}),!window._bd_share_is_recently_loaded&&function(){window._bd_share_main.F._setMod("api"),window._bd_share_main.F._fileMap({"/js/share.js?v=da893e3e.js":["conf/define","base/fis","base/tangrammin","base/class.js","conf/define.js","conf/const.js","config","share/api_base.js","view/view_base.js","start/router.js","component/comm_tools.js","trans/trans.js"],"/js/base/tangram.js?v=37768233.js":["base/tangram"],"/js/view/share_view.js?v=3ae6026d.js":["view/share_view"],"/js/view/slide_view.js?v=08373964.js":["view/slide_view"],"/js/view/like_view.js?v=df3e0eca.js":["view/like_view"],"/js/view/select_view.js?v=85fc7cec.js":["view/select_view"],"/js/trans/data.js?v=17af2bd2.js":["trans/data"],"/js/trans/logger.js?v=d16ec0e3.js":["trans/logger"],"/js/trans/trans_bdxc.js?v=7ac21555.js":["trans/trans_bdxc"],"/js/trans/trans_bdysc.js?v=fc21acaa.js":["trans/trans_bdysc"],"/js/trans/trans_weixin.js?v=080be124.js":["trans/trans_weixin"],"/js/share/combine_api.js?v=8d37a7b3.js":["share/combine_api"],"/js/share/like_api.js?v=d3693f0a.js":["share/like_api"],"/js/share/likeshare.js?v=e1f4fbf1.js":["share/likeshare"],"/js/share/share_api.js?v=226108fe.js":["share/share_api"],"/js/share/slide_api.js?v=ec14f516.js":["share/slide_api"],"/js/component/animate.js?v=5b737477.js":["component/animate"],"/js/component/anticheat.js?v=44b9b245.js":["component/anticheat"],"/js/component/partners.js?v=911c4302.js":["component/partners"],"/js/component/pop_base.js?v=36f92e70.js":["component/pop_base"],"/js/component/pop_dialog.js?v=d479767d.js":["component/pop_dialog"],"/js/component/pop_popup.js?v=4387b4e1.js":["component/pop_popup"],"/js/component/pop_popup_slide.js?v=b16a1f10.js":["component/pop_popup_slide"],"/js/component/qrcode.js?v=d69754a9.js":["component/qrcode"],"/css/share_style0_16.css?v=6aba13f0.css":["share_style0_16.css"],"/css/share_style0_32.css?v=4413acf0.css":["share_style0_32.css"],"/css/share_style2.css?v=611d4f74.css":["share_style2.css"],"/css/share_style4.css?v=cef2b8f3.css":["share_style4.css"],"/css/slide_share.css?v=9c50d088.css":["slide_share.css"],"/css/share_popup.css?v=240f357d.css":["share_popup.css"],"/css/like.css?v=d52a0ea5.css":["like.css"],"/css/imgshare.css?v=a7830602.css":["imgshare.css"],"/css/select_share.css?v=15f56735.css":["select_share.css"],"/css/weixin_popup.css?v=1a56666e.css":["weixin_popup.css"]}),window._bd_share_main.F._loadScriptTimeout=15e3,window._bd_share_main.F._useConfig=!0,window._bd_share_main.F._firstScreenCSS="",window._bd_share_main.F._firstScreenJS=""}(),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.use("base/min_tangram",function(e){function t(e,t,n){var s=new e(n);s.setView(new t(n)),s.init(),n&&n._handleId&&(_bd_share_main.api=_bd_share_main.api||{},_bd_share_main.api[n._handleId]=s)}function n(e,n){window._bd_share_main.F.use(e,function(e,s){i.isArray(n)?i.each(n,function(n,i){t(e.Api,s.View,i)}):t(e.Api,s.View,n)})}function s(e){var t=e.common||window._bd_share_config&&_bd_share_config.common||{},n={like:{type:"like"},share:{type:"share",bdStyle:0,bdMini:2,bdSign:"on"},slide:{type:"slide",bdStyle:"1",bdMini:2,bdImg:0,bdPos:"right",bdTop:100,bdSign:"on"},image:{viewType:"list",viewStyle:"0",viewPos:"top",viewColor:"black",viewSize:"16",viewList:["qzone","tsina","huaban","tqq","renren"]},selectShare:{type:"select",bdStyle:0,bdMini:2,bdSign:"on"}},s={share:{__cmd:"",__buttonType:"",__type:"",__element:null},slide:{__cmd:"",__buttonType:"",__type:"",__element:null},image:{__cmd:"",__buttonType:"",__type:"",__element:null}};return i.each(["like","share","slide","image","selectShare"],function(a,r){e[r]&&(i.isArray(e[r])&&e[r].length>0?i.each(e[r],function(a,o){e[r][a]=i.extend({},n[r],t,o,s[r])}):e[r]=i.extend({},n[r],t,e[r],s[r]))}),e}var i=e.T;_bd_share_main.init=function(e){if(e=e||window._bd_share_config||{share:{}}){var t=s(e);t.like&&n(["share/like_api","view/like_view"],t.like),t.share&&n(["share/share_api","view/share_view"],t.share),t.slide&&n(["share/slide_api","view/slide_view"],t.slide),t.selectShare&&n(["share/select_api","view/select_view"],t.selectShare),t.image&&n(["share/image_api","view/image_view"],t.image)}},window._bd_share_main._LogPoolV2=[],window._bd_share_main.n1=(new Date).getTime(),i.domready(function(){window._bd_share_main.n2=(new Date).getTime()+1e3,_bd_share_main.init(),setTimeout(function(){window._bd_share_main.F.use("trans/logger",function(e){e.nsClick(),e.back(),e.duration()})},3e3)})}),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.module("component/comm_tools",function(e,t){var n=function(){var e=window.location||document.location||{};return e.href||""},s=function(e,t){for(var n=e.length,s="",i=1;t>=i;i++){var a=Math.floor(n*Math.random());s+=e.charAt(a)}return s},i=function(){var e=(+new Date).toString(36),t=s("0123456789abcdefghijklmnopqrstuvwxyz",3);return e+t};t.getLinkId=i,t.getPageUrl=n}),!window._bd_share_is_recently_loaded&&window._bd_share_main.F.module("trans/trans",function(e,t){var n=e("component/comm_tools"),s=e("conf/const").URLS,i=function(){window._bd_share_main.F.use("base/tangram",function(e){var t=e.T;null==t.cookie.get("bdshare_firstime")&&t.cookie.set("bdshare_firstime",1*new Date,{path:"/",expires:(new Date).setFullYear(2022)-new Date})})},a=function(e){var t=e.bdUrl||n.getPageUrl();return t=t.replace(/\'/g,"%27").replace(/\"/g,"%22")},r=function(e){var t=(new Date).getTime()+3e3,s={click:1,url:a(e),uid:e.bdUid||"0",to:e.__cmd,type:"text",pic:e.bdPic||"",title:(e.bdText||document.title).substr(0,300),key:(e.bdSnsKey||{})[e.__cmd]||"",desc:e.bdDesc||"",comment:e.bdComment||"",relateUid:e.bdWbuid||"",searchPic:e.bdSearchPic||0,sign:e.bdSign||"on",l:window._bd_share_main.n1.toString(32)+window._bd_share_main.n2.toString(32)+t.toString(32),linkid:n.getLinkId(),firstime:c("bdshare_firstime")||""};switch(e.__cmd){case"copy":h(s);break;case"print":l();break;case"bdxc":_();break;case"bdysc":u(s);break;case"weixin":f(s);break;default:o(e,s)}window._bd_share_main.F.use("trans/logger",function(t){t.commit(e,s)})},o=function(e,t){var n=s.jumpUrl;"mshare"==e.__cmd?n=s.mshareUrl:"mail"==e.__cmd&&(n=s.emailUrl);var i=n+"?"+d(t);window.open(i)},c=function(e){if(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n)return decodeURIComponent(n[2]||null)}},d=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&").replace(/%20/g,"+")},h=function(e){window._bd_share_main.F.use("base/tangram",function(t){var s=t.T;s.browser.ie?(window.clipboardData.setData("text",document.title+" "+(e.bdUrl||n.getPageUrl())),alert("标题和链接复制成功，您可以推荐给QQ/MSN上的好友了！")):window.prompt("您使用的是非IE核心浏览器，请按下 Ctrl+C 复制代码到剪贴板",document.title+" "+(e.bdUrl||n.getPageUrl()))})},l=function(){window.print()},_=function(){window._bd_share_main.F.use("trans/trans_bdxc",function(e){e&&e.run()})},u=function(e){window._bd_share_main.F.use("trans/trans_bdysc",function(t){t&&t.run(e)})},f=function(e){window._bd_share_main.F.use("trans/trans_weixin",function(t){t&&t.run(e)})},p=function(e){r(e)};t.run=p,i()})});
;/*!wiki-lemma:static/tools/bkshare.js*/
var $=require("wiki-common:widget/lib/jquery/jquery"),BaikeShare=function(){var i={common:{bdText:"自定义分享内容",bdDesc:"自定义分享摘要",bdUrl:"自定义分享url地址",bdPic:"自定义分享图片"},share:[{bdSize:16}]};window._bd_share_config=i,this.setCommon=function(e){window._bd_share_config.common=e?e:i.common},this.regist=function(i){window._bd_share_config.share.push(i)},this.load=function(){require("wiki-lemma:widget/tools/bkshare/share")}};window.BKShare||(window.BKShare=new BaikeShare,$(document).bind("ready",function(){window.BKShare.load()}));
;/*!wiki-lemma:static/tools/durationLog.js*/
var $=require("wiki-common:widget/lib/jquery/jquery"),nslog=require("wiki-common:widget/component/nslog/nslog"),durationLog=function(){var o=Date.now();$(window).on("beforeunload",function(){nslog(10010009,window.location.url,{index:o,_dTm:Date.now()-o,_did:Date.now()})})};window.DurationLog||(window.DurationLog=new durationLog);
;/*!wiki-lemma:static/tools/scriptLazyLoad.js*/
var $=require("wiki-common:widget/lib/jquery/jquery"),Linker=function(){var e={isHeader:!0},n={isTailer:!0};this.appendNode=function(t){e.next||(e.next=t,t.prev=e),n.prev?(n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n):(n.prev=t,t.next=n)},this.deleteNode=function(e){e.prev.next=e.next,e.next.prev=e.prev},this.hasNode=function(){return!!e.next&&!e.next.isTailer},this.iterator=function(){var n=e;return{next:function(){return ret=n.next,ret&&!ret.isTailer&&ret.next?(n=n.next,ret):null}}}},JavaScriptLazyLoad=function(){var e=new Linker,n=null,t=function(){for(var n=e.iterator(),t=n.next();t;)i(t),t=n.next()},i=function(e){if(e.dom&&e.loadFunc){var n=e.dom.offset().top,t=$(window).scrollTop()+$(window).height(),i="undefined"!=typeof e.distance?e.distance:200;!e.dom.is(":hidden")&&i>=n-t&&(r(e),e.loadFunc())}},r=function(n){e.deleteNode(n),e.hasNode()||$(window).unbind("scroll",d)};this.regist=function(n){return e.appendNode(n),n},this.unregist=function(){};var o=function(){$(window).bind("scroll click",d),$(document).ready(function(){d()})},d=function(){n&&clearTimeout(n),n=setTimeout(t,200)};o()};window.ScriptLazyLoad||(window.ScriptLazyLoad=new JavaScriptLazyLoad);
;/*!wiki-lemma:widget/tools/announcement/announcement.js*/
define("wiki-lemma:widget/tools/announcement/announcement",function(n,e,o){var t=n("wiki-common:widget/lib/jquery/jquery"),i=n("wiki-common:widget/lib/jsmart/jsmart"),a=n("wiki-common:widget/util/cookie");o.exports=function(n){"1"!=a.get("home_announcement_hidden")&&n.show&&(t(".header-wrapper .header").append(t(".header .layout").append(new i('<div id="announcement">\n<div class="announcement_content">{%$data.content|f_escape_xml%}</div>\n<div class="announcement_close">X</div>\n</div>').fetch(n))),t("#announcement .announcement_close").click(function(){a.set("home_announcement_hidden","1",{expires:2592e5,path:"/"}),t("#announcement").remove()}))}});
;/*!wiki-lemma:widget/tools/bkclick/bkclick.js*/
define("wiki-lemma:widget/tools/bkclick/bkclick",function(e,i){var s=e("wiki-common:widget/lib/jquery/jquery"),u={guesslikeRequest:"guesslike_request",guesslikeSuccess:"guesslike_success",guesslikeFail:"guesslike_fail",guesslikeView:"guesslike_view",guesslikeExposed:"guesslike_exposed",guesslikeClick:"guesslike_click",netunionRequest:"netunion_request",netunionView:"netunion_view",netunionExposed:"netunion_exposed"};i.bklog=function(e){u[e]||console.log("error:请输入logKey");var i="/api/common/bkclick";s.ajax({type:"GET",url:i,cache:!1,data:{type:"pc_"+u[e]}})}});
;/*!wiki-lemma:widget/tools/clickstream/clickstream.js*/
define("wiki-lemma:widget/tools/clickstream/clickstream",function(e,i,a){var t=e("wiki-common:widget/util/clickstreamSdk"),m=new t.default({appname:"baike",platform:"web",device:"pc",auto:!0,page:"lemma"});a.exports=m});
;/*!wiki-lemma:widget/tools/eid/eid.es.js*/
define("wiki-lemma:widget/tools/eid/eid.es",function(e,i){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function t(e){var i=s["default"].get("BAIDUID");if(i){var d=i.substr(i.length-9,4),t=parseInt("0x"+d,16);return t.length<e?t=new Array(e-t.length).join("0")+t:t+="",t.substr(t.length-e,e)}}function n(e){var i=null;return i=50>l?f[3]:g,i[e]&&i[e].eid||0}Object.defineProperty(i,"__esModule",{value:!0}),i.getEid=n;var u=e("wiki-common:widget/util/cookie"),s=d(u),o=e("wiki-common:widget/util/url"),r=d(o),a=r["default"].getQuery("baiduUserId"),l=parseInt(a||t(2),10),g={yitiao:{eid:85306},guessLike:{eid:202},endAd:{eid:0}},f={0:{yitiao:{eid:85306},guessLike:{eid:85312},endAd:{eid:85311}},1:{yitiao:{eid:85306},guessLike:{eid:85312},endAd:{eid:85324}},2:{yitiao:{eid:85306},guessLike:{eid:85312},endAd:{eid:85325}},3:{yitiao:{eid:85306},guessLike:{eid:85312},endAd:{eid:85326}},4:{yitiao:{eid:85306},guessLike:{eid:85313},endAd:{eid:0}}}});
;/*!wiki-lemma:widget/tools/inSightDetector/inSightDetector.es.js*/
define("wiki-lemma:widget/tools/inSightDetector/inSightDetector.es",function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return!!t&&"object"==typeof t&&1===t.nodeType}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.config=this._normalize(e),this._store=[],this._ticking=!1,this._lastTimestamp=Date.now(),this._viewportHeight=window.innerHeight,this._throttledDetect=this._throttledDetect.bind(this)}return r(t,[{key:"_normalize",value:function(t){return"object"!=typeof t&&(t={}),{interval:t.interval||0,offset:t.offset||0}}},{key:"_throttledDetect",value:function(t){var e=this,i=Date.now(),n=i-this._lastTimestamp;!this._ticking&&this._store.length&&n>=this.config.interval&&(setTimeout(function(){e._detect(t),e._ticking=!1,e._lastTimestamp=Date.now()},16),this._ticking=!0)}},{key:"_detect",value:function(t){var e=this,i=this._store;o(t)&&(i=this._store.filter(function(e){return e.el.isSameNode(t)})),i.forEach(function(t){e._isInSight(t.el)&&t.callback()})}},{key:"_isInSight",value:function(t){var e=t.getBoundingClientRect(),i=e.top,n=e.bottom,o=e.height,r=this._translateOffset(this.config.offset,o),s=i>0&&i+r<this._viewportHeight,a=n-r>0&&n<this._viewportHeight,l=s||a;return l}},{key:"_translateOffset",value:function(t,e){var i=/^\d+%$/;if(i.test(t)){var n=parseInt(t,10)/100;t=Math.round(e*n)}else t=parseInt(t,10);return t}},{key:"addListener",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];o(t)&&(this._store.length||window.addEventListener("scroll",this._throttledDetect),this._store.push({el:t,callback:i}),setTimeout(function(){e._detect(t),e._ticking=!1,e._lastTimestamp=Date.now()},16))}},{key:"removeListener",value:function(t){o(t)&&(this._store=this._store.filter(function(e){return!e.el.isSameNode(t)}),this._store.length||window.removeEventListener("scroll",this._throttledDetect))}},{key:"removeAllListeners",value:function(){this._store=[],window.removeEventListener("scroll",this._throttledDetect)}}]),t}();i.exports=s});
;/*!wiki-lemma:widget/tools/rangeExt/rangeExt.js*/
define("wiki-lemma:widget/tools/rangeExt/rangeExt",function(e,n,t){function o(){}function r(e,n){e=e.duplicate(),e.collapse(n);for(var t,o=e.parentElement(),r=o.childNodes,a=-1,i=0;i<r.length;i++){var c=r[i];if(1==c.nodeType){var l=e.duplicate();l.moveToElementText(c);var f=l.compareEndPoints("StartToStart",e),s=l.compareEndPoints("EndToStart",e);if(f>0)break;if(0===f||1===s&&-1===f)return{container:r[i-1],offset:r[i-1].nodeValue.length};if(0===s)return{container:o,offset:i+1};t=l,a=i}}t?t.collapse(!1):(t=e.duplicate(),t.moveToElementText(o),t.collapse(!0)),t.setEndPoint("EndToEnd",e);for(var d=t.text.replace(/(\r\n|\r)/g,"\n").length,g=0,u=a+1;u<r.length&&(g=d,d-=r[u].length,!(0>=d));u++);return 0==d?{container:r[0],offset:r[0].length}:{container:r[u],offset:g}}{var a=e("wiki-common:widget/lib/jquery/jquery");e("wiki-lemma:widget/tools/rangeExt/rangeExt")}o.prototype={constructor:o};var i=null,c=[];a("body").on("mouseup",function(e){if(window.getSelection){var n=window.getSelection().toString();if(n!==i){i=n;for(var t in c)c[t](e)}}else if(document.selection){var n=document.selection.createRange().text;if(n!==i){i=n;for(var t in c)c[t](e)}}}),t.exports={Rangy:o,onSelectionChange:function(e){c.push(e)},clearSelection:function(){if(window.getSelection&&window.getSelection().removeAllRanges(),document.selection){var e=document.selection.createRange();e.collapse(!0),e.select()}},getSelectionRangy:function(){if(window.getSelection){var e=window.getSelection();if(e.isCollapsed||1!==e.rangeCount)return;if(e.getRangeAt)var n=e.getRangeAt(0);else{var n=document.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset)}var t=new o;return t.startContainer=n.startContainer,t.startOffset=n.startOffset,t.endContainer=n.endContainer,t.endOffset=n.endOffset,t.collapsed=n.collapsed,t.commonAncestorContainer=n.commonAncestorContainer,t}if(document.selection){var e=document.selection.createRange();if(!e||!e.boundingWidth)return;var a=r(e,!0),i=r(e,!1),t=new o;return t.startContainer=a.container,t.startOffset=a.offset,t.endContainer=i.container,t.endOffset=i.offset,t.collapsed=!e.boundingWidth,t.commonAncestorContainer=e.parentElement(),t}}}});
;/*!wiki-lemma:widget/tools/label/label.js*/
define("wiki-lemma:widget/tools/label/label",function(e,t,n){function a(e){var e=e,t="";do switch(e.nodeType){case 1:var n=o(e),a=e.tagName.toLowerCase()+(n?'[label-module="'+n+'"]':""),r=0;if(n)var d=f("body").find(a);else var d=f(e).parent().children(a);d.each(function(t){f(this).get(0)===e&&(r=t)}),t=a+":eq("+r+") "+t,e=e.parentNode;break;case 3:t=f(e).index()+" "+t,e=e.parentNode;break;default:e=e.parentNode}while(9!==e.nodeType&&!n);return f.trim(t)}function o(e){var e=e;if(1===e.nodeType){var t=e.attributes;for(var n in t)if(t[n].nodeName&&"label-module"==t[n].nodeName.toLowerCase())return t[n].nodeName&&t[n].nodeValue}return!1}function r(e){for(var t=[],e=e;9!==e.nodeType;){var n=o(e);n&&t.push(e),e=e.parentNode}return t.length?t[t.length-1]:null}function d(){return f("<span>").addClass("label-wrap")}function l(e,t,n,a,o){var a=a||0,o=o||0,r=!1,d=!1,l=function(e){if(d)return[];var t=[];if(1===e.nodeType)for(var n in e.childNodes)t=t.concat(arguments.callee(e.childNodes[n]));else 3===e.nodeType&&(e===f&&(d=!0),r&&!d&&(c+=e.nodeValue,t.push(e)),e===u&&(r=!0),r||d||(i+=e.nodeValue.length));return t},s=function(e){if(d)return[];var t=[];if(1===e.nodeType)for(var n in e.childNodes)t=t.concat(arguments.callee(e.childNodes[n],i,p));else 3===e.nodeType&&(b+=e.nodeValue.length,b>=i+p&&(d=!0,f=e,o=e.nodeValue.length-(b-(i+p))),r&&!d&&t.push(e),!r&&b>i&&(r=!0,u=e,a=e.nodeValue.length-(b-i)));return t};if("object"==typeof t){var i=a,c="",u=t,f=n,m=l(e,u,f);return c=u!=f?u.nodeValue.substring(a)+c+f.nodeValue.substring(0,o):u.nodeValue.substring(a,o),{offset:i,length:c.length,text:c,nodeList:m}}var i=t,p=n,b=0,u=null,f=null,m=s(e,i,p);return{startNode:u,endNode:f,startOffset:a,endOffset:o,nodeList:m}}function s(e){if(e instanceof v.Rangy){var t={startNode:e.startContainer||nuill,startOffset:e.startOffset||0,endNode:e.endContainer||null,endOffset:e.endOffset||0};t.commonAncestorNode=1===e.commonAncestorContainer.nodeType?e.commonAncestorContainer:e.commonAncestorContainer.parentNode,a(t.startNode).indexOf("label-module")<0&&(t.errno=11,t.errMsg="该模块无法标注！");for(var n=t.startNode;n.parentNode!=t.commonAncestorNode&&f.inArray(n.parentNode.tagName.toLowerCase(),["a","span","em","strong","i","sup","sub"])<0;)if(n=n.parentNode,f.inArray(t.endNode,f(n).find("*").get())<0){t.errno=12,t.errMsg="无法为跨段落内容标注！";break}if(f.inArray(t.startNode.parentNode,f('[label-wrapper=""]').find("*").get())<0&&(t.errno=1,t.errMsg="非标注区！"),t.errMsg)return t;t.moduleNode=r(t.startNode),t.moduleName=f(t.moduleNode).attr("label-module"),t.modulePath=a(t.moduleNode),t=f.extend(t,l(t.moduleNode,t.startNode,t.endNode,t.startOffset,t.endOffset))}else{var t=e;t=f.extend(t,l(t.moduleNode,t.offset,t.length))}return t}function i(e){var t=[];for(var n in e.nodeList){var a=d();t.push(a),f(e.nodeList[n]).wrap(a)}if(e.startNode!==e.endNode){var o=d();t.push(o);var r=e.startNode.nodeValue.substring(e.startOffset);e.startNode.nodeValue=e.startNode.nodeValue.substring(0,e.startOffset),f(e.startNode).after(o.text(r));var l=d();t.push(l);var r=e.endNode.nodeValue.substring(0,e.endOffset);e.endNode.nodeValue=e.endNode.nodeValue.substring(e.endOffset),f(e.endNode).before(l.text(r))}else{var o=d();t.push(o);var r=e.startNode.nodeValue.substring(e.startOffset,e.endOffset),s=e.startNode.nodeValue.substring(e.endOffset);e.startNode.nodeValue=e.endNode.nodeValue.substring(0,e.startOffset),f(e.startNode).after(f(document.createTextNode(s))).after(o.text(r))}return o.html(o.html().replace(/^(\S)/,'<span class="label-wrap-initial">$1</span>')),[t,o.find(".label-wrap-initial").get(0)]}function c(e,t){var n=i(e),a=n[0],o=n[1],r=f(o).offset(),d=f('<div class="label-path-container">').css({left:r.left-Math.max((document.documentElement.clientWidth-1139)/2,0)+15,top:r.top-5,width:1139-(r.left-Math.max((document.documentElement.clientWidth-1139)/2,0))-30-120});d.append(f("<div>").addClass("label-horizontal")),d.append(f("<div>").addClass("label-block")),d.appendTo(f(".desk-wrapper .layout"));var l=f('<div class="label-comment-container">').css({top:r.top-15}).append(f("<div>").append((t?"":'<a class="delete-comment" href="javascript:;"><em class="cmn-icon cmn-icons cmn-icons_close"></em></a><a class="modify-comment" href="javascript:;"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_pencil"></em></a>')+"<b>-- 批注</b><br/>").append(f("<div>").text(e.comment)));return l.appendTo(f(".desk-wrapper .layout")),v.clearSelection(),[f(a),l]}function u(e,t,n,a){new b({classNames:"label-dialog",content:'<div><div class="dialog-title">'+(t?"修改":"添加")+"批注<br/></div><textarea></textarea></div>",btns:[{text:"确认"},{style:"white",text:"取消"}],onBtnClick:function(n){var o=f(f(this).get(0).node).find("textarea").val();"0"===n&&o&&(t?m(a,[o],window):(e.comment=o,m(g,[f.extend(e,{comment:o}),c(e)],window)))}}).show(),t&&f(".label-dialog textarea").val(n)}var f=e("wiki-common:widget/lib/jquery/jquery"),m=e("wiki-common:widget/util/safeCall"),p=(e("wiki-common:widget/util/browser"),e("wiki-common:widget/ui/bubble/bubble")),b=e("wiki-common:widget/ui/dialog/dialog"),v=e("wiki-lemma:widget/tools/rangeExt/rangeExt"),N=f("<i>").css({position:"absolute",left:0,top:0,width:0,height:0});N.appendTo(f(".desk-wrapper .layout"));var h=new p({host:N,classNames:"label-bubble",content:"",pos:"topRight",offset:{top:-15,left:30},showTail:!1,hideWhenBlur:!0,animation:"SLIDE"});$bubble=h.getNode();var g="";n.exports={addLabel:function(e,t){var n=v.getSelectionRangy();if(n&&!n.collapsed){var a=s(n);setTimeout(function(){N.css({left:e.clientX-Math.max((document.documentElement.clientWidth-1139)/2,0),top:e.clientY+f(window).scrollTop()}),a.errno?a.errno>10&&(h.setContent("<div>"+a.errMsg+"</div>"),h.show()):(h.setContent('<a href="javascript:;" class="cmn-btn-blue cmn-btn-25 add-label">标注</a>'),f(".add-label").on("click",function(){u(a)}),h.show())},200),t&&(g=t)}},modifyLabel:function(e,t){u(null,!0,e,t)},showLabel:function(e,t){var e=s(e);return c(e,t)},removeLabel:function(){f(".label-comment-container").remove(),f(".label-path-container").remove()}}});
;/*!wiki-lemma:widget/tools/lazyLoad/lazyLoad.js*/
define("wiki-lemma:widget/tools/lazyLoad/lazyLoad",function(t,e,r){var A=t("wiki-common:widget/lib/jquery/jquery"),a=function(t){t=t||{},t.preloadHeight=t.preloadHeight||0,t.className=t.className||"lazy-img",t.placeHolder=t.placeHolder||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF9fX1AAAA0VQI3QAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==",t.srcAttribute=t.srcAttribute||"data-src";var e=function(){return A(window).scrollTop()+A(window).height()+t.preloadHeight},r=function(){for(var a=A("img."+t.className),o=e(),i=0;i<a.length;i++)target=a.eq(i),target.attr("src")!==t.placeHolder&&target.attr("src",t.placeHolder),imgSrc=target.attr(t.srcAttribute),target.offset().top<o&&(target.attr("src",imgSrc).removeClass(t.className).removeAttr(t.srcAttribute),!!t.onLazyLoad&&t.onLazyLoad(target));A("img."+t.className).length<=0&&A(window).off("scroll resize",r)},a=function(){A(document).ready(function(){r(),A(window).on("scroll",r),A(window).on("resize",r)})};a()};r.exports=a});
;/*!wiki-lemma:widget/tools/marquee/marquee.js*/
define("wiki-lemma:widget/tools/marquee/marquee",function(t,i,e){function o(t){this.viewport=c(t.viewport),this.btnBox=c(t.btnBox),this.picList=c("ul.maqueeCanvas",this.viewport),this.autoScroll=t.autoScroll||!1,this.stopScroll=!1,this.cloneNode="boolean"==typeof t.cloneNode?t.cloneNode:!1,this.scrollDirection=t.scrollDirection||"HOR";var i=c(">li",this.picList);this.picWidth=i.outerWidth(!0),this.picHeight=i.outerHeight(!0),this.picCount=i.length,this.curFrame=0,this.beforeSwitch=t.beforeSwitch,this.afterSwitch=t.afterSwitch,this.duration=t.duration,this.delay=t.delay;var e=this;this.cloneNode&&c("li",this.picList).clone().appendTo(this.picList),this.btnBox&&this.btnBox.on("click","[frameIndex]",function(){e.stop.call(e),e.switchTo(c(this).attr("frameIndex"))}).on("mouseenter",function(){e.stop.call(e)}).on("mouseleave",function(){e.autoScroll&&e.start.call(e)}),this.viewport.on("mouseenter",function(){e.stop.call(e)}).on("mouseleave",function(){e.autoScroll&&e.start.call(e)})}var c=t("wiki-common:widget/lib/jquery/jquery");o.prototype={constructor:o,start:function(){var t=this;t.stopScroll=!1,t.scrollTimer||(t.scrollTimer=setTimeout(function(){t.scrollTimer=null,t.picList.animate("HOR"==t.scrollDirection?{left:"-="+t.picWidth}:{top:"-="+t.picHeight},{duration:t.duration||400,queue:!1,start:function(){t.curFrame=++t.curFrame%t.picCount,c("[frameIndex].cur",t.btnBox).removeClass("cur"),c("[frameIndex]:nth-child("+(t.curFrame+1)+")",t.btnBox).addClass("cur"),t.beforeSwitch&&t.beforeSwitch.call(t,t.curFrame)},complete:function(){t.picList.css("HOR"==t.scrollDirection?{left:-t.curFrame*t.picWidth}:{top:-t.curFrame*t.picHeight}),t.autoScroll&&!t.stopScroll&&t.start.call(t),t.afterSwitch&&t.afterSwitch.call(t,t.curFrame)}})},t.delay||3e3))},stop:function(){clearTimeout(this.scrollTimer),this.scrollTimer=null,this.stopScroll=!0},switchTo:function(t){var i=this;t=Math.max(Math.min(t,i.picCount-1),0),i.picList.animate("HOR"==i.scrollDirection?{left:-t*i.picWidth}:{top:-t*i.picHeight},{duration:i.duration||400,queue:!1,start:function(){i.curFrame=t%i.picCount,c("[frameIndex].cur",i.btnBox).removeClass("cur"),c("[frameIndex]:nth-child("+(i.curFrame+1)+")",i.btnBox).addClass("cur"),i.beforeSwitch&&i.beforeSwitch.call(i,i.curFrame)},complete:function(){i.picList.css("HOR"==i.scrollDirection?{left:-t*i.picWidth}:{top:-t*i.picHeight}),i.afterSwitch&&i.afterSwitch.call(i,i.curFrame)}})}},e.exports=o});
;/*!wiki-lemma:widget/tools/newSideShare/qrcode.js*/
define("wiki-lemma:widget/tools/newSideShare/qrcode",function(t,e,r){var o;!function(){function t(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;r>e;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function n(t,e){this.totalCount=t,this.dataCount=e}function i(){this.buffer=[],this.length=0}function a(){return"undefined"!=typeof CanvasRenderingContext2D}function s(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function h(t,e){for(var r=1,o=u(t),n=0,i=m.length;i>=n;n++){var a=0;switch(e){case g.L:a=m[n][0];break;case g.M:a=m[n][1];break;case g.Q:a=m[n][2];break;case g.H:a=m[n][3]}if(a>=o)break;r++}if(r>m.length)throw new Error("Too long data");return r}function u(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;r>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=d.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var h=s*n,u=this.modules[i][s];u&&(o.beginFill(0,100),o.moveTo(h,a),o.lineTo(h+n,a),o.lineTo(h+n,a+n),o.lineTo(h,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=d.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=d.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=d.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var h=!1;i<t.length&&(h=1==(t[i]>>>n&1));var u=d.getMask(e,o,a-s);u&&(h=!h),this.modules[o][a-s]=h,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,o){for(var a=n.getRSBlocks(t,r),s=new i,h=0;h<o.length;h++){var u=o[h];s.put(u.mode,4),s.put(u.getLength(),d.getLengthInBits(u.mode,t)),u.write(s)}for(var l=0,h=0;h<a.length;h++)l+=a[h].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*l)&&(s.put(e.PAD0,8),!(s.getLengthInBits()>=8*l));)s.put(e.PAD1,8);return e.createBytes(s,a)},e.createBytes=function(t,e){for(var o=0,n=0,i=0,a=new Array(e.length),s=new Array(e.length),h=0;h<e.length;h++){var u=e[h].dataCount,l=e[h].totalCount-u;n=Math.max(n,u),i=Math.max(i,l),a[h]=new Array(u);for(var g=0;g<a[h].length;g++)a[h][g]=255&t.buffer[g+o];o+=u;var f=d.getErrorCorrectPolynomial(l),c=new r(a[h],f.getLength()-1),p=c.mod(f);s[h]=new Array(f.getLength()-1);for(var g=0;g<s[h].length;g++){var m=g+p.getLength()-s[h].length;s[h][g]=m>=0?p.get(m):0}}for(var v=0,g=0;g<e.length;g++)v+=e[g].totalCount;for(var _=new Array(v),C=0,g=0;n>g;g++)for(var h=0;h<e.length;h++)g<a[h].length&&(_[C++]=a[h][g]);for(var g=0;i>g;g++)for(var h=0;h<e.length;h++)g<s[h].length&&(_[C++]=s[h][g]);return _};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;d.getBCHDigit(e)-d.getBCHDigit(d.G15)>=0;)e^=d.G15<<d.getBCHDigit(e)-d.getBCHDigit(d.G15);return(t<<10|e)^d.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;d.getBCHDigit(e)-d.getBCHDigit(d.G18)>=0;)e^=d.G18<<d.getBCHDigit(e)-d.getBCHDigit(d.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return d.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case f.PATTERN000:return(e+r)%2==0;case f.PATTERN001:return e%2==0;case f.PATTERN010:return r%3==0;case f.PATTERN011:return(e+r)%3==0;case f.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case f.PATTERN101:return e*r%2+e*r%3==0;case f.PATTERN110:return(e*r%2+e*r%3)%2==0;case f.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),o=0;t>o;o++)e=e.multiply(new r([1,c.gexp(o)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:return 8;case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var h=-1;1>=h;h++)0>n+h||n+h>=e||(0!=s||0!=h)&&a==t.isDark(o+s,n+h)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var u=0;t.isDark(o,n)&&u++,t.isDark(o+1,n)&&u++,t.isDark(o,n+1)&&u++,t.isDark(o+1,n+1)&&u++,(0==u||4==u)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},c={glog:function(t){if(1>t)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},p=0;8>p;p++)c.EXP_TABLE[p]=1<<p;for(var p=8;256>p;p++)c.EXP_TABLE[p]=c.EXP_TABLE[p-4]^c.EXP_TABLE[p-5]^c.EXP_TABLE[p-6]^c.EXP_TABLE[p-8];for(var p=0;255>p;p++)c.LOG_TABLE[c.EXP_TABLE[p]]=p;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<t.getLength();n++)e[o+n]^=c.gexp(c.glog(this.get(o))+c.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<t.getLength();n++)o[n]^=c.gexp(c.glog(t.get(n))+e);return new r(o,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var r=n.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],a=0;o>a;a++)for(var s=r[3*a+0],h=r[3*a+1],u=r[3*a+2],l=0;s>l;l++)i.push(new n(h,u));return i},n.getRsBlockTable=function(t,e){switch(e){case g.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case g.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case g.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case g.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}{var r=this._htOption,o=this._el,n=t.getModuleCount();Math.floor(r.width/n),Math.floor(r.height/n)}this.clear();var i=e("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:r.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(i),i.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;n>a;a++)for(var s=0;n>s;s++)if(t.isDark(a,s)){var h=e("use",{x:String(a),y:String(s)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),_="svg"===document.documentElement.tagName.toLowerCase(),C=_?v:a()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),n=function(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)},i=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)};return o.onabort=n,o.onerror=n,o.onload=i,void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}r._bSupportDataURI===!0&&r._fSuccess?r._fSuccess.call(r):r._bSupportDataURI===!1&&r._fFail&&r._fFail.call(r)}if(this._android&&this._android<=2.1){var r=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,i,a,s,h,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*r;else"undefined"==typeof u&&(arguments[1]*=r,arguments[2]*=r,arguments[3]*=r,arguments[4]*=r);o.apply(this,arguments)}}var n=function(t,e){this._bIsPainted=!1,this._android=s(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,n=t.getModuleCount(),i=o.width/n,a=o.height/n,s=Math.round(i),h=Math.round(a);e.style.display="none",this.clear();for(var u=0;n>u;u++)for(var l=0;n>l;l++){var g=t.isDark(u,l),f=l*i,d=u*a;r.strokeStyle=g?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=g?o.colorDark:o.colorLight,r.fillRect(f,d,i,a),r.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},n}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),n=Math.floor(e.width/o),i=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var h=0;o>h;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var u=r.childNodes[0],l=(e.width-u.offsetWidth)/2,g=(e.height-u.offsetHeight)/2;l>0&&g>0&&(u.style.margin=g+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();o=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=s(),this._el=t,this._oQRCode=null,this._oDrawing=new C(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},o.prototype.makeCode=function(t){this._oQRCode=new e(h(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},o.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},o.prototype.clear=function(){this._oDrawing.clear()},o.CorrectLevel=g}(),r.exports=o});
;/*!wiki-lemma:widget/tools/newSideShare/sideShare.js*/
define("wiki-lemma:widget/tools/newSideShare/sideShare",function(e,n,i){var o=(e("wiki-common:widget/lib/jquery/jquery"),{});o.initBaikeShare=function(e,n,i,o,t,a){var c;o=encodeURIComponent(o),i=encodeURIComponent(i),t=encodeURIComponent(t),a=encodeURIComponent(a);var r="",s="",m="【"+n+"_百度百科】"+i,p="【"+n+"_百度百科】";switch(""!==t&&(r="&pic="+t),""!==a&&(s="&pics="+a),e){case"weibo":c="http://v.t.sina.com.cn/share/share.php?url="+o+"&title="+m+r+"&appkey=936491597";break;case"Qzone":c="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+o+"&title="+p+s+"&summary="+i;break;case"qq":c="http://connect.qq.com/widget/shareqq/index.html?url="+o+"&title="+p+s+"&summary="+i}window.open(c)},i.exports=o});
;/*!wiki-lemma:widget/tools/newSideShare/taskSideShare.js*/
define("wiki-lemma:widget/tools/newSideShare/taskSideShare",function(e,a,r){var i=e("wiki-common:widget/lib/jquery/jquery"),t=e("wiki-lemma:widget/tools/newSideShare/sideShare"),o=e("wiki-lemma:widget/tools/newSideShare/qrcode"),n=e("wiki-common:widget/component/nslog/nslog"),s={init:function(e){var a=this;a.param=e,a.param.pic=a.param.pic||"https://bkssl.bdimg.com/cms/static/baike.png",a.param.qqPic=a.param.qqPic||"https://bkssl.bdimg.com/cms/static/baike.png",a.param.title=a.param.title||i("title").html(),a.param.desc=a.param.desc.length>80?a.param.desc.substr(0,80)+"...":a.param.desc,a.shareEvent(),a.initTaskEntry()},shareEvent:function(){var e=this.param.url||[location.protocol,"//",location.host,location.pathname].join(""),a=".baidu.com/link";if(e.indexOf(a)>-1){var r=""!==this.param.newLemmaId?"/"+this.param.newLemmaId:"";e=[location.protocol,"//",location.host,"/item/"+encodeURIComponent(this.param.lemmaTitle)+r].join("")}var n=e.indexOf("share_fr=pc_");if(n>-1)var e=e.replace(/\??\&?share\_fr\=pc\_[a-z]+/g,"");var s=e.indexOf("?");if(-1!=s)var c=[e+"&share_fr=pc_sina",e+"&share_fr=pc_qq",e+"&share_fr=pc_qzone"];else var c=[e+"?share_fr=pc_sina",e+"?share_fr=pc_qq",e+"?share_fr=pc_qzone"];var p=this,m=!0;i("#side-share,#top-share").on("click",".bds_wechat",function(){if(m){var a=new o(document.getElementById("wechat-qrcode-img"),{width:180,height:180}),r=e.indexOf("?");if(r>-1)var t=e+"&share_fr=pc_qrcode";else var t=e+"?share_fr=pc_qrcode";i.ajax({url:"/api/common/genbkshorturl?url="+t,success:function(e){0===e.errno&&e.shortUrl&&(a.makeCode(e.shortUrl),m=!1,i(".qrcode-wrapper").show())},error:function(e){console.log("err",e)}})}else i(".qrcode-wrapper").show()}),i(".qrcode-wrapper .cmn-icons_close").click(function(){i(".qrcode-wrapper").hide()}),i("#side-share,#top-share").on("click",".bds_tsina",function(e){e.preventDefault();var a=c[0];t.initBaikeShare("weibo",p.param.title,p.param.desc,a,p.param.pic)}),i("#side-share,#top-share").on("click",".bds_qzone",function(e){e.preventDefault();var a=c[2];t.initBaikeShare("Qzone",p.param.title,p.param.desc,a,p.param.pic,p.param.qqPic)}),i("#side-share,#top-share").on("click",".bds_tqq",function(e){e.preventDefault();var a=c[1];t.initBaikeShare("qq",p.param.title,p.param.desc,a,p.param.pic,p.param.qqPic)}),i("#side-share,#top-share").on("mouseover",".bds_app",function(){i("#J-app-download").removeClass("hide")}).on("mouseout",".bds_app",function(){i("#J-app-download").addClass("hide")})},initTaskEntry:function(){var e=i("#J-bds_task"),a=i("#J-task-tip");e.length>0&&n(10060903),setTimeout(function(){a.hide()},5e3)}};r.exports=s});
;/*!wiki-lemma:widget/tools/rightCheck/checkUgc.js*/
define("wiki-lemma:widget/tools/rightCheck/checkUgc",function(e,t,n){function i(e,t){t?a.alert({title:"编辑提示",subMsg:"晚23:00至次日8:00，因审核系统例行维护，您提交的版本可能需要较长时间才能通过，望您谅解。",onConfirm:function(){window.location.href=e}}):window.location.href=e}function o(e,t,n){var o=$(".j-discussion-link").length>0?!0:!1;if(e.errno)switch(e.errno){case 100001:c("10003106"),l.showLoginPop();break;case 100005:alert("对不起，您目前被封禁");break;case 100006:s.show();break;case 110001:alert("对不起，该词条被锁定");break;case 110007:alert("对不起，消歧页无法编辑");break;case 110005:c("10003101");var r='<div style="text-align: left;width: 490px"><h2 style="font-size: 20px;color: #333;line-height: 26px;margin-top: 10px;margin-bottom: 20px;">对不起，你暂时没有权限编辑该词条</h2><p style="font-size: 16px;color: #333;line-height: 26px;margin-bottom: 17px;">亲爱的用户，该词条内容已较完善，需百科等级达到4级且通过率达85%才可编辑哦。</p><p style="font-size: 16px;color: #333">你当前百科等级为'+e.data.userInfo.level+"级、通过率"+e.data.userInfo.passRatio+"%，可进行以下操作：</p></div>",d=[{key:"join",text:'<span style="font-size: 14px;text-align: center;vertical-align: middle;display: table-cell;">反馈词条问题，参与百科共建</span>'},{text:'<span style="font-size: 14px;text-align: center;vertical-align: middle;display: table-cell;">参加成长任务，提升编辑权限</span>',key:"task"}];o&&(d=[{key:"discussion",text:'<span style="font-size: 14px">参与词条讨论，反馈词条问题</span>'},{text:'<span style="font-size: 14px">参加成长任务，提升编辑权限</span>',key:"task"}]),new a({title:"编辑提示",content:r,btns:d,onBtnClick:function(e){"discussion"===e?window.location.href="/planet/talk?lemmaId="+t+"&category=1":"task"===e?window.location.href="/usercenter#guide":"join"===e&&(window.location.href="/feedback")}}).show();break;case 110008:c("10003102");var r='<div style="text-align: left;width: 490px"><h2 style="font-size: 20px;color: #333;line-height: 26px;margin-bottom: 20px;margin-top: 10px;">对不起，你暂时没有权限编辑该词条</h2><p style="font-size: 16px;color: #333;line-height: 26px;margin-bottom: 17px;">亲爱的用户，该词条内容已较完善，需百科等级达到6级且通过率达85%才可编辑哦。</p><p style="font-size: 16px;color: #333">你当前百科等级为'+e.data.userInfo.level+"级、通过率"+e.data.userInfo.passRatio+"%，可进行以下操作：</p></div>",d=[{key:"join",text:'<span style="font-size: 14px;text-align: center;vertical-align: middle;display: table-cell;">反馈词条问题，参与百科共建</span>'},{text:'<span style="font-size: 14px;text-align: center;vertical-align: middle;display: table-cell;">参加成长任务，提升编辑权限</span>',key:"task"}];o&&(d=[{key:"discussion",text:'<span style="font-size: 14px">参与词条讨论，反馈词条问题</span>'},{text:'<span style="font-size: 14px">参加成长任务，提升编辑权限</span>',key:"task"}]),new a({title:"编辑提示",content:r,btns:d,onBtnClick:function(e){"discussion"===e?window.location.href="/planet/talk?lemmaId="+t+"&category=1":"task"===e?window.location.href="/usercenter#guide":"join"===e&&(window.location.href="/feedback")}}).show();break;case 110003:c("10003103"),p.logActEvent({page:"lemma",act_type:"edit-preeditCheck-editconflict",errno:110003,nslog:10003103}),new a({title:"编辑提示",content:'<div style="text-align: left;width: 490px"><p style="font-size: 16px;color: #333;line-height: 26px;margin-bottom: 17px;">'+(o?"该词条正在被其他用户修改，暂时无法编辑，请稍后再试，您也可以前往科星球反馈词条问题":"该词条正在被其他用户修改，暂时无法编辑，请稍后再试，您也可以选择直接向官方反馈词条问题")+"</p></div>",btns:[{key:"feedback",text:'<span style="font-size: 14px">反馈问题</span>'}],onBtnClick:function(e){"feedback"===e&&(window.location.href=o?"/planet/talk?lemmaId="+t+"&category=1":"/feedback")}}).show();break;case 1231:new a({title:"编辑提示",content:'<div style="text-align: left;width: 490px"><p style="font-size: 16px;color: #333;line-height: 26px;margin-bottom: 17px;">当前版块由企业官方认证，暂不支持编辑；如对内容有疑义，您可向百度百科反馈。</p></div>',btns:[{key:"feedback",text:'<span style="font-size: 14px">反馈问题</span>'}],onBtnClick:function(e){"feedback"===e&&(window.location.href="/feedback")}}).show();break;case 470001:alert("系统错误，请刷新重试");break;case 1221:new a({title:"编辑提示",content:'<div style="text-align: left;width: 490px"><p style="font-size: 16px;color: #333;line-height: 26px;margin-bottom: 17px;">'+(o?"当前版块正在被其他用户修改，暂时无法编辑，请稍后再试，您也可以前往科星球反馈词条问题":"当前版块正在被其他用户修改，暂时无法编辑，请稍后再试，您也可以选择直接向官方反馈词条问题")+"</p></div>",btns:[{key:"feedback",text:'<span style="font-size: 14px">反馈问题</span>'}],onBtnClick:function(e){"feedback"===e&&(window.location.href=o?"/planet/talk?lemmaId="+t+"&category=1":"/feedback")}}).show()}else{if(!e.data.right.noAudit)return void a.alert({title:"编辑提示",subMsg:"很抱歉，该词条有其他用户编辑的版本正在提交，您暂时无法编辑。<br/>百科建议您晚些时候再编辑该词条，或者尝试编辑其他的词条。"});"string"==typeof n?i(n,e.data.notice.isMidNight):n()}}var a=e("wiki-common:widget/ui/dialog/dialog"),l=e("wiki-common:widget/component/userLogin/userLogin"),s=e("wiki-common:widget/component/unameFiller/unameFiller"),c=e("wiki-common:widget/component/nslog/nslog"),p=e("wiki-lemma:widget/tools/clickstream/clickstream");n.exports=o});
;/*!wiki-lemma:widget/tools/rightCheck/rightCheck.js*/
define("wiki-lemma:widget/tools/rightCheck/rightCheck",function(e,i,t){var a=e("wiki-common:widget/lib/jquery/jquery"),n=e("wiki-common:widget/util/safeCall"),d=(e("wiki-common:widget/component/userLogin/userLogin"),{editView:{status:null,data:null}});t.exports={editView:function(e,i){var e=e||0,i=i||function(){};if(e)if(d.editView.status)if("PENDING"==d.editView.status)var t=setInterval(function(){"READY"==d.editView.status&&(clearInterval(t),n(i,d.editView.data))},100);else n(i,d.editView.data);else{d.editView.status="PENDING";var t=setInterval(function(){window.baikeInfo&&window.baikeInfo.userLogin&&(clearInterval(t),window.baikeInfo.userLogin.isLogin?a.getJSON("/wikisubmit/api/viewcheck?lemmaId="+e,function(e){d.editView.data=e,d.editView.status="READY",n(i,d.editView.data)}):(d.editView.data={errno:10001},d.editView.status="READY",n(i,d.editView.data)))},100)}},preeditCheck:function(e,i){var t=e.lemmaId||0,d=e.lemmaTitle||"",o=e.lemmaDesc||"",r=e.versionId||0,s=e.action||"",c=e.partType||"",w=e.ci||"";i=i||function(){};var l={lemmaId:t,lemmaTitle:d,lemmaDesc:o,versionId:r,action:s,partType:w?"content":c,moduleIndex:w,_:Math.random()};a.getJSON("/editor/check/preeditcheck",l,function(e){n(i,e)})}}});
;/*!wiki-lemma:widget/tools/service/service.js*/
define("wiki-lemma:widget/tools/service/service",function(e,t,o){var l=e("wiki-common:widget/lib/jquery/jquery"),n={};n.Vote={voteCount:0,newvoteCount:0,voted:!1,itemList:[],vote:function(e){n.Vote.voted||l.ajax({url:"https://gss3.bdstatic.com/8LsBaXSm2Q5IlBGlnYG/set",dataType:"jsonp",jsonp:"cb",data:{type:0,like:1,pid:3,key:e.newLemmaId,r:Math.random()},success:function(e){n.Vote.voted=!0;for(var t=0;t<n.Vote.itemList.length;t++){var o=n.Vote.itemList[t];!!o.handleVotted&&o.handleVotted(e)}}})},getVote:function(e){if(0==n.Vote.voteCount)l.ajax({url:"https://gss3.bdstatic.com/8LsBaXSm2Q5IlBGlnYG/get?key="+e.lemmaId+"&type=0&like=1&pid=3&random="+Math.random(),dataType:"jsonp",jsonp:"cb",success:function(t){n.Vote.voteCount=t.count,n.Vote.getNewVote(e)}});else for(var t=0;t<n.Vote.itemList.length;t++){var o=n.Vote.itemList[t];!!o.handleGotten&&o.handleGotten({count:data.count})}},getNewVote:function(e){l.ajax({url:"https://gss3.bdstatic.com/8LsBaXSm2Q5IlBGlnYG/get?key="+e.newLemmaId+"&type=0&like=1&pid=3&random="+Math.random(),dataType:"jsonp",jsonp:"cb",success:function(e){n.Vote.newvoteCount=n.Vote.voteCount+e.count;for(var t=0;t<n.Vote.itemList.length;t++){var o=n.Vote.itemList[t];!!o.handleGotten&&o.handleGotten(e)}}})},regist:function(e){n.Vote.itemList.push(e)}},n.Collect={collected:null,collectTK:"",isGotRequesting:!1,itemList:[],getCollect:function(e){if(null==n.Collect.collected)1!=n.Collect.isGotRequesting&&(n.Collect.isGotRequesting=!0,l.getJSON("/api/usercenter/checkfavorites?lemmaId="+e.newLemmaId,function(e){if(n.Collect.isGotRequesting=!1,0==e.errno){n.Collect.collected=1==e.isFavorite?!0:!1,n.Collect.collectTK=e.tk;for(var t=0;t<n.Collect.itemList.length;t++){var o=n.Collect.itemList[t];!!o.handleGotten&&o.handleGotten(e)}}}));else for(var t=0;t<n.Collect.itemList.length;t++){var o=n.Collect.itemList[t];!!o.handleGotten&&o.handleGotten({has:n.Collect.collected})}},collect:function(e){n.Collect.collected||l.getJSON("/api/usercenter/addfavorites?lemmaId="+e.newLemmaId+"&tk="+n.Collect.collectTK+"&r="+Math.random(),function(e){if(0==e.errno){n.Collect.collected=!0;for(var t=0;t<n.Collect.itemList.length;t++){var o=n.Collect.itemList[t];!!o.handleCollected&&o.handleCollected(e)}}})},cancel:function(e){n.Collect.collected&&l.getJSON("/api/usercenter/delfavorites?lemmaId="+e.newLemmaId+"&tk="+n.Collect.collectTK+"&r="+Math.random(),function(e){if(0==e.errno){n.Collect.collected=!1;for(var t=0;t<n.Collect.itemList.length;t++){var o=n.Collect.itemList[t];!!o.handleCanceled&&o.handleCanceled(e)}}})},regist:function(e){n.Collect.itemList.push(e)}},o.exports=n});
;/*!wiki-lemma:widget/tools/searchHeader/toolButtons-n/toolButtons.js*/
define("wiki-lemma:widget/tools/searchHeader/toolButtons-n/toolButtons",function(t,e,o){var n=t("wiki-common:widget/lib/jquery/jquery"),i=t("wiki-common:widget/component/userLogin/userLogin"),l=t("wiki-lemma:widget/tools/service/service"),c=n(".toolButtons-collect"),s=(n(".toolButtons-edit"),function(){c.addClass("collected")}),a=function(){c.removeClass("collected")},d=function(t){var e=null,o=function(){n.getJSON("/api/wikiui/sharecounter?lemmaId="+t.newLemmaId+"&method=get",function(t){e=t.tk})};o(),n(".top-vote").on("click",function(){n(this).hasClass("voted")||n.ajax({type:"get",url:"/api/wikiui/sharecounter?lemmaId="+t.newLemmaId+"&method=add&type=like&tk="+e,dataType:"json",success:function(t){n(".top-vote").addClass("voted"),n(".vote-count").text(t.count),n(".toolButtons-vote").addClass("voted").find(".j-tool-btn-vote-num").text(t.count),n("#figurePraise").addClass("voted"),n("#figurePraise .txt").text("已赞")}})}),c.on("click",function(){var e=n(this);i.checkIfLogin({onLogin:function(){e.hasClass("collected")?l.Collect.cancel(t):l.Collect.collect(t)},onUnlogin:function(){i.showLoginPop()}})}),l.Collect.regist({handleCollected:s,handleCanceled:a,handleGotten:function(t){!!t.isFavorite&&s()}}),i.regist({handleLogon:function(){l.Collect.getCollect(t)}})};o.exports=d});
;/*!wiki-lemma:widget/tools/searchHeader/toolButtons-n/userInfo.js*/
define("wiki-lemma:widget/tools/searchHeader/toolButtons-n/userInfo",function(n,o,e){var i=n("wiki-common:widget/lib/jquery/jquery"),t=n("wiki-common:widget/component/userLogin/userLogin"),r=function(){var n=i(".lemmaWgt-searchHeader .user-link");t.checkIfLogin({onLogin:function(o){n.attr("href","/usercenter").text(o.name),window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin=o},onUnlogin:function(){window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin={errno:0,isLogin:!1},n.on("click",function(){t.showLoginPop()}),n.removeAttr("target")}}),t.regist({handleLogon:function(o){n.attr("href","/usercenter").text(o.name)}})};e.exports=r});
;/*!wiki-lemma:widget/tools/searchHeader/toolButtons/toolButtons.js*/
define("wiki-lemma:widget/tools/searchHeader/toolButtons/toolButtons",function(t,o,e){var n=t("wiki-common:widget/lib/jquery/jquery"),i=t("wiki-common:widget/component/userLogin/userLogin"),l=t("wiki-lemma:widget/tools/service/service"),c=n(".toolButtons-collect"),s=(n(".toolButtons-edit"),function(){c.addClass("collected")}),a=function(){c.removeClass("collected")},d=function(t){n(".top-vote").on("click",function(){n(this).hasClass("voted")||n.ajax({type:"get",url:"/api/wikiui/sharecounter?lemmaId="+t.newLemmaId+"&method=add&type=like",dataType:"json",success:function(t){n(".top-vote").addClass("voted"),n(".vote-count").text(t.count),n(".toolButtons-vote").addClass("voted").text(t.count),n("#figurePraise").addClass("voted"),n("#figurePraise .txt").text("已赞")}})}),c.on("click",function(){var o=n(this);i.checkIfLogin({onLogin:function(){o.hasClass("collected")?l.Collect.cancel(t):l.Collect.collect(t)},onUnlogin:function(){i.showLoginPop()}})}),l.Collect.regist({handleCollected:s,handleCanceled:a,handleGotten:function(t){!!t.isFavorite&&s()}}),l.Vote.getVote(t),i.regist({handleLogon:function(){l.Collect.getCollect(t)}})};e.exports=d});
;/*!wiki-lemma:widget/tools/searchHeader/toolButtons/userInfo.js*/
define("wiki-lemma:widget/tools/searchHeader/toolButtons/userInfo",function(n,o,e){var i=n("wiki-common:widget/lib/jquery/jquery"),t=n("wiki-common:widget/component/userLogin/userLogin"),r=function(){var n=i(".lemmaWgt-searchHeader .user-link");t.checkIfLogin({onLogin:function(o){n.attr("href","/usercenter").text(o.name),window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin=o},onUnlogin:function(){window.baikeInfo=window.baikeInfo||{},window.baikeInfo.userLogin={errno:0,isLogin:!1},n.on("click",function(){t.showLoginPop()})}}),t.regist({handleLogon:function(o){n.attr("href","/usercenter").text(o.name)}})};e.exports=r});
;/*!wiki-lemma:widget/tools/throttle/throttle.es.js*/
define("wiki-lemma:widget/tools/throttle/throttle.es",function(t,e,n){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]?60:arguments[1],n=null,r=!0,u=void 0;if("function"!=typeof t)throw new Error("First argument must be function");return function(){var i=this;return u=arguments,r?(t.apply(this,u),void(r=!1)):void(n||(n=setTimeout(function(){clearTimeout(n),n=null,t.apply(i,u)},e)))}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r,n.exports=e["default"]});
;/*!wiki-lemma:widget/tools/tool/debounce.js*/
define("wiki-lemma:widget/tools/tool/debounce",function(t,e,n){var o=function(t,e){var n;return function(){var o=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(o,i)},e)}};n.exports=o});
;/*!wiki-lemma:widget/tools/tool/tool.js*/
define("wiki-lemma:widget/tools/tool/tool",function(e,o,t){var n=e("wiki-common:widget/lib/jquery/jquery"),a={};a.callByBrowser=function(e,o){var t,a=this.url,i=document.createElement("SCRIPT"),l=0,r=o||{},d=(r.charset,e||function(){}),u=r.timeOut||0;i.onload=i.onreadystatechange=function(){if(!l){var e=i.readyState;if("undefined"==typeof e||"loaded"==e||"complete"==e){l=1;try{d(),clearTimeout(t)}finally{i.onload=i.onreadystatechange=null,n(i).remove()}}}},u&&(t=setTimeout(function(){i.onload=i.onreadystatechange=null,n(i).remove(),r.onfailure&&r.onfailure()},u)),n(i).attr("src",a).appendTo(document.body)},t.exports=a});
;/*!wiki-lemma:widget/tools/video/flashVideo/flashVideo.js*/
define("wiki-lemma:widget/tools/video/flashVideo/flashVideo",function(e,o,i){var t=e("wiki-common:widget/lib/jquery/jquery"),s=e("wiki-common:widget/lib/swfObject/swfObject"),n=function(e,o,i,a){var d="https://get.adobe.com/cn/flashplayer",l="j-flash-video"+n.count,c="j-flash-video-placeholder"+n.count;n.count++,options=t.extend({width:0,height:0,src:"",target:null,className:""},e||{}),a=t.extend({},a||{}),o=t.extend({allowscriptaccess:"always",wmode:"Opaque",allowfullscreen:"true"},o||{}),i=t.extend({"class":"flash-video j-flash-video "+options.className,id:l},i||{}),this.load=function(){options.target.append(t("<div id='"+c+"'></div>")),s.embedSWF(options.src,c,options.width,options.height,10,d,a,o,i)},this.remove=function(){t("#"+l).remove()}};n.count=0,i.exports=n});
;/*!wiki-lemma:widget/tools/video/iframeVideo/iframeVideo.js*/
define("wiki-lemma:widget/tools/video/iframeVideo/iframeVideo",function(e,i,o){var r=e("wiki-common:widget/lib/jquery/jquery"),t=function(e){var i='<iframe frameborder="0" scrolling="no"></iframe>',o=r(".j-iframe-video-cover"),t=r.extend({src:"",width:0,height:0,coverUrl:null,target:null},e),d=null,o=r('<div class="iframe-video-cover"></div>');this.load=function(){d=r(i),d.css({width:t.width,height:t.height}),o.css({width:t.width,height:t.height,background:"url("+t.coverUrl+") no-repeat 0px 0px",position:"absolute","z-index":"1"}),d.bind("load",function(){o.hide()}),o.appendTo(t.target),d.attr("src",t.src),d.appendTo(t.target)},this.remove=function(){d.remove(),o.remove()}};o.exports=t});
;/*!wiki-lemma:widget/tools/video/iqiyiVideo/iqiyiVideo.js*/
define("wiki-lemma:widget/tools/video/iqiyiVideo/iqiyiVideo",function(i,e,o){var t=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-lemma:widget/tools/video/flashVideo/flashVideo"),n=function(i){function e(){window.notice=function(i){if(i="string"==t.type(i)?t.parseJSON(i):i,"playStateChange"==i.type)switch(i.data.state){case"Playing":!!o&&o.hide();break;case"Stoped":}}}var o=i.cover,n=this,d=!1;o&&o.length>0&&(i.src=i.src+"&autoPlay=1",e(),o.click(function(){i.videoCount>1&&e(),d||(n.load(),t(o).find(".svm-cover-button").addClass("svm-loding"),d=!0)})),a.call(this,i)};n.count=0,o.exports=n});
;/*!wiki-lemma:widget/tools/video/pageMask/pageMask.js*/
define("wiki-lemma:widget/tools/video/pageMask/pageMask",function(i,n,e){var t=i("wiki-common:widget/lib/jquery/jquery"),d=function(){var i='<div class="page-mask j-page-mask" style="display:none" id="dvPageMask"></div>',n=null,e=this,d=function(){return n||(n=t(i),n.appendTo(t(document.body))),n},o=function(){},a=function(){},c=function(){e.hide()};this.enableClickHide=function(){d().bind("click",c)},this.disableClickHide=function(){d().unbind("click",c)},this.display=function(){d().show(),a()},this.hide=function(){d().hide(),o()}};e.exports=new d});
;/*!wiki-lemma:widget/tools/video/video.js*/
define("wiki-lemma:widget/tools/video/video",function(i,e,o){var l=i("wiki-lemma:widget/tools/video/iframeVideo/iframeVideo"),t=i("wiki-lemma:widget/tools/video/iqiyiVideo/iqiyiVideo"),d=i("wiki-lemma:widget/tools/video/flashVideo/flashVideo"),a=function(i){i.type;"iqiyi"==i.type?t.call(this,i):"flash"==i.type?d.call(this,i):l.call(this,i)};o.exports=a});
;/*!wiki-lemma:widget/basicElement/addSub/addSub.js*/
define("wiki-lemma:widget/basicElement/addSub/addSub",function(e,i,a){function t(e){return c.trim(e).replace(/[^\x00-\xff]/g,"ci").length}function l(e){return Math.ceil(t(e)/2)}function n(e,i){var a="";window.location.href.indexOf("fr=createForeign")>-1&&(a='<input type="hidden" name="fr" value="createForeign" />'),this.dialog=new d({classNames:"add-sub-dialog",title:'添加义项描述<a href="https://baike.baidu.com/view/10811633.htm" target="_blank">义项命名规则</a>',content:'<div class="add-sub">                          <div class="content-inner">                              <div class="tip">您需要给原有的义项和新增加的义项都写一个“义项描述”，让读者能分清楚同名的两个事物。</div>                              <div class="example">                                  <div class="example-tit">示例</div>                                  <div class="example-show">                                      <ul>                                          <li class="show-li clearfix"><div class="tit">词条名</div><div class="content">苹果</div></li>                                          <li class="show-li clearfix"><div class="tit">原有义项描述</div><div class="content">蔷薇科苹果属植物</div></li>                                          <li class="show-li clearfix"><div class="tit">新增义项描述</div><div class="content">苹果产品公司</div></li>                                      </ul>                                  </div>                              </div>                              <form action="/editor/load/createload" method="get">                                  <div class="form-item name-lemma clearfix"><label for="">词条名</label><input type="text" value="'+e+'" readonly name="lemmaTitle">                                  <input type="hidden" name="createSub" value="1" >'+a+'</div>                                  <div class="form-item clearfix"><label for="">原有义项描述(不大于20字)</label><input type="text" value="" name="originalDesc"></div>                                  <div class="form-item clearfix"><label for="">新增义项描述(不大于20字)</label><input type="text" value="" name="desc"></div>                                  <div class="form-item form-notice"><strong>[注意]</strong>点击【确定】，您对原有义项描述的修改将会立即提交审核；                                  若原义项中已罗列多个义项内容，建议您不要直接添加义项，可以<a href="https://baike.baidu.com/planet/issue?issueId=3006988" target="_blank">报告未拆分多义词。</a></div>                                  <div class="add-sub-main-footer"><input type="submit" class="add-sub-main-button add-sub-main-accept" value="确定"><span class="add-sub-main-button add-sub-main-cancel">取消</span></div>                              </form>                          </div>                      </div>'}),this.show=function(){this.dialog.show()},this.close=function(){this.dialog.hide()},this.close();var t=this;c(document.body).on("click",".add-sub-close",function(){t.close()}),c(document.body).on("click",".add-sub-main-cancel",function(){t.close()}),c(document.body).on("click",".add-sub-main-accept",function(e){var a=c('.add-sub input[name="originalDesc"]'),t=c('.add-sub input[name="desc"]'),n=c(".add-sub .name-lemma input").val(),d=c.trim(a.val()),s=c.trim(t.val()),r=!0;if(d?s?l(d)>20||l(s)>20?(alert("义项名不能超过20字!"),r=!1):d===s?(alert("原有义项描述和新义项描述不能一致!"),r=!1):n===d?(alert("原义项描述不能等于词条名!"),r=!1):n===s&&(alert("新义项描述不能等于词条名!"),r=!1):(alert("未输入新义项描述!"),r=!1):(alert("未输入原义项描述!"),r=!1),!r)return e.preventDefault(),!1;d=d.replace(/\n\r\t/gi,""),s=s.replace(/\n\r\t/gi,""),a.attr("value",d),t.attr("value",s);const m={lemmaInfo:{lemmaId:lemmaId,lemmaDesc:d,lemmaTitle:n,versionId:i},isBaikeV6:!0};o(m)})}function o(e){var i={data:JSON.stringify(e),fromAction:"lemmaDesc"};c.ajax({url:"/editor/submit/versionsubmit",type:"POST",dataType:"json",data:i,success:function(){},error:function(){console.log("error")}})}var c=e("wiki-common:widget/lib/jquery/jquery"),d=e("wiki-common:widget/ui/dialog/dialog"),s=e("wiki-lemma:widget/tools/rightCheck/rightCheck"),r=e("wiki-lemma:widget/tools/rightCheck/checkUgc"),m=function(e){var i={lemmaTitle:"",originalDesc:"",desc:"",createSub:1,fr:""};return c.extend(i,e),i.lemmaTitle=encodeURIComponent(i.lemmaTitle),i.originalDesc=encodeURIComponent(i.originalDesc),i.desc=encodeURIComponent(i.desc),"/editor/load/createload?lemmaTitle="+i.lemmaTitle+"&originalDesc="+i.originalDesc+"&desc="+i.desc+"&createSub="+i.createSub+"&fr="+i.fr},u=function(e){var e=e,i=e.lemmaId||0,a=e.lemmaTitle||"",t=e.lemmaDesc||"",l=e.versionId||0,o=e.subLemmaId||0,t=e.lemmaDesc||"",d=new n(a,l,i);c(document.body).on("click",".add-sub-icon, .lemmaWgt-lemmaTitle .add-subLemma",function(){s.preeditCheck({lemmaId:i,lemmaTitle:a,lemmaDesc:t,versionId:l,action:"createsub"},function(e){return 0===+o?void(window.location.href=m(window.location.href.indexOf("fr=createForeign")>-1?{lemmaTitle:a,fr:"createForeign"}:{lemmaTitle:a})):void r(e,i,function(){t===a?d.show():window.location.href="/editor/load/createload?createSub=1&lemmaTitle="+a+"&originalDesc="+t})})})};a.exports=u});
;/*!wiki-lemma:widget/basicElement/collect/collect.js*/
define("wiki-lemma:widget/basicElement/collect/collect",function(e,o,t){var l=e("wiki-common:widget/lib/jquery/jquery"),c=e("wiki-common:widget/component/userLogin/userLogin"),n=e("wiki-lemma:widget/tools/service/service"),i=l(".top-collect"),s=l(".collect-text"),a=l(".collect-tip"),u=!1,d=null,m=function(){i.addClass("collected"),s.text("已收藏"),u=!0},r=function(){i.removeClass("collected"),s.text("收藏"),u=!1},g=function(){d&&clearTimeout(d),d=setTimeout(function(){a.hide()},300)},f=function(){u&&(d&&clearTimeout(d),a.show())};t.exports=function(e){i.on("click",function(o){var t=window.event||o,s=t.target||t.srcElement;(l(s).hasClass("collect-text")||l(s).hasClass("wiki-lemma-icons_star-solid"))&&c.checkIfLogin({onLogin:function(){i.hasClass("collected")?n.Collect.cancel(e):n.Collect.collect(e)},onUnlogin:function(){c.showLoginPop()}})}),i.on("mouseover",f).on("mouseout",g),c.regist({handleLogon:function(){n.Collect.getCollect(e)}}),n.Collect.regist({handleCollected:m,handleCanceled:r,handleGotten:function(e){!!e.isFavorite&&m()}})}});
;/*!wiki-lemma:widget/basicElement/commonModulePager/commonModulePager.js*/
define("wiki-lemma:widget/basicElement/commonModulePager/commonModulePager",function(e,i,a){var s=e("wiki-common:widget/lib/jquery/jquery"),l=function(e){var i=e,a=0,l=i.pageNumber,n=i.container,d=n.find(".cmp-prev"),t=n.find(".cmp-next"),c=n.find(".cmp-default"),o=n.find(".cmp-all"),f=this;this.prev=function(){this.skipTo(a-1)},this.next=function(){this.skipTo(a+1)},this.skipTo=function(e){if(!(e>l||0>=e)){a=e;var s=n.find(".cmp-index");s.removeClass("selected"),n.find("[data-index='"+e+"']").addClass("selected"),d.removeClass("disabled"),t.removeClass("disabled"),1==e&&d.addClass("disabled"),e==l&&t.addClass("disabled"),!!i.handlePageChange&&i.handlePageChange(e)}},this.displayDefault=function(){return c.hasClass("selected")?void this.skipTo(a):(n.find(".cmp-page").show(),o.removeClass("selected"),c.addClass("selected"),void(!!i.handleDisplayDefault&&i.handleDisplayDefault()))},this.displayAll=function(){o.hasClass("selected")||(n.find(".cmp-page").hide(),c.removeClass("selected"),o.addClass("selected"),!!i.handleDisplayAll&&i.handleDisplayAll())};var p=function(){a=1,d.on("click",function(){f.prev()}),t.on("click",function(){f.next()}),o.on("click",function(){f.displayAll()}),c.on("click",function(){f.displayDefault()}),n.find(".cmp-index").on("click",function(){var e=parseInt(s(this).attr("data-index"));f.skipTo(e)}),f.displayDefault()};p()};a.exports=l});
;/*!wiki-lemma:widget/basicElement/editorialStatement/editorialStatement.es.js*/
define("wiki-lemma:widget/basicElement/editorialStatement/editorialStatement.es",function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=e("wiki-common:widget/lib/jsmart/jsmart"),o=i(r),l=e("wiki-common:widget/lib/jquery/jquery"),s=new o["default"]('<div class="editorial-statement-of-enterprises">\n<em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_triangle editorial-statement-of-enterprises__icon"></em>{%$moduleTitle|f_escape_xml%}内容已通过{%if $brandLogo%}\n<img\n            class="editorial-statement-of-enterprises__logo  {%if $isVertical%} logo--vertical {%/if%}"\n            src="{%$brandLogo|f_escape_xml%}"\n        />\n{%/if%}\n<span class="editorial-statement-of-enterprises__compname">\n{%if $webUrl%}\n<a class="editorial-statement-of-enterprises__link" href="{%$webUrl|f_escape_xml%}" target="_blank">\n{%if $brandTitle%}\n{%$brandTitle|f_escape_xml%}\n{%/if%}\n</a>\n{%else%}\n{%if $brandTitle%}\n{%$brandTitle|f_escape_xml%}\n{%/if%}\n{%/if%}\n</span>\n官方认证</div>\n'),m=function(e){return l.getJSON("/common/api/getlemmaacl?lemmaId="+e+"&moduleKeyType=moduleIndex&type=1")};t.exports=function(e){var n=[].slice.call(l(".J-chapter")),t=n.map(function(e,t){return a({},e.dataset,{dom:e,lastDom:l(n[t+1]?n[t+1]:"#J-main-content-end-dom")})});m(e).then(function(e){var n=e.lemmaACL,i=e.enterpriseCert;n&&n.length&&n.map(function(e){var n=t.filter(function(n){return parseInt(n.index,10)===parseInt(e.moduleIndex,10)})[0];if(n){var r=!1;i.brandLogo&&(r=i.brandLogo.height>=i.brandLogo.width),l(s.fetch(a({},e,n,{isVertical:r,brandTitle:i.compname,brandLogo:i.brandLogo&&i.brandLogo.srcUrl,webUrl:i.webUrl}))).insertBefore(n.lastDom)}})})}});
;/*!wiki-lemma:widget/basicElement/modulePager/modulePager.js*/
define("wiki-lemma:widget/basicElement/modulePager/modulePager",function(a,e,n){var s=a("wiki-common:widget/lib/jquery/jquery");n.exports=function(a){var e={total:0,handleNext:null,handlePrev:null};s.extend(e,a);var n=['<div class="module-pager">','<span><em class="index">1</em>/',e.total,"</span>",'<a href="javascript:;" class="pTag prev disabled">','<em class="cmn-icon cmn-icons cmn-icons_arrow-l-2"></em></a>','<a href="javascript:;" class="pTag next">','<em class="cmn-icon cmn-icons cmn-icons_arrow-r-2"></em></a>',"</div>"].join("");1===e.total&&(n="");var t=s(n),i=1,d=t.find(".index"),l=t.find(".next"),r=t.find(".prev"),o=this,c=function(a){1>=a?r.addClass("disabled"):r.removeClass("disabled"),a>=e.total?l.addClass("disabled"):l.removeClass("disabled"),e.total<=1&&(l.addClass("disabled"),r.addClass("disabled"))},m=function(){t.on("click",function(a){var e=s(a.target);e.hasClass("cmn-icon")&&(e=e.parent()),e.hasClass("next")?o.next():e.hasClass("prev")&&o.prev()})};this.next=function(){var a=parseInt(t.find(".index").text(),10)||1;a>=e.total||(d.text(++a),c(a),!!e.handleNext&&e.handleNext(a))},this.prev=function(){var a=parseInt(t.find(".index").text(),10)||1;1>=a||(d.text(--a),c(a),!!e.handlePrev&&e.handlePrev(a))},this.appendTo=function(a){t.appendTo(a),m()},c(i)}});
;/*!wiki-lemma:widget/basicElement/personalIcon/personalIcon.js*/
define("wiki-lemma:widget/basicElement/personalIcon/personalIcon",function(e){function n(e){var n=i('<a href="'+e+'" target="_blank"></a>'),o=n.get(0),t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),o.dispatchEvent(t),n.remove()}var i=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/ui/dialog/dialog"),t=e("wiki-common:widget/component/userLogin/userLogin"),a=e("wiki-common:widget/component/nslog/nslog"),r=10090001,m={get:function(e){return i.ajax({url:"/api/personal/getuserlemma",type:"GET",dataType:"json",async:!1,data:e})}},l=i(".J-personalTip");i(".J-personal-icon").on("click",function(){a(r);var e=i(this).attr("data-href");o.confirm({title:"信息提示",subMsg:"只能词条本人实名验证，您确定该词条是您本人吗？",onConfirm:function(){m.get({}).then(function(i){var a=parseInt(i.errno,10);if(100001===a)return void t.showLoginPop();if(2013===a)return void o.alert({title:"信息提示",subMsg:"由于您本人的实名验证内容累计两次被用户举报虚假，验证已永久取消，账号被封禁不可再验证。"});if(2004===a)return void o.alert({title:"信息提示",subMsg:"很抱歉，该词条有其他用户的版本正在提交，您暂时无法提交。"});if(2015===a&&o.confirm({title:"信息提示",subMsg:"您当前存在未完成的实名验证申请，请您继续完成申请。",onConfirm:function(){n("/personal/modify?id="+i.personalId)}}),0===a){if(!i.data.lemmaId)return void n(e);e="/wikisubmit/personallemmaeditload?lemmaId="+i.data.lemmaId+"&lemmaTitle="+i.data.lemmaTitle,o.confirm({title:"信息提示",subMsg:"你已经完成实名认证，可以对本人实名词条进行编辑。",onConfirm:function(){n(e)}})}},function(){})}})}).mousemove(function(){l.fadeIn()}).mouseleave(function(){l.hide()}),l.mousemove(function(){l.show()}).mouseleave(function(){l.hide()})});
;/*!wiki-lemma:widget/basicElement/pinyin/fmp.js*/
define("wiki-lemma:widget/basicElement/pinyin/fmp",function(t,e,a){var i=!1;try{i=external.max_version}catch(n){}Utils={g:function(t){return document.getElementById(t)},f:function(t){this.g(t.cid).innerHTML=this.fm(this.b.isIE?'<object id="#{id}" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="#{width}" height="#{height}" align="#{align}"><param name="movie" value="#{movie}" /><param name="allowScriptAccess" value="#{allowScriptAccess}" /><param name="allowNetworking" value="#{allowNetworking}" /><param name="flashVars" value="#{flashVars}" /><param name="wmode" value="#{wmode}" /><param name="scale" value="#{scale}" /><param name="salign" value="#{salign}" /></object>':'<embed id="#{id}" src="#{movie}" allowScriptAccess="#{allowScriptAccess}" allowNetworking="#{allowNetworking}" flashVars="#{flashVars}" width="#{width}" height="#{height}" align="#{align}" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" wmode="#{wmode}" scale="#{scale}" salign="#{salign}" />',t)},fm:function(t,e){if(arguments.length)if("object"==typeof e)t=t.replace(/#\{([^\{\}]+)\}/g,function(t,a){var i=e[a];return"function"==typeof i&&(i=i(a)),"undefined"==typeof i?"":i});else if("undefined"!=typeof e)for(var a=arguments.length-2;a>-1;a--)t=t.replace(new RegExp("#\\{"+a+"\\}","g"),arguments[a+1]);return t},b:{isIE:/msie/i.test(navigator.userAgent),isFF:/firefox/i.test(navigator.userAgent),isMaxthon:i},mo:function(){for(var t={},e=arguments.length,a=0;e>a;a++){var i=arguments[a];for(var n in i)null==t[n]&&(t[n]=arguments[a][n])}return t}},FMP={g:Utils.g,f:Utils.f,b:Utils.b,fm:Utils.fm,_flash:null,loaded:!1,cfg:{cid:"fmp_flash_div",id:"fmp_flash",width:100,height:100,align:"middle",movie:"flash/fmp.swf?v=090105a",allowScriptAccess:"always",allowNetworking:"all",salign:"lt",wmode:"window",scale:"noscale",flashVars:"_instanceName=FMP"},load:function(){this.b.isMaxthon&&(this.cfg.movie+="&r="+Math.random()),this.f(this.cfg)},getUrl:function(){this._flash._getVar("url")},setUrl:function(t){this._flash._setVar("url",t)},getVolume:function(){return 100*this._flash._getVar("volume")},setVolume:function(t){this._flash._setVar("volume",t/100)},getMute:function(){this._flash._getVar("mute")},setMute:function(t){this._flash._setVar("mute",t)},getCurrentPosition:function(){return this._flash._getVar("currentPosition")/1e3},setCurrentPosition:function(t){this._flash._setVar("currentPosition",1e3*t)},getDuration:function(){return this._flash._getVar("duration")/1e3},getDownloadProgress:function(){return 100*this._flash._getVar("downloadProgress")},play:function(){this._flash._play()},pause:function(){this._flash._pause()},stop:function(){this._flash._stop()},_onLoad:function(){this.loaded=!0,this._flash=this.g(this.cfg.id),this.onLoad&&this.onLoad()},_onPlayStateChange:function(t){this.onPlayStateChange&&this.onPlayStateChange(t)}},a.exports=FMP});
;/*!wiki-lemma:widget/basicElement/pinyin/lemmaPinyin.js*/
define("wiki-lemma:widget/basicElement/pinyin/lemmaPinyin",function(e,n,i){var t=e("wiki-common:widget/lib/jquery/jquery"),a={};a.play=function(e){var n=e.lemmaTitle,i=e.pinyin,t=i.replace(/,|，/g," , ").replace(/\s+/g," ").split(" "),a=-1,c=n.replace(/[^(\u4E00-\u9FFF)(\u3400-\u4DBF)]/g,""),p=c.replace(/\S/g,function(e){return a++,e+"("+t[a]+")"}),l="https://tts.baidu.com/text2audio?tex="+encodeURIComponent(p)+"&cuid=baike&lan=ZH&ctp=1&pdt=31&vol=9&spd=4&per=4100",o=document.getElementById("audio");o.src=l,o.oncanplay=function(){o.play()}};var c=function(e){t("#j-pinyin-speak").on("click",function(){a.play(e)})};i.exports=c});
;/*!wiki-lemma:widget/basicElement/slidePager/slidePager.js*/
define("wiki-lemma:widget/basicElement/slidePager/slidePager",function(e,i,a){var s=e("wiki-common:widget/lib/jquery/jquery"),d=function(e){var i=e,a=['<div class="slide-pager">','<a class="slidePager-prev disabled"></a>','<ul class="slidePager-list">',"</ul>",'<a class="slidePager-next"></a>',"</div>"].join(""),d=s(a),l=0,n=d.find(".slidePager-list"),t=this,r=function(e){return s('<li class="slidePager-item" data-index="'+e+'">●</li>')};this.prev=function(){this.skipTo(l-1)},this.next=function(){this.skipTo(l+1)},this.skipTo=function(e){if(!(0>e||e>=i.total)){l=e,d.find("li").removeClass("selected"),d.find("[data-index='"+e+"']").addClass("selected"),!!i.handlePageChange&&i.handlePageChange(e);var a=d.find(".slidePager-prev"),s=d.find(".slidePager-next");a.removeClass("disabled"),s.removeClass("disabled"),0==l?a.addClass("disabled"):l+1==i.total&&s.addClass("disabled")}};var o=function(){l=0,d.on("click",".slidePager-prev",function(){t.prev()}),d.on("click",".slidePager-next",function(){t.next()}),d.on("click",".slidePager-list li",function(){var e=parseInt(s(this).attr("data-index"));t.skipTo(e)});for(var e=0;e<i.total;e++){var a=r(e);a.appendTo(n),0==e&&a.addClass("selected")}};this.appendTo=function(e){d.appendTo(e)},o()};a.exports=d});
;/*!wiki-lemma:widget/basicElement/topShare/topShare.js*/
define("wiki-lemma:widget/basicElement/topShare/topShare",function(e,t,n){e("wiki-common:widget/component/nslog/nslog");$(".top-share").mouseenter(function(){$("#top-share").show()}).mouseleave(function(){setTimeout(function(){$("#top-share").hide()},300)}),$("#top-share").mouseenter(function(){$(this).show()}).mouseleave(function(){$(this).hide()});var o=function(e){var t=e.newLemmaId,n=null,o=function(){$.getJSON("/api/wikiui/sharecounter?lemmaId="+t+"&method=get",function(e){n=e.tk,$("#j-topShareCount").text(e.shareCount),$(".vote-count").text(e.likeCount)})};o();var i=function(){$(".share-link").on("click",function(){$.ajax({type:"get",url:"/api/wikiui/sharecounter?lemmaId="+t+"&method=add&type=share&tk="+n,dataType:"json",success:function(e){$("#j-topShareCount").text(e.count)}})})};i();var a=function(){var e=!0;$(".bds_wechat").on("click",function(){e&&$.ajax({type:"get",url:"/api/wikiui/sharecounter?lemmaId="+t+"&method=add&type=share&tk="+n,dataType:"json",success:function(t){$("#j-topShareCount").text(t.count),e=!1}})}),$(".qrcode-wrapper .cmn-icons_close").on("click",function(){e=!0})};a()};n.exports=o});
;/*!wiki-lemma:widget/lemma_content/commonModule/album/album.js*/
define("wiki-lemma:widget/lemma_content/commonModule/album/album",function(i,e,t){var a=i("wiki-common:widget/lib/jquery/jquery"),l=function(i){var e=i.isPreview?" J-preview-album ":" ",t=i.isPreview?"":'target="_blank" ',l=['<a class="lemma-album '+e+' "  data-album-id="'+i.albumId+'" title="'+(i.title||"")+'"  href="'+i.linkUrl+'" '+t+' style="width:'+(i.width+2)+'px;">','<div class="album-wrap" style="width:'+i.width+"px;height:"+i.height+'px;">','<img class="picture" alt="'+i.description+'" src="'+i.coverUrl+'" style="width:'+i.coverWidth+"px;height:"+i.coverHeight+'px;"/>',"</div>",'<div class="description">',i.description,'<span class="number">('+i.total+")</span>","</div>",'<div class="albumBg">',"</div>","</a>"].join("");return a(l)};t.exports={render:l}});
;/*!wiki-lemma:widget/lemma_content/mainContent/albumList/albumList.js*/
define("wiki-lemma:widget/lemma_content/mainContent/albumList/albumList",function(e,t,i){var a=e("wiki-common:widget/lib/jquery/jquery"),n=e("wiki-lemma:widget/basicElement/modulePager/modulePager"),r=e("wiki-lemma:widget/lemma_content/commonModule/album/album"),l=function(e){return String(e).replace(/[^\x00-\xff]/g,"ci").length},o=function(e,t,i){var e=String(e),i=i||"";return 0>t||l(e)<=t?e+i:(e=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1"),e+i)},d=function(e,t){var i=l(e);return i>t?o(e,t-4)+"...":e},c=function(e){var t={};a.extend(t,e);var i=a(".album-list .list"),l=a(".album-list .scroller"),o=1,c=790,u=null,m=0,f=0,h=0,v=15,s=2,g=[],w=function(){var e=0;for(var i in t.data)t.data[i].albumId=i,t.data[i].index=e,e++,g.push(t.data[i])},p=function(e){var i="preview"===t.pagetype,a=i?"javascript:void(0);":"/pic/"+encodeURIComponent(t.lemmaTitle)+"/"+t.newLemmaId+"/"+e.albumId+"/"+e.coverpic+"?fr=lemma",n={linkUrl:a,description:d(e.desc,18),coverUrl:e.coverurl,total:e.total,coverWidth:e.coverWidth,coverHeight:e.coverHeight,width:e.width,height:155,albumId:e.albumId,isPreview:i},l=r.render(n);return l},x=function(e){u=new n({total:e,handleNext:function(){e>o&&o++,I(o)},handlePrev:function(){o>1&&o--,I(o)}}),u.appendTo(a(".album-list .footer"))},b=function(e){var t=new Image;t.onload=function(){e.height=155,e.width=t.width*e.height/t.height,e.coverWidth=e.width,e.coverHeight=e.height;var a=m;m=a+e.width+v+s;var n=p(e);n.attr("nslog-type","1204"),i.width(m),i.append(n),f+=e.width+v+s,0===+e.index?n.attr("data-index",0):f-v>c&&(h+=1,f=e.width+v+s,n.attr("data-index",h)),e.index+1<g.length?b(g[e.index+1]):(n.addClass("last"),x(h+1))},t.src=e.coverurl};this.load=function(){b(g[0])};var I=function(e){var t=i.find('[data-index="'+(e-1)+'"]'),a=t.offset().left-i.offset().left;l.animate({scrollLeft:a},500)};w()};i.exports=c});
;/*!wiki-lemma:widget/lemma_content/mainContent/basicInfo/basicInfo.js*/
define("wiki-lemma:widget/lemma_content/mainContent/basicInfo/basicInfo",function(i,t,a){var e=i("wiki-common:widget/lib/jquery/jquery");a.exports=function(){e(".basic-info").on("click",".basicInfo-block .toggle",function(i){var t=e(i.target);if(t=t.hasClass("toggle")?t:t.parents(".toggle").length>0?t.parents(".toExpand"):null)if(t.hasClass("toExpand")){var a=t.parents(".basicInfo-item"),n=a.find(".basicInfo-overlap");n.data("height")||n.data("height",n.height()-1),n.css({visibility:"visible",height:a.height()}),n.animate({height:n.data("height")},300)}else if(t.hasClass("toCollapse")){var n=t.parents(".basicInfo-overlap"),a=n.parent();n.animate({height:a.height()},300,function(){n.css("visibility","hidden")})}})}});
;/*!wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReference.js*/
define("wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReference",function(e,n,a){var o=e("wiki-common:widget/lib/jquery/jquery"),t=e("wiki-common:widget/component/nslog/nslog"),i=function(e){var n=e,a=o(".lemma-reference"),i=(a.find(".reference-list-wrap"),a.find(".reference-list")),s=a.find(".toggle"),c=this;this.toggle=function(){a.hasClass("expand")?this.collapse():this.expand()},this.collapse=function(){a.removeClass("expand").addClass("collapse")},this.expand=function(){a.addClass("expand").removeClass("collapse")},this.focusItem=function(e){i.find("li").removeClass("focus");for(var a=0;a<e.length;a++){var t=o("[id='reference-["+e[a]+"]-"+n.subLemmaId+"-wrap']");t.addClass("focus"),e[a]>10&&c.expand()}var s="reference-["+e[0]+"]-"+n.subLemmaId+"-wrap";window.location.hash="",window.location.hash=s,o(document).scrollTop(o(document).scrollTop()-100)};var r=function(e){var n=e.text().replace("[","").replace("]","");n=n.split("-");for(var a=parseInt(n[0]),o=parseInt(n[n.length-1]),t=[],i=a;o>=i;i++)t.push(i);return t},l=function(){s.on("click",function(){c.toggle()}),o(document.body).on("click","sup",function(e){var n=o(e.target),a=n.text();if(a.indexOf("[")>-1&&a.lastIndexOf("]")>-1){var i=r(n);c.focusItem(i),t(1970)}}),o(document).ready(function(){var e=window.location.hash,n=/#reference-\[(\d+)\]-\d+-wrap/i,a=e.match(n),o=a&&a.length>=2?parseInt(a[1]):-1;o>0&&c.focusItem([o])})};l()};a.exports=i});
;/*!wiki-lemma:widget/lemma_content/mainContent/lemmaSciencePaper/lemmaSciencePaper.js*/
define("wiki-lemma:widget/lemma_content/mainContent/lemmaSciencePaper/lemmaSciencePaper",function(e,n,a){var t=e("wiki-common:widget/lib/jquery/jquery"),s=e("wiki-common:widget/lib/jsmart/jsmart"),i=e("wiki-common:widget/component/nslog/nslog");a.exports=function(e){t.get("/api/wikiui/getxueshupapers",{lemmaId:e.lemmaId},function(e){if(0===e.errno&&e.data.list){i({type:"80200000",count:e.data.list.length});var n=new s('<dl class="lemma-paper collapse">\n<dt class="paper-title">\n<span class="sciencePaper-title">学术论文</span>\n<div class="sciencePaper-from">\n内容来自<a class="sciencePaper-link" href="{%$data.home|f_escape_xml%}" nslog-type="80200001" target="_blank">\n<img src="https://bkssl.bdimg.com/static/wiki-lemma/widget/lemma_content/mainContent/lemmaSciencePaper/img/science_logo_f1bd60c.png" class="sciencePaper-logo" />\n</a>\n</div>\n</dt><dd class="sciencePaper-list-wrap">\n<ul class="sciencePaper-list">\n{%foreach $data.list as $item%}\n{%if $item@index < 5%}\n<li class="sciencePaper-item" nslog-type="80200002">\n<a href="{%$item.url|escape:path|f_escape_xml%}" target="_blank" class="text-link">\n{%if $item.authors%}\n<span class="interrupt authors">{%$item.authors|f_escape_xml%}.</span>\n<span class="interrupt punctuation">&nbsp;&nbsp;</span>\n{%/if%}\n<span class="interrupt title">{%$item.title|f_escape_xml%}．</span>\n</a>\n{%if $item.publishedAt%}\n<span class="interrupt punctuation">《</span>\n<span class="interrupt publishedAt">{%$item.publishedAt|f_escape_xml%}</span>\n<span class="interrupt punctuation">》</span>\n{%/if%}\n{%if $item.publishedAt and $item.time%}\n<span class="interrupt punctuation">，</span>\n{%/if%}\n{%if $item.time%}<span class="interrupt time">{%$item.time|f_escape_xml%}</span>\n{%/if%}\n</li>\n{%/if%}\n{%/foreach%}\n</ul>\n</dd>\n<dd class="toggle">\n<a href="{%$data.result_url|escape:path|f_escape_xml%}" nslog-type="80200003" target="_blank" class="text">\n<span>查看全部</span>\n<img src="https://bkssl.bdimg.com/static/wiki-lemma/widget/lemma_content/mainContent/lemmaSciencePaper/img/toggle_185d48f.svg" class="toggle-arrow" alt="" />\n</a>\n</dd>\n</dl>'),a=n.fetch({data:e.data});t(".lemma-paper-box").html(a)}})}});
;/*!wiki-lemma:widget/lemma_content/mainContent/lemmaStatistics/lemmaStatistics.js*/
define("wiki-lemma:widget/lemma_content/mainContent/lemmaStatistics/lemmaStatistics",function(e,t,a){function i(e){if(!e)return"";var t=e.match(/(\d{2,4})-(\d{1,2})-(\d{1,2})/);t[2]=parseInt(t[2],10)-1;var a=new Date(t[1],t[2],t[3]),i=new Date,n=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1),r=parseInt((a-n)/864e5);switch(r){case 1:return"（今天）";case 0:return"（昨天）";case-1:return"（2天前）";case-2:return"（3天前）"}return e}var n=e("wiki-common:widget/lib/jquery/jquery"),r=e("wiki-common:widget/component/userCard/userCard");a.exports=function(e){var t="/api/lemmapv?id="+e.newLemmaIdEnc+"&r="+Math.random();n.getJSON(t,function(e){e&&"undefined"!=typeof e.pv&&null!=e.pv?n("#j-lemmaStatistics-pv").text(e.pv):n("#j-lemmaStatistics-pv").parent().hide()});var a=n(".j-modified-time").text();n(".j-modified-time").text(i(a)).show(),r({host:".lemma-statistics .show-userCard"})}});
;/*!wiki-lemma:widget/lemma_content/mainContent/polysemantList/polysemantList.js*/
define("wiki-lemma:widget/lemma_content/mainContent/polysemantList/polysemantList",function(o,t,e){var n=o("wiki-common:widget/lib/jquery/jquery"),l=o("wiki-common:widget/component/nslog/nslog"),i=o("wiki-lemma:widget/tools/rightCheck/rightCheck"),s=o("wiki-lemma:widget/tools/rightCheck/checkUgc"),a={polysemantShowAllView:"10080201",polysemantShowAllClick:"10080202",polysemantShowView:"10080203",polysemantShowClick:"10080204",polysemantHideClick:"10080205",polysemantAddClick:"10080206"};e.exports=function(o){var t=n(".polysemant-list"),e=t.find(".toggle"),c=t.find(".fold-on"),d=t.find(".J-polysemant-button--add"),m=t.find(".polysemantList-wrapper");e[0]&&l(a.polysemantShowView),c[0]&&l(a.polysemantShowAllView),t.on("click",".toggle",function(o){var i=n(o.target),s=i.hasClass("J-polysemant-button__icon")?1:0,c=i.hasClass("J-polysemant-button__text")?1:0;e.hasClass("expand")?(e.removeClass("expand").addClass("collapse"),m.show(),l({type:a.polysemantShowClick,clickOnIcon:s,clickOnText:c})):(e.removeClass("collapse").addClass("expand"),m.hide(),l({type:a.polysemantHideClick,clickOnIcon:s,clickOnText:c})),n(".positioned-page-background.has-polysemant-list").css("top",t.height()+"px")}).on("click",".fold-on",function(){m.css("height","auto"),m.find(".fold-on").hide().siblings(".fold-off").show(),l(a.polysemantShowAllClick)}).on("click",".fold-off",function(){m.css("height",96),m.find(".fold-off").hide().siblings(".fold-on").show()}),d.on("click",function(t){var e=n(t.target);l({type:a.polysemantAddClick,clickOnIcon:e.hasClass("J-polysemant-button__icon")?1:0,clickOnText:e.hasClass("J-polysemant-button__text")?1:0});var c=n(this).attr("data-href");i.preeditCheck({lemmaTitle:o,action:"createsub"},function(o){s(o,"",c)})})}});
;/*!wiki-lemma:widget/lemma_content/mainContent/sideCatalog/sideCatalog.js*/
define("wiki-lemma:widget/lemma_content/mainContent/sideCatalog/sideCatalog",function(o,t,i){var s=o("wiki-common:widget/lib/jquery/jquery"),e=o("wiki-common:widget/component/nslog/nslog"),a=o("wiki-lemma:widget/tools/throttle/throttle.es"),l=function(o){var t=s(".side-catalog"),i=s(".side-catalog .go-up"),l=s(".side-catalog .go-down"),n=s(".side-catalog .arrow"),c=s(".side-catalog .catalog-scroller"),r=c.find(".catalog-list"),d=s(".content-wrapper"),f=s(".right-wrap"),p=s("#side_box_unionAd"),h=s(window),u=this,g=!0,m=!1,w=function(){var o=c.scrollTop(),t=c.find(".catalog-list").height(),s=c.height();0>=o?i.addClass("disable"):i.removeClass("disable"),o>=t-s?l.addClass("disable"):l.removeClass("disable")};this.param=o,this.scrollUp=function(o){var t=19*o,i=c.scrollTop();c.stop().animate({scrollTop:i-t},200,function(){w(),l.removeClass("disable")})},this.scrollDown=function(o){var t=19*o,s=c.scrollTop();c.stop().animate({scrollTop:s+t},200,function(){i.removeClass("disable"),w()})},this.toDisplay=function(){var o=s(".side-content"),i=1200,a=o.offset().top+o.height(),l=p.height()>30,n=s("#J-side-box-yitiao").height()>60;(l||n)&&(a-=76);var c=Math.max(a,i),r=h.scrollTop();r>=c&&u.param.catalog.length>0?(t.css("visibility","visible"),g&&(g=!1,e(10002801))):(t.css("visibility","hidden"),g=!0);var f=d.offset().top+d.height(),m=h.height(),w=m+r;if(w>f){var v=w-f+10;t.css({bottom:v+"px",top:"auto"})}else t.css({bottom:"10px",top:"auto"})},this.scrollTo=function(o){var i=t.find('[href="#'+o+'"]');if(!(i.length<=0)){i=i.parents(".catalog-title");var s=0===i.index(),e=i.offset().top-r.offset().top+5;(i.offset().top!==r.offset().top||s)&&(c.stop().animate({scrollTop:e-97},300,function(){w()}),n.stop().animate({top:e},300))}};var v=function(){for(var o=s(document.body).find(".lemma-anchor.para-title"),t=s(window).scrollTop(),i=999999,e=o.eq(0),a=0;a<o.length;a++){var l=o.eq(a),n=l.offset().top,c=Math.abs(n-t),r=n<t+s(window).height();i>c&&r&&(i=c,e=l)}return e.attr("name")},b=null,C=function(){b&&(clearTimeout(b),b=null),b=setTimeout(function(){var o=v();u.scrollTo(o)},50),u.toDisplay()},T=function(){var o=s(".side-content");u.param.isMemorial&&(t.css("left",o.offset().left),s(".body-wrapper").after(t),s(window).on("resize",a(function(){t.css("left",o.offset().left)},16)));var i=c.find(".catalog-list").height(),e=c.height();0>=i-e&&(f.hide(),m=!0),t.on("click",".toggle-button",function(){t.hasClass("collapse")?(t.removeClass("collapse"),t.hasClass("side-catalog-smaller")&&f.show()):(t.addClass("collapse"),t.hasClass("side-catalog-smaller")&&f.hide())}),!m&&t.hover(function(){!t.hasClass("collapse")&&f.show()},function(){!t.hasClass("collapse")&&f.hide()}),c.bind("mouseover",function(){c.bind("mousewheel",function(o,t){var i=-t;return 0>i?u.scrollUp(7):u.scrollDown(7),o.stopPropagation(),!1})}).bind("mouseout",function(){c.unbind("mousewheel")}),s(window).bind("scroll.catalog",a(C,5)),s(document).bind("ready",function(){C(),u.toDisplay()}),t.on("click",".go-up",function(){u.scrollUp(5)}),t.on("click",".go-down",function(){u.scrollDown(5)}),t.on("click",".gotop-button",function(){s(window).scrollTop(0)})};setTimeout(function(){T()},2500)};i.exports=l});
;/*!wiki-lemma:widget/lemma_content/mainContent/tashuo/tashuo.js*/
define("wiki-lemma:widget/lemma_content/mainContent/tashuo/tashuo",function(t,a,e){"use strict";function i(){r("#tashuo_bottom .cover-img").each(function(){this.complete?o(this):this.onload=function(){o(this)}})}function o(t){var a={width:parseInt(r(t).attr("data-width"),10)||t.naturalWidth,height:parseInt(r(t).attr("data-height"),10)||t.naturalHeight};t.style=s({width:216,height:120},a)}function s(t,a){var e=t.width,i=t.height,o=a.width/a.height,s=[];return o>=e/i?(s.push("height: 100%"),s.push("margin-left: -"+(o*i-e)/2+"px")):(s.push("width: 100%"),s.push("margin-top: -"+(e/o-i)/2+"px")),s.join(";")}function l(){var t=r(".slider-item .tashuo-list .tashuo-item .abstract a"),a=r(".slider-item .tashuo-list .tashuo-item a[class=cover]"),e=Array.from(t).concat(Array.from(a)),i=r("#J-vars");e.forEach(function(t){r(t).on("click",function(){var a=t.href,e={page:"lemma",element:"tashuo_article",tashuoParam:"lemma-bottom",lemmaId:i.attr("data-lemmaid"),lemmaTitle:i.attr("data-lemmatitle"),articleId:u.getQuery("id",a),itemType:"article"};c.logActClick(e)})})}function n(){var t=r(".tashuo-bottom-title-essence");t.on("click",function(){var t=r("#J-vars"),a={page:"lemma",element:"tashuo-article-list",tashuolistParam:"lemma-bottom",lemmaId:t.attr("data-lemmaid"),lemmaTitle:t.attr("data-lemmatitle")};c.logActClick(a)})}var r=t("wiki-common:widget/lib/jquery/jquery"),m=t("wiki-common:widget/component/nslog/nslog"),h=t("wiki-common:widget/component/superLogger/superLogger.es"),c=t("wiki-lemma:widget/tools/clickstream/clickstream"),u=t("wiki-common:widget/util/url"),d=function(t){m(10090003),i(),r(".tashuo-tags span").on("click",function(){var t=r(this).index(),a=r(".tashuo-multiple .module-pager");r(this).addClass("current-tab").siblings().removeClass("current-tab"),r(".tashuo-multiple").find(".tashuo-wrapper").eq(t).show().siblings().hide(),r(".tashuo-view").scrollLeft(0),a.find(".index").text(1),a.find(".next").removeClass("disabled"),a.find(".prev").addClass("disabled")}),r("#tashuo_bottom").on("click",".J-like",function(){var t="tashuo-liked",a=r(this).find(".J-number"),e=r(this).attr("data-isvote"),i=a.text();r.ajax({url:"/api/tashuo/vote",dataType:"json",data:{id:r(this).closest(".J-item").attr("data-tashuoId")}}),"1"===e?(r(this).attr("data-isvote","0"),r(this).removeClass(t),i--,a.text(i)):(r(this).attr("data-isvote","1"),i++,r(this).addClass(t),a.text(i))}),r("#tashuo_bottom .J-item").on("click",function(a){m(10090004);var e=r(a.target);e.closest(".tashuo-author",r(this)).length||e.closest(".J-like",r(this)).length||h.sendClk("lemma_page_bottom_tashuo_click",t)}),l(),n()};e.exports=d});
;/*!wiki-lemma:widget/lemma_content/mainContent/taskLemmasInfoCard/taskLemmasInfoCard.js*/
define("wiki-lemma:widget/lemma_content/mainContent/taskLemmasInfoCard/taskLemmasInfoCard",function(e){var t=e("wiki-common:widget/lib/jquery/jquery"),a=e("wiki-common:widget/lib/jsmart/jsmart");a.prototype.registerPlugin("modifier","rawurlencode",function(e){return encodeURIComponent(e)}),a.prototype.registerPlugin("modifier","date_format",function(e,t){var a=timeFormater.build(1e3*parseInt(e,10));return timeFormater.format(a,t)}),a.prototype.registerPlugin("modifier","date_diff",function(e,t,a,i){var n=timeFormater.build(1e3*parseInt(e,10));return timeFormater.diff(n,t,!!a,!!i)});var i=new a('{%if !$errno%}\n{%foreach $list as $i => $item%}{%if $item.status >= 1 && $item.status <=5%}\n<tr>\n<td><a href="{%$item.lemmaUrl|f_escape_xml%}" target="_blank">{%$item.lemmaTitle|f_escape_xml%}</a></td>\n<td>{%if $item.createTime%}{%$item.createTime|date_format: "yyy-MM-dd HH:mm:ss"%}{%else%}-{%/if%}</td>\n<td>{%if $item.createUname%}<a href="/usercenter/userpage?uname={%$item.createUname|rawurlencode|f_escape_path%}&from=lemma" target="_blank">{%$item.createUname|f_escape_xml%}</a>{%else%}-{%/if%}</td>\n<td>\n{%if $item.status == 1%}\n待编辑{%elseif $item.status == 2%}\n待提交{%elseif $item.status == 3 || $item.status == 4%}\n待审核{%elseif $item.status == 5%}\n已达标{%/if%}\n</td>\n<td><a href="/usertask/{%$item.taskId|f_escape_path%}" target="_blank">{%$item.taskName|f_escape_xml%}</a></td>\n</tr>\n{%/if%}\n{%/foreach%}\n{%if $list|count < 1%}\n<tr>\n<td colspan="5">无</td>\n</tr>{%/if%}\n{%else%}\n<tr>\n<td colspan="5">出错了，请<a href="">刷新</a>重试</td>\n</tr>{%/if%}');t.ajax({type:"GET",url:"/api/usertask/getlemmatasklist",data:{lemmaTitle:window.baikeInfo.versionInfo.lemmaTitle,lemmaId:window.baikeInfo.versionInfo.lemmaId,tk:t('meta[name="csrf-token"]').attr("content")},cache:!1,success:function(e){t(".checkLemmaDialog-table tbody").html(e.errno?i.fetch({errno:1}):i.fetch({list:e.data}))}})});
;/*!wiki-lemma:widget/lemma_content/commonModule/album/marquee.es.js*/
define("wiki-lemma:widget/lemma_content/commonModule/album/marquee.es",function(t,e,i){"use strict";function n(){for(var t=0,e=0,i=arguments.length;i>e;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;i>e;e++)for(var s=arguments[e],h=0,o=s.length;o>h;h++,r++)n[r]=s[h];return n}function r(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];h.inArray(n,e)<0&&e.push(n)}return e}function s(t,e){this.swiperUl=e,this.containerWidth=parseInt(t.clientWidth,10),this.currentIndex=0,this.pageCount=1,this._computedUnits()}var h=t("wiki-common:widget/lib/jquery/jquery");s.prototype._computedUnits=function(){for(var t=Array.prototype.concat.apply([],this.swiperUl.children),e={units:[],currPageWidth:0,beforeWidth:0},i=0;i<t.length;i++){var s=t[i],h=parseInt(s.clientWidth,10),o=e.currPageWidth+h;o>=this.containerWidth?(e.units.push(e.beforeWidth),e.currPageWidth=h):e.currPageWidth=o,e.beforeWidth=e.beforeWidth+h}e.units.push(e.beforeWidth);for(var u=[],i=0;i<e.units.length;i++){var a=e.units[i],c=e.units[i-1]?e.units[i-1]:0;if(a-c>this.containerWidth)for(;a-c>this.containerWidth;)c+=this.containerWidth,u.push(c);i!==e.units.length-1&&u.push(a)}this.units=r(n([0],u)),this.pageCount=this.units.length},s.prototype._getLeft=function(t){return-this.units[t]},s.prototype.toLeft=function(){return this._computedUnits(),0===this.currentIndex?!1:(this.currentIndex=this.currentIndex-1,void this.animateTo(this.currentIndex))},s.prototype.toRight=function(){return this._computedUnits(),this.currentIndex===this.pageCount-1?!1:(this.currentIndex=this.currentIndex+1,void this.animateTo(this.currentIndex))},s.prototype.animateTo=function(t){h(this.swiperUl).animate({left:this._getLeft(t)},200)},i.exports=s});
;/*!wiki-lemma:widget/lemma_content/commonModule/album/albumMarquee.es.js*/
define("wiki-lemma:widget/lemma_content/commonModule/album/albumMarquee.es",function(e,n,o){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function i(e){function n(e,n){l.removeClass("disable-scroll"),l.removeClass("disable-scroll-left"),l.removeClass("disable-scroll-right"),1===n&&l.addClass("disable-scroll"),0===e&&l.addClass("disable-scroll-left"),e===n-1&&l.addClass("disable-scroll-right")}function o(){a=new r["default"](l[0],u[0])}var l=c("#"+e),i=c(l.find(".J-scrollleft")[0]),t=c(l.find(".J-scrollright")[0]),u=l.find(".J-marquee-canvas"),a=null,d=function f(){if(!a){var e=u[0],n=s();c(e).offset().top<n&&o(),a&&c(window).off("scroll resize",f)}};c(document).ready(function(){d(),c(window).on("scroll resize",d)}),l.on("mouseenter click",function(){a&&(a._computedUnits(),n(a.currentIndex,a.pageCount))}),i.on("click",function(){a&&(a.toLeft(),n(a.currentIndex,a.pageCount))}),t.on("click",function(){a&&(a.toRight(),n(a.currentIndex,a.pageCount))})}var t=e("wiki-lemma:widget/lemma_content/commonModule/album/marquee.es"),r=l(t),c=e("wiki-common:widget/lib/jquery/jquery"),s=function(){return c(window).scrollTop()+c(window).height()};o.exports={initCenterBlockMarquee:i}});
;/*!wiki-lemma:widget/lemma_content/commonModule/cellModule/cellModule.js*/
define("wiki-lemma:widget/lemma_content/commonModule/cellModule/cellModule",function(e,n,a){var d=e("wiki-common:widget/lib/jquery/jquery"),i=e("wiki-lemma:widget/basicElement/commonModulePager/commonModulePager"),o=function(e){var n=e,a=d(n.container),o=null,t=0,l=function(){n.pageNumber<1||(o=new i({container:a.find(".commonModule-pager"),pageNumber:n.pageNumber,handlePageChange:function(e){t=e,a.find("tr[data-pageIndex]").hide(),a.find("tr[data-pageIndex='"+t+"']").show()},handleDisplayDefault:function(){a.find("tr[data-pageIndex]").hide(),a.find("tr[data-pageIndex='"+t+"']").show()},handleDisplayAll:function(){a.find("tr[data-pageIndex]").show()}}))};l()};a.exports=o});
;/*!wiki-lemma:widget/lemma_content/commonModule/horizontalModule/horizontalModule.js*/
define("wiki-lemma:widget/lemma_content/commonModule/horizontalModule/horizontalModule",function(e,o,a){var l=e("wiki-common:widget/lib/jquery/jquery");a.exports=function(e){var o=l(e.container);o.on("click",".toggle-button",function(){var e=l(this),a=e.attr("data-id");e.hasClass("collapsed")?(e.removeClass("collapsed").addClass("expaned"),o.find(".j-submodule-"+a).show()):(e.removeClass("expaned").addClass("collapsed"),o.find(".j-submodule-"+a).hide())})}});
;/*!wiki-lemma:widget/lemma_content/commonModule/map/map.js*/
define("wiki-lemma:widget/lemma_content/commonModule/map/map",function(e,r,a){function n(e,r,a){i=e,m="map"+r;var n=null,p={point:{x:parseFloat(l("centerX")||"0"),y:parseFloat(l("centerY")||"0")},marker:{x:parseFloat(l("markerPosX")||"0"),y:parseFloat(l("markerPosY")||"0")},markerTitle:l("markerTitle")||"",markerAddress:l("markerAddress")||"",zoom:l("zoom")?parseInt(l("zoom"),10):null,markerUrl:l("markerUrl")||""};"small"===a?(t("#J-map-info-title-"+r).text(p.markerTitle),t("#J-map-info-address-"+r).text(p.markerAddress),t("#J-map-info-link-"+r).attr("href",p.markerUrl),n=new BMap.Map(m,{enableMapClick:!1})):n=new BMap.Map(m);var d=new BMap.Point(p.point.x,p.point.y);n.centerAndZoom(d,p.zoom),n.centerAndZoom(d);var s=!1;if(n.addEventListener("dragend",function(){s||(s=!0,o(10000802))}),n.addEventListener("zoomend",function(){s||(s=!0,o(10000802))}),n.addEventListener("moveend",function(){s||(s=!0,o(10000802))}),n.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_SMALL})),p.marker.x&&p.marker.y){var c=new BMap.Icon("https://bj.bcebos.com/v1/baikebcs/front-end/editor/mapIcon/map.svg",new BMap.Size(14,21),{imageOffset:{width:0,height:-220}}),k=new BMap.Marker(new BMap.Point(p.marker.x,p.marker.y),{icon:c});if(n.addOverlay(k),"small"===a)return;var w="";if(p.markerTitle){w='<h4 class="marker-title">'+p.markerTitle,""!==p.markerUrl&&(w+='<a class="marker-link" target="_blank" href="'+p.markerUrl+'">详情</a>'),w+='</h4><p class="marker-detail">'+p.markerAddress+"</p>";var f={width:420,height:0},u=new BMap.InfoWindow(w,f)}k.onclick=function(){this.openInfoWindow(u)}}}var t=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/component/nslog/nslog"),i="",m="",l=function(e){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=i.substr(1).match(r);return null!=a?decodeURIComponent(a[2]):null};a.exports=function(e,r,a){window.HOST_TYPE="2",window.BMap_loadScriptTime=(new Date).getTime(),t.ajax({url:"https://api.map.baidu.com/getscript?v=3.0&ak=3GoY1jmZ5rBRSmrMfgzNXZZgXvpKtFxl&services=&t="+window.BMap_loadScriptTime,dataType:"script",success:function(){n(e,r,a)}}),o(10000801)}});
;/*!wiki-lemma:widget/lemma_content/commonModule/music/musicAlbum/musicAlbum.js*/
define("wiki-lemma:widget/lemma_content/commonModule/music/musicAlbum/musicAlbum",function(a,l,e){var s=a("wiki-common:widget/lib/jquery/jquery"),d=s(".musicAlbum-wrapper"),i=(s(".musicAlbum-model"),function(){d.find(".album-item").addClass("expand"),d.find(".detail-toggle").removeClass("collapse").addClass("expand"),d.find(".musicAlbum-detail").removeClass("collapse").addClass("expand")}),m=function(){d.find(".album-item").removeClass("expand"),d.find(".detail-toggle").removeClass("expand").addClass("collapse"),d.find(".musicAlbum-detail").removeClass("expand").addClass("collapse")},n=function(a){d.find(".j-albumItem-"+a).addClass("expand"),d.find(".j-detailItem-"+a).removeClass("collapse").addClass("expand")},o=function(a){d.find(".j-albumItem-"+a).removeClass("expand"),d.find(".j-detailItem-"+a).addClass("collapse").removeClass("expand")},t=function(){s(".musicAlbum-model").on("click",function(a){var l=s(a.target);l.hasClass("model-list")?(l.addClass("highlight"),l.parent().find(".model-detail").removeClass("highlight"),m()):l.hasClass("model-detail")&&(l.addClass("highlight"),l.parent().find(".model-list").removeClass("highlight"),i())}),s(".musicAlbum-wrapper").on("click",function(a){var l=s(a.target);if(l.hasClass("detail-toggle")){var e=l.attr("data-id");l.hasClass("collapse")?(l.removeClass("collapse").addClass("expand"),n(e)):(l.removeClass("expand").addClass("collapse"),o(e))}})};e.exports=function(){t()}});
;/*!wiki-lemma:widget/lemma_content/commonModule/music/musicHot/musicHot.js*/
define("wiki-lemma:widget/lemma_content/commonModule/music/musicHot/musicHot",function(o,i,t){var a=o("wiki-common:widget/lib/jquery/jquery"),e=e||{},m=function(o){var i="http://play.baidu.com/box?__m=mboxCtrl.playSong&__a="+o+"&__o=/_baike&fr=baikePC";!e.mp3Box||e.mp3Box.closed?e.mp3Box=window.open(i):e.mp3Box.location=i},n=function(){a(".musicHot-wrapper").on("click",".listen-icon",function(o){var i=a(o.target),t=i.attr("data-id");t&&""!=t&&m(t)})};a(".musicHot-wrapper .item-name a").attr("href","javascript:void(0)"),t.exports=n});
;/*!wiki-lemma:widget/lemma_content/commonModule/musicAlbum/musicAlbumNormal/musicAlbumNormal.js*/
define("wiki-lemma:widget/lemma_content/commonModule/musicAlbum/musicAlbumNormal/musicAlbumNormal",function(a,l,e){var s=a("wiki-common:widget/lib/jquery/jquery"),d=s(".musicAlbum-wrapper"),i=function(){d.find(".album-item").addClass("expand"),d.find(".detail-toggle").removeClass("collapse").addClass("expand"),d.find(".musicAlbum-detail").removeClass("collapse").addClass("expand")},m=function(){d.find(".album-item").removeClass("expand"),d.find(".detail-toggle").removeClass("expand").addClass("collapse"),d.find(".musicAlbum-detail").removeClass("expand").addClass("collapse")},n=function(a){d.find(".j-albumItem-"+a).addClass("expand"),d.find(".j-detailItem-"+a).removeClass("collapse").addClass("expand")},o=function(a){d.find(".j-albumItem-"+a).removeClass("expand"),d.find(".j-detailItem-"+a).addClass("collapse").removeClass("expand")},t=function(){s(".musicAlbum-model").on("click",function(a){var l=s(a.target);l.hasClass("model-list")?(l.addClass("highlight"),l.parent().find(".model-detail").removeClass("highlight"),m()):l.hasClass("model-detail")&&(l.addClass("highlight"),l.parent().find(".model-list").removeClass("highlight"),i())}),s(".musicAlbum-wrapper").on("click",function(a){var l=s(a.target);if(l.hasClass("detail-toggle")){var e=l.attr("data-id");l.hasClass("collapse")?(l.removeClass("collapse").addClass("expand"),n(e)):(l.removeClass("expand").addClass("collapse"),o(e))}})};e.exports=function(){t()}});
;/*!wiki-lemma:widget/lemma_content/commonModule/noticeIcon/noticeIcon.js*/
define("wiki-lemma:widget/lemma_content/commonModule/noticeIcon/noticeIcon",function(e,n,t){function i(e){var n,t=c(e).parent(),i=c(e).outerWidth(),o=t.outerWidth();n=parseInt((o-i)/2,10),c(e).css({left:n})}function o(){i(c(".en_conne_notice .enterprise_tips"))}var c=e("wiki-common:widget/lib/jquery/jquery");t.exports=o});
;/*!wiki-lemma:widget/lemma_content/commonModule/publication/bookAd.es.js*/
define("wiki-lemma:widget/lemma_content/commonModule/publication/bookAd.es",function(e,a,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),s=e("wiki-common:widget/lib/jquery/jquery"),o=i(s),c=e("wiki-common:widget/lib/jsmart/jsmart"),d=i(c),u=e("wiki-lemma:widget/tools/clickstream/clickstream"),m=i(u),p=new d["default"]('<div class="publication-ad-wrapper">\n{%if $enableScroll%}\n<div class="left-arrow J-left-arrow toggle-arrow disabled-arrow J-book-module-arrow" data-index="{%$adIndex|f_escape_xml%}">\n<em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em>\n</div>\n{%/if%}\n<div class="product-list-wrapper J-product-list-wrapper {%if !$enableScroll%}disabled-scroll-wrapper{%/if%}">\n<div class="product-list J-product-list">\n{%foreach $list as $index => $item%}\n<a\n                data-id="{%$item.product_id|f_escape_xml%}"\n                data-sellername="{%$item.sellerName|f_escape_xml%}"\n                class="product-item J-product-item" href="{%$item.pc_url|f_escape_xml%}" target="_blank">\n<div class="product-cover" style="background-image:url({%$item.image|f_escape_xml%});"></div>\n<div class="product-info-wrapper">\n<div class="product-name">{%$item.name|f_escape_xml%}</div>\n<div class="product-info-bottom">\n<div class="info-bottom">\n<div class="product-price">\n<div class="product-present-price">\n<span class="price-unit">￥</span><span>{%$item.price|f_escape_xml%}</span>\n</div>\n{%if $item.withDiscount && $item.value%}\n<div class="product-original-price">\n<span class="price-unit">￥</span><span>{%$item.value|f_escape_xml%}</span>\n</div>\n{%/if%}\n</div>\n<div class="product-seller">服务由{%$item.sellerName|f_escape_xml%}提供</div>\n</div>\n</div>\n</div>\n</a>\n{%/foreach%}\n</div>\n</div>\n{%if $enableScroll%}\n<div class="right-arrow J-right-arrow toggle-arrow J-book-module-arrow" data-index="{%$adIndex|f_escape_xml%}">\n<em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em>\n</div>\n{%/if%}\n</div>'),f=257,v=!1,h=function(){function e(a){r(this,e),this.$el=a.$el,this.lemmaTitle=a.lemmaTitle,this.lemmaId=a.lemmaId,this.rootLemmaId=a.rootLemmaId,this.curIdx=0,this.bookData=[],this.init()}return l(e,[{key:"init",value:function(){var e=this;this.getData().then(function(a){if(a&&0===a.errno&&a.data){var t=a.data.ad_natural_list;t&&t.length&&(e.bookData=e.formatData(t).slice(0,10),e.bookData&&e.bookData.length&&(e.render(),e.bindEvent()))}})}},{key:"getData",value:function(){var e=this.lemmaId,a=this.lemmaTitle;return o["default"].ajax({url:"/api/wikiui/getrelatedbusiness",data:{eid:0,word:e,platform:"pc",url:"https://baike.baidu.com/item/"+encodeURIComponent(a)+"/"+e,adpage:"pcbook"}})}},{key:"formatData",value:function(e){try{var a=JSON.parse(e);return a=a.filter(function(e){var a=e.pc_url,t=e.image,i=e.name,r=e.price,n=e.sellerName;return!!(a&&t&&i&&r&&n)}),a.map(function(e){return n({},e,{withDiscount:Number(e.price)<Number(e.value)})})}catch(t){return[]}}},{key:"render",value:function(){var e=p.fetch({adIndex:1,list:this.bookData,enableScroll:this.bookData.length>2});this.$el.find(".J-publication-ad").append(e),this.$el.find(".J-publication-descritpion").addClass("has-ad");var a=this.$el.find(".J-publication-desc");a.text()&&a.text().length>65&&a.text(a.text().slice(0,65)+"..."),v||(v=!0,m["default"].logViewEl({page:"lemma",element:"publication-product",lemmaId:this.rootLemmaId}))}},{key:"scrollAd",value:function(e){if(!e.hasClass("disabled-arrow")){var a=this.bookData,t=parseInt(a.length/2-1,10)+(a.length%2>0?1:0),i=this.curIdx;e.hasClass("J-left-arrow")&&(this.curIdx=i-1,e.siblings(".J-product-list-wrapper").find(".J-product-list").css("transform","translateX(-"+(i-1)*f+"px)"),e.siblings(".J-right-arrow").removeClass("disabled-arrow"),0===this.curIdx&&e.addClass("disabled-arrow")),e.hasClass("J-right-arrow")&&(this.curIdx=i+1,e.siblings(".J-product-list-wrapper").find(".J-product-list").css("transform","translateX(-"+(i+1)*f+"px)"),e.siblings(".J-left-arrow").removeClass("disabled-arrow"),this.curIdx===t&&e.addClass("disabled-arrow"))}}},{key:"bindEvent",value:function(){var e=this;this.$el.on("click",".J-book-module-arrow",function(){e.scrollAd(o["default"](this))})}}]),e}();a["default"]=h,t.exports=a["default"]});
;/*!wiki-lemma:widget/lemma_content/commonModule/publication/publication.es.js*/
define("wiki-lemma:widget/lemma_content/commonModule/publication/publication.es",function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=e("wiki-common:widget/lib/jquery/jquery"),m=a(o),d=e("wiki-lemma:widget/lemma_content/commonModule/publication/bookAd.es"),s=a(d),c=e("wiki-lemma:widget/tools/clickstream/clickstream"),u=a(c),r=function(){function e(t){l(this,e),this.lemmaId=t.lemmaId,this.lemmaTitle=t.lemmaTitle,this.data=JSON.parse(t.data)||[],this.isPreview=t.isPreview,this.$book=m["default"]("#J-book-list"),this.showNum=Math.min(4,this.data.length),this.needRendeAd=!0,this.init(),this.bindEvent()}return n(e,[{key:"init",value:function(){var e=this;this.$book.children(":lt(4)").each(function(t,i){e.render(m["default"](i),t,e.needRendeAd)})}},{key:"render",value:function(e,t,i){var a=e.find(".J-publication-name a").data("lemmaid"),l=e.find(".J-publication-name a").text();a&&l&&i&&!this.isPreview&&(new s["default"]({$el:e,rootLemmaId:this.lemmaId,lemmaId:a,lemmaTitle:l}),e.find(".J-publication-pic").attr("href","/item/"+encodeURIComponent(l)+"/"+a).attr("target","_blank").addClass("J-publication-link"))}},{key:"showMore",value:function(e){var t=this;if(this.showNum<this.data.length){var i=this.showNum+6;m["default"]("#J-book-list li:lt("+i+")").show();var a=this.showNum-1;this.$book.find("li:gt("+a+"):lt(6)").each(function(e,i){t.render(m["default"](i),t.showNum+e,t.needRendeAd)}),i>=this.data.length&&(e.find("span").text("收起"),e.find("em").removeClass("cmn-icons_arrow-b").addClass("cmn-icons_arrow-t"),this.needRendeAd=!1),this.showNum=i}else this.showNum=Math.min(4,this.data.length),e.find("span").text("查看更多书籍"),e.find("em").removeClass("cmn-icons_arrow-t").addClass("cmn-icons_arrow-b"),m["default"]("#J-book-list li.more").hide()}},{key:"bindEvent",value:function(){var e=this,t=this,i=!1;m["default"](window).on("scroll",function(){var a=t.$book.offset().top,l=m["default"](window).height(),n=m["default"](window).scrollTop();l+n>=a&&a+l>n&&(i||(i=!0,u["default"].logViewEl({page:"lemma",element:"publication",lemmaId:e.lemmaId})))}),this.data.length>4&&m["default"](".J-expand-all").on("click",function(){t.showMore(m["default"](this))}),this.$book.on("click",".J-publication-name a",function(){var e=m["default"](this).data("lemmaid"),i=m["default"](this).text();u["default"].logActClick({page:"lemma",element:"publication-link",lemmaId:t.lemmaId,linkLemmaId:e,linkLemmaTitle:i})}),this.$book.on("click",".J-publication-link",function(){var e=m["default"](this).attr("href").split("/");u["default"].logActClick({page:"lemma",element:"publication-link",lemmaId:t.lemmaId,linkLemmaId:decodeURIComponent(e[2]),linkLemmaTitle:decodeURIComponent(e[3])})}),this.$book.on("click",".J-publication-ad a",function(){u["default"].logActClick({page:"lemma",element:"publication-product",lemmaId:t.lemmaId})}),this.$book.on("click",".J-product-item",function(){var e=m["default"](this).attr("data-id"),i=m["default"](this).attr("data-sellername");u["default"].logActClick({page:"lemma",element:"commerce-book-item",lemmaId:t.lemmaId,lemmaTitle:t.lemmaTitle,productId:e,sellerName:i})})}}]),e}();t["default"]=r,i.exports=t["default"]});
;/*!wiki-lemma:widget/lemma_content/commonModule/series/series.js*/
define("wiki-lemma:widget/lemma_content/commonModule/series/series",function(a,e){var r=a("wiki-common:widget/lib/jquery/jquery"),s=r("#dramaSeries"),i=r("#dramaSerialList");r("dl:first-child",i).show(),e.init=function(a){a=parseInt(a),s.on("click",".pageBar a",function(){var e=r(this),o=e.parents(".pageBar");if(!e.hasClass("cur"))if(e.hasClass("more"))o.hasClass("unfold")?(r(".pageBar",s).removeClass("unfold"),r(".pageBar .more",s).text("展开")):(r(".pageBar",s).addClass("unfold"),r(".pageBar .more",s).text("收起"));else{var l=parseInt(e.text());r(".pageBar a",s).removeClass("cur"),r(".pageBar a[index="+Math.floor(l/a)+"]",s).addClass("cur"),r("dl",i).hide(),r("dl:nth("+Math.floor(l/a)+")",i).show()}})}});
;/*!wiki-lemma:widget/promotion/baijiahao/baijiahao.es.js*/
define("wiki-lemma:widget/promotion/baijiahao/baijiahao.es",function(i,o,n){"use strict";function e(i){return i&&i.__esModule?i:{"default":i}}function t(i){function o(){u["default"].ajax({url:"/wikiui/baijiahao/subscribe",data:{opType:n?"cancel":"add",lemmaId:e,appId:t}}).always(function(){a.toggleClass("subscribed"),n=!n})}var n=i.isSubscribe,e=i.lemmaId,t=i.appId,a=u["default"]("#bjh-module-wrapper"),c=a.find(".subscribe-bjh-btn"),l=a.find(".private-letter-btn"),r=void 0;d["default"].checkIfLogin({onLogin:function(){r=!0},onUnlogin:function(){r=!1}}),c.on("click",function(i){i.stopPropagation(),r?o():d["default"].showLoginPop({onLoginSuccess:o})}),l.on("click",function(i){i.stopPropagation()}),a.on("click",function(){location.href='https://author.baidu.com/home?context={"app_id":"'+t+'"}'})}Object.defineProperty(o,"__esModule",{value:!0});var a=i("wiki-common:widget/lib/jquery/jquery"),u=e(a),c=i("wiki-common:widget/component/userLogin/userLogin"),d=e(c);o["default"]=t,n.exports=o["default"]});
;/*!wiki-lemma:widget/promotion/banner/banner.js*/
define("wiki-lemma:widget/promotion/banner/banner",function(e,n,a){var i=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/lib/jsmart/jsmart"),m=e("wiki-common:widget/component/superLogger/superLogger.es");a.exports=function(e,n){var a=i(".configModuleBanner"),t=new o('<a href="{%$url|f_escape_xml%}" ad-type="bannerAd" target="_blank" nslog-type="10002202" nslog-params=\'{"adId":"{%$adId|f_escape_xml%}", "adTitle": "{%$name|f_escape_xml%}", "adPos": 15}\'>\n<img src="{%$picUrl|wiki_common_https_trans|f_escape_xml%}" title="{%$text|default:$name|f_escape_xml%}">\n</a>').fetch(e[0]);i(".configModuleDown").length&&i(".configModuleDown").remove(),a.html(t),a.find("a").on("click",function(){m.sendClk("lemma_page_banner_img_click",n)})}});
;/*!wiki-lemma:widget/promotion/bottomRecommend/bottomRecommend.es.js*/
define("wiki-lemma:widget/promotion/bottomRecommend/bottomRecommend.es",function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(){return p+u.scrollTop()>.5*f}function l(e){this.options=e;var t=203;t&&(this.eid=t,a()?this.getData():this.bindScrollEvent())}Object.defineProperty(t,"__esModule",{value:!0});var n=e("wiki-common:widget/lib/jquery/jquery"),d=i(n),m=e("wiki-lemma:widget/tools/throttle/throttle.es"),c=i(m),s=e("wiki-lemma:widget/tools/clickstream/clickstream"),r=i(s),u=(e("wiki-lemma:widget/tools/eid/eid.es"),d["default"](window)),p=u.height(),f=document.body.clientHeight;l.prototype={constructor:l,bindScrollEvent:function(){var e=this,t=c["default"](function(){a()&&(e.getData(),u.off("scroll.bottomRecommend",t))},200);u.on("scroll.bottomRecommend",t)},getData:function(){var e=this;r["default"].logActEvent({page:"lemma",act_type:"bottom-yitiao-request"});var t=this.options.lemmaInfo,o=t.lemmaTitle,i=t.newLemmaId;d["default"].ajax({url:"/api/wikiui/directad",data:{lemmaTitle:o,eid:this.eid,platform:0,url:"https://baike.baidu.com/item/"+o+"/"+i}}).done(function(t){var o=t.errno,i=t.ad_place_list,a=void 0===i?[]:i;return!o&&a[0]&&a[0].ad_place_data?(e.render(a[0]),void r["default"].logActEvent({page:"lemma",act_type:"bottom-yitiao-request-success"})):void r["default"].logActEvent({page:"lemma",act_type:"bottom-yitiao-request-fail"})}).fail(function(){r["default"].logActEvent({page:"lemma",act_type:"bottom-yitiao-request-fail"})})},render:function(e){var t=d["default"](".bottom-recommend-wrapper"),o=e.ad_place_data,i=e.ad_place_js,a=e.ad_place_css;if(a){var l="<style>"+a+"</style>";t.append(l)}if(t.append("<div>"+o+"</div>"),i){var n="<script>"+i+"</script>";t.append(n)}r["default"].logViewElDraw({page:"lemma",element:"bottom-yitiao",itemNum:e.ad_num}),this.bindClickEvent(t),this.bindExposedLog(t,e.ad_num)},bindClickEvent:function(e){e.on("click","a",function(){r["default"].logActClick({page:"lemma",element:"bottom-recommend"})})},bindExposedLog:function(e,t){var o=this;this.isExposed(e)?this.logModuleExpose(t):!function(){var i=c["default"](function(){o.isExposed(e)&&(o.logModuleExpose(t),u.off("scroll.bottomRecommendExpose",i))},200);u.on("scroll.bottomRecommendExpose",i)}()},isExposed:function(e){var t=e.offset().top,o=e.height()/2,i=u.scrollTop();return p+i>t+o},logModuleExpose:function(e){r["default"].logViewEl({page:"lemma",element:"bottom-recommend",adNum:e})}},t["default"]=l,o.exports=t["default"]});
;/*!wiki-lemma:widget/promotion/declaration/declaration.js*/
define("wiki-lemma:widget/promotion/declaration/declaration",function(e,o,t){var i=e("wiki-common:widget/lib/jquery/jquery"),n=e("wiki-common:widget/lib/jsmart/jsmart");t.exports=function(e){var o=i(".promotion-declaration");i(".lemmaWgt-declaration").length&&i(".lemmaWgt-declaration").remove();var t=new n('<div class="declarationLogo{%if $hotspot%} hotspot{%/if%}">\n{%if $hotspot%}热点{%else%}声明{%/if%}\n</div>\n<div class="declarationContent">\n{%$text|default:$name|f_escape_xml%}\n</div>');-1!==encodeURI(e[0].name).indexOf(encodeURI("热点"))&&(e[0].hotspot=!0);var a=t.fetch(e[0]);o.html(a),o.show()}});
;/*!wiki-lemma:widget/promotion/fengchao/setAdScrollEvent.js*/
define("wiki-lemma:widget/promotion/fengchao/setAdScrollEvent",function(e,o,t){var i=e("wiki-common:widget/lib/jquery/jquery"),n=e("wiki-lemma:widget/tools/throttle/throttle.es");t.exports=function(e,o){var t=i(window),r=i(".content-wrapper"),l=r.find(".main-content"),s=r.find(".side-content"),f=i(".lemmaWgt-searchHeader"),d=e.offset().top;o=o||"netunion";var a=function(){if("netunion"===o&&!e.children().length)return void t.off("scroll."+o);var i=e.outerHeight(),n=t.scrollTop(),a=t.height(),c=a+n,h=f.outerHeight()||66,u=r.offset().top+r.height(),m=l.outerHeight(),g=s.outerHeight();if(g>=m||16>a-(i+h+241))return void e.removeClass("fixed-box");if(n+h+10>=d){var v=a-(h+i+20),w=c-u+221+20+10;w>=v&&(v=w),e.addClass("fixed-box").css("bottom",v)}else e.removeClass("fixed-box")},c=n(a,8),h=n(function(){a()},100);t.on("scroll."+o,c),t.on("resize."+o,h),a()}});
;/*!wiki-lemma:widget/promotion/fengchao/fengchao.es.js*/
define("wiki-lemma:widget/promotion/fengchao/fengchao.es",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=s["default"].get("BAIDUID");if(t){var n=t.substr(t.length-9,4),o=parseInt("0x"+n,16);return o.length<e?o=new Array(e-o.length).join("0")+o:o+="",o.substr(o.length-e,e)}}function r(e){var t=location.search.slice(1),n=void 0;if(t.length){var o=t.split("&");o.some(function(t){var o=t.split("=");return o[0]===e?(n=o[1],!0):void 0})}return n}function a(e){"undefined"==typeof A.allAdForbidden&&"undefined"==typeof A.pcNetUnionRight&&e&&e.errFn&&e.dom&&e.errFn(e.dom,x)}function l(e){_.remove(),a(e)}function d(e){var t=e.lemmaTitle,n=e.newLemmaId,o="https://baike.baidu.com/item/"+encodeURIComponent(t)+"/"+n+"?lemmaid="+n;u["default"].ajax({url:"/api/wikiui/getasp",data:{word:t,platform:"pc",asp_url:o,eid:85187}})}var m=e("wiki-common:widget/lib/jquery/jquery"),u=o(m),c=e("wiki-common:widget/util/cookie"),s=o(c),g=e("wiki-common:widget/component/nslog/nslog"),f=(o(g),e("wiki-common:widget/component/testElem/testElem")),p=(o(f),e("wiki-lemma:widget/promotion/fengchao/setAdScrollEvent")),w=(o(p),e("wiki-common:widget/component/superLogger/superLogger.es")),h=(o(w),e("wiki-lemma:widget/tools/inSightDetector/inSightDetector.es")),v=(o(h),"testA"),k="testB",b="contrast",I="normal",y=u["default"](window),A=null,_=null,j=r("idmodulu")||parseInt(i(2),10),x=void 0;x=j>=10&&20>j?v:j>=30&&40>j?k:j>=50&&60>j?b:I;var D=!1;y.on("load",function(){D=!0});var E=function(e,t){A=e.adManager||{},_=u["default"]("#side_box_fengchao"),d(e),l(t)};n.exports=E});
;/*!wiki-lemma:widget/promotion/guessLike/guessLike.js*/
define("wiki-lemma:widget/promotion/guessLike/guessLike",function(e,i,t){function s(e){m.init(e)}var o=e("wiki-common:widget/lib/jquery/jquery"),n=e("wiki-common:widget/lib/jsmart/jsmart"),l=(e("wiki-common:widget/util/cookie"),e("wiki-common:widget/component/nslog/nslog")),a=e("wiki-lemma:widget/tools/bkclick/bkclick"),r=e("wiki-lemma:widget/tools/inSightDetector/inSightDetector.es"),c=e("wiki-common:widget/component/superLogger/superLogger.es"),d=e("wiki-lemma:widget/tools/eid/eid.es").getEid,g=new n('{%foreach $favorites as $index=>$item%}\n{%if $index > 9%}\n{%break%}\n{%/if%}\n<li><a href="{%$item.url|f_escape_xml%}" target="_blank">{%$item.title|f_escape_xml%}</a></li>\n{%/foreach%}'),m={init:function(e){this.newEl=o("#fc_guess_like_new"),this.param=e;var i=e.adManager;if(!i||"undefined"==typeof i.allAdForbidden&&"undefined"==typeof i.pcFengchaoGuess){var t=d("guessLike");t&&(this.eid=t,this.fetch(t))}},fetch:function(e){var i=this;a.bklog("guesslikeRequest"),o.ajax({url:"/api/wikiui/guesslike",type:"GET",dataType:"json",data:{url:[location.protocol,"//",location.host,location.pathname].join(""),lemmaTitle:this.param.lemmaTitle,eid:e},success:function(e){0===e.err_no?(a.bklog("guesslikeSuccess"),i.render(e)):a.bklog("guesslikeFail")},error:function(){a.bklog("guesslikeFail")}})},render:function(e){var i={};try{i=o.parseJSON(e.ad_place_list[0].ad_place_data)}catch(t){}if(i.ads&&i.ads.length>0){l(10050100),this.newEl.show().find("ul").html(g.fetch({favorites:i.ads})),a.bklog("guesslikeView"),this.$items=this.newEl.find("ul"),this.$items.on("click","li a",function(){a.bklog("guesslikeClick")});var s=new r({interval:100}),n=this,d={secondId:-1},m=this.param.eid;m&&(d.rqsEid=m),c.sendPv("lemma_page_bottom_guess_like_show",d),s.addListener(this.newEl[0],function(){a.bklog("guesslikeExposed"),s.removeListener(n.newEl[0])})}}};t.exports={init:s}});
;/*!wiki-lemma:widget/promotion/leadPVBtn/leadPVBtn.js*/
define("wiki-lemma:widget/promotion/leadPVBtn/leadPVBtn",function(e,n,t){var a=e("wiki-common:widget/lib/jquery/jquery"),i=e("wiki-common:widget/component/nslog/nslog"),s=e("wiki-common:widget/component/superLogger/superLogger.es"),l=e("wiki-common:widget/lib/jsmart/jsmart"),o=e("wiki-lemma:widget/tools/newSideShare/qrcode"),c=new l('{%$nslog_cfgData = [\n    admission=>40000401,\n    studyAbroad=>40000402\n]%}\n{%if $data.list && count($data.list) > 0%}\n<div class="pvBtn-box">\n{%if $data.buttonBefore && $data.buttonBefore != \'\'%}\n<span class="buttonBefore">{%$data.buttonBefore|f_escape_xml%}</span>\n{%/if%}\n{%foreach $data.list as $key=>$item%}\n{%if $item.type === \'android\' || $item.type === \'ios\'%}\n<a class="leadPVBtn_qrcode">\n<span class="leadPVBtn_qrcode_text">\n<i class="leadPVBtn_qrcode_icon_{%$item.type|f_escape_xml%}"></i>\n<strong>{%$item.title|f_escape_xml%}</strong>\n</span>\n<span class="leadPVBtn_qrcode_pic" {%if $item.scheme%}data-scheme="{%$item.scheme|f_escape_xml%}"{%/if%} data-link="{%$item.link|f_escape_xml%}">\n<span>\n<i class="leadPVBtn_qrcode_icon_{%$item.type|f_escape_xml%}">\n{%if $item.srcUrl%}\n<img src="{%$item.srcUrl|f_escape_xml%}" />\n{%else%}\n<i class="J-qrcode-host"></i>\n{%/if%}\n</i>\n<strong>扫码下载</strong>\n</span>\n</span>\n</a>\n{%else%}\n<span class="leadPVBtnWrapper">\n<a target="_blank" nslog-type="{%$nslog_cfgData[$item.type]|f_escape_xml%}" nslog="normal" href="{%if $item.link!=\'\'%}{%$item.link|escape:none%}{%else%}javascript:;{%/if%}" class="cmn-btn-white-blue cmn-btn-32 leadPVBtn {%$item.type|f_escape_xml%}" data-index="{%$item@index|f_escape_xml%}">\n{%if $item.type != \'noIcon\'%}<em class="leadPVBtn_icon {%$item.type|f_escape_xml%}"></em>{%/if%}\n{%$item.title|f_escape_xml%}</a>\n</span>\n{%/if%}\n{%/foreach%}\n{%if $data.buttonAfter && $data.buttonAfter != \'\'%}\n<span class="buttonAfter">{%$data.buttonAfter|f_escape_xml%}</span>\n{%/if%}\n</div>\n{%/if%}');t.exports=function(e,n){function t(e,n){var t=a(e).parents(".leadPVBtn_qrcode_pic"),i=t.width()-24||78,s=new o(e,{width:i,height:i});s.makeCode(n)}var l=c.fetch({data:e[0]});a(".lemmaWgt-promotion-leadPVBtn").html(l),a(".leadPVBtn_qrcode_pic").each(function(e,n){var i=a(n).find(".J-qrcode-host"),s=a(n).data("scheme")||a(n).data("link");i.length&&s&&t(i.get(0),s)}),a(".leadPVBtnWrapper").find(".leadPVBtn").on("click",function(){var e=parseInt(a(this).attr("data-index"),10);i(0===e?10003001:1===e?10003002:10003006),s.sendClk("lemma_page_serviceDirect_btn_click",{lemmaTitle:n.lemmaTitle,lemmaId:n.newLemmaId,btnIndex:e})})}});
;/*!wiki-lemma:widget/promotion/medicalModal/medicalModal.js*/
define("wiki-lemma:widget/promotion/medicalModal/medicalModal",function(e,m,o){var i=e("wiki-common:widget/lib/jquery/jquery"),l=e("wiki-common:widget/component/nslog/nslog");o.exports={init:function(e){var m=i("#J_medical_modal_container"),o=m.find(".J-medical-modal-mask"),n=m.find(".J-medical-modal"),d=n.find(".J-medical-modal-link");m.addClass("slide-up"),i(document.body).css({height:"100%",overflow:"hidden"}),o.add(n.find(".cmn-icon")).on("click",function(){m.removeClass("slide-up"),i(document.body).css({height:"auto",overflow:"auto"}),setTimeout(function(){m.remove()},600),l({type:10100302,lemmaTitle:e.lemmaInfo.lemmaTitle,lemmaId:e.lemmaInfo.newLemmaId})}),d.on("click",function(){i(document.body).css({height:"auto",overflow:"auto"}),l({type:10100301,lemmaTitle:e.lemmaInfo.lemmaTitle,lemmaId:e.lemmaInfo.newLemmaId})})}}});
;/*!wiki-lemma:widget/promotion/relatedBusiness/relatedBusiness.js*/
define("wiki-lemma:widget/promotion/relatedBusiness/relatedBusiness",function(e,a,t){function i(e){var a=r.get("BAIDUID");if(a){var t=a.substr(a.length-9,4),i=parseInt("0x"+t,16);return i.length<e?i=new Array(e-i.length).join("0")+i:i+="",i.substr(i.length-e,e)}}function n(){return parseInt(i(1),10)}var s=e("wiki-common:widget/lib/jquery/jquery"),r=e("wiki-common:widget/util/cookie"),c={init:function(e){this.param=e,e.adManager&&"undefined"!=typeof e.adManager.pcRelatedBusiness||(5===n()?this.fetch():location.search.indexOf("fcescapecapture=1")>-1&&this.fetch())},fetch:function(){var e=this;s.ajax({url:"/api/wikiui/relatedbusiness",type:"GET",dataType:"json",data:{word:this.param.lemmaTitle,url:[location.protocol,"//",location.host,location.pathname].join("")},success:function(a){0===a.err_no&&e.render(a)}})},render:function(e){var a=s("#related-business-wrap"),t={};e.ad_place_list&&e.ad_place_list[0]&&(t=e.ad_place_list[0]),t.ad_place_css&&a.append('<style type="text/css">'+t.ad_place_css+"</style>"),t.ad_place_data&&a.show().append(t.ad_place_data),t.ad_place_js&&a.append("<script>"+t.ad_place_js+"</script>")}};t.exports=c});
;/*!wiki-lemma:widget/promotion/rightAd/rightAd.js*/
define("wiki-lemma:widget/promotion/rightAd/rightAd",function(i,t,e){var a=i("wiki-common:widget/lib/jquery/jquery"),d=(i("wiki-common:widget/component/nslog/nslog"),i("wiki-common:widget/util/cookie"));e.exports=function(i){var t=function(i){var t=['<div class="right-ad">','<a class="rightAd-link" ad-type="rightAd" nslog-type="10002202" nslog-params=\'{"adId":"'+i.adId+'", "adTitle": "'+i.name+'", "adPos": 4}\' title="'+i.text+'" href="'+i.url+'" target="_blank">','<img src="'+i.picUrl+'" alt="'+i.text+'" />',"</a>",'<a class="rightAd-close" href="javascript:;"></a>',"</div>"].join(""),e=a(t),o=e.find(".rightAd-close");return o.on("click",function(){d.set("pcrightad"+i.adId,"showed",{expires:1152e5,path:"/"}),e.hide()}),e};if(!d.get("pcrightad"+i[0].adId)){var e=t(i[0]);e.appendTo(a("body"))}}});
;/*!wiki-lemma:widget/promotion/rightBigAd/rightBigAd.js*/
define("wiki-lemma:widget/promotion/rightBigAd/rightBigAd",function(t,i,e){var g=t("wiki-common:widget/lib/jquery/jquery");e.exports=function(t){g(".lemmaWgt-promotion-rightBigAd").html('<a nslog-type="10002202" ad-type="rightBigAd" nslog-params=\'{"adId": "'+t[0].adId+'", "adTitle": "'+t[0].name+'", "adPos": 9}\' title="'+t[0].text+'" href="'+t[0].url+'" target="_blank"><img src="'+t[0].picUrl+'" alt="'+t[0].text+'" /></a>'),g(".lemmaWgt-promotion-rightBigAd").show()}});
;/*!wiki-lemma:widget/promotion/rightGuessLike/rightGuessLike.js*/
define("wiki-lemma:widget/promotion/rightGuessLike/rightGuessLike",function(i,e,t){function o(i){f.init(i)}function s(i,e){var t=null,o=!0;return function(){var s=arguments,n=this;return o?(i.apply(n,s),void(o=!1)):void(t||(t=setTimeout(function(){clearTimeout(t),t=null,i.apply(n,s)},e||60)))}}function n(i){var e=a(window),t=a(".content-wrapper"),o=a(".lemmaWgt-searchHeader"),n=i.offset().top,l=function(){var s=i.outerHeight(),a=e.scrollTop(),l=e.height(),c=l+a,r=o.outerHeight()||66,u=t.offset().top+t.height(),f=l-r-20-221-s;if(a+r+10>=n){var m=l-(r+s+20);c>u&&(m=c-u+f+221-10),i.css({position:"fixed",bottom:m})}else i.css({position:"static"})},c=s(l,5);e.on("scroll.rightGuessLike",c)}var a=i("wiki-common:widget/lib/jquery/jquery"),l=i("wiki-common:widget/lib/jsmart/jsmart"),c=(i("wiki-common:widget/util/cookie"),i("wiki-common:widget/component/nslog/nslog")),r=i("wiki-lemma:widget/tools/bkclick/bkclick"),u=new l('{%foreach $favorites as $index=>$item%}\n{%if $index > 9%}\n{%break%}\n{%/if%}\n<li><a href="{%$item.url|f_escape_xml%}" target="_blank">{%$item.title|f_escape_xml%}</a></li>\n{%/foreach%}'),f={init:function(i){this.newEl=a(".J-rightGuessLike"),this.param=i,i.adManager&&"undefined"!=typeof i.adManager.pcFengchaoGuess||this.fetch(202)},fetch:function(i){var e=this;r.bklog("pc_guesslike_request"),a.ajax({url:"/api/wikiui/guesslike",type:"GET",dataType:"json",data:{url:[location.protocol,"//",location.host,location.pathname].join(""),lemmaTitle:this.param.lemmaTitle,eid:i},success:function(i){r.bklog("pc_guesslike_success"),0===i.err_no&&(e.render(i),a("#J-rightGuessLike").css("display","block"),setTimeout(function(){n(a("#J-rightGuessLike"))},2500))},error:function(){r.bklog("pc_guesslike_fail")}})},render:function(i){var e={};try{e=a.parseJSON(i.ad_place_list[0].ad_place_data)}catch(t){}e.ads&&e.ads.length>0&&(c(10050100),r.bklog("pc_guesslike_view"),this.newEl.show().find("ul").html(u.fetch({favorites:e.ads})),this.$items=this.newEl.find("ul"),this.$items.on("click","li a",function(){r.bklog("pc_guesslike_click")}))}};t.exports={init:o}});
;/*!wiki-lemma:widget/promotion/rightPreciseAd/rightPreciseAd.js*/
define("wiki-lemma:widget/promotion/rightPreciseAd/rightPreciseAd",function(t,e,i){var r=t("wiki-common:widget/lib/jquery/jquery");i.exports=function(t){if(40==t[0].adId){var e=r(".lemmaWgt-promotion-rightPreciseAd").attr("data-lemmaId"),i=r(".lemmaWgt-promotion-rightPreciseAd").attr("data-lemmaTitle");t[0].url=t[0].url+"&wd="+i+"&lemmaId="+e}r(".lemmaWgt-promotion-rightPreciseAd").html('<a nslog-type="10002202" ad-type="rightPreciseAd" nslog-params=\'{"adId":"'+t[0].adId+'", "adTitle": "'+t[0].name+'", "adPos": 5}\' title="'+t[0].text+'" href="'+t[0].url+'" target="_blank"><img src="'+t[0].picUrl+'" alt="'+t[0].text+'" /></a>'),r(".lemmaWgt-promotion-rightPreciseAd").show()}});
;/*!wiki-lemma:widget/promotion/rightTashuo/rightTashuo.js*/
define("wiki-lemma:widget/promotion/rightTashuo/rightTashuo",function(t,e,a){"use strict";function i(t){u("#tashuo_right").show(),p(10090001),u("#tashuo_right .J-items").html(h.fetch({items:t.data,lemmaId:c,lemmaTitle:d,topicId:t.topicId,cnt:t.cnt})),s(),l(),r();var e=new f({container:u("#tashuo_right .slides .viewport ul"),aniUnitSize:{width:270,height:270},aniConfig:{duration:400,direction:"top left"},onAniStart:function(){s(),m(c,d)},onAniComplete:function(){m(c,d)}});u("#tashuo_right .J-slides-btn").length>0&&u("#tashuo_right .J-items").mouseover(function(){u("#tashuo_right .J-slides-btn").show()}).mouseleave(function(){u("#tashuo_right .J-slides-btn").hide()}),u("#tashuo_right").on("click",".J-slides-btn",function(){switch(u(this).attr("data-skipTo")){case"prev":e.play(-1),m(c,d);break;case"next":e.play(),m(c,d)}}),u("#tashuo_right").on("click",".J-like",function(){var t="tashuo-liked",e=u(this).find(".J-number"),a=u(this).attr("data-isvote"),i=e.text();u.ajax({url:"/api/tashuo/vote",dataType:"json",data:{id:u(this).closest(".J-item").attr("data-tashuoId")}}),"1"===a?(u(this).attr("data-isvote","0"),u(this).removeClass(t),i--,e.text(i)):(u(this).attr("data-isvote","1"),i++,u(this).addClass(t),e.text(i))}),u("#tashuo_right").on("click",".J-item",function(){p(10090002)});var a,i=!1,n=!1;u(window).on("scroll",function(){var t=u("#tashuo_right").offset().top-u(window).scrollTop(),e=u("#tashuo_bottom").offset().top,s=e-u(window).scrollTop(),o=(u("#tashuo_bottom").height(),s<u(window).height());return t<u(window).height()&&!i&&!u(".side-content").is(":hidden")&&!n&&(a=u("#tashuo_right").offset().top,n=!0),a>e?void u("#tashuo_right").hide():void(o&&68===t?u("#tashuo_right").hide():o||0!==t||u("#tashuo_right").show())})}function s(){u("#tashuo_right .tashuo-item-cover .cover-img").each(function(){this.complete?n(this):this.onload=function(){n(this)}})}function n(t){var e={width:parseInt(u(t).attr("data-width"),10)||t.naturalWidth,height:parseInt(u(t).attr("data-height"),10)||t.naturalHeight};t.style=o({width:268,height:150},e)}function o(t,e){var a=t.width,i=t.height,s=e.width/e.height,n=[];return s>=a/i?(n.push("height: 100%"),n.push("margin-left: -"+(s*i-a)/2+"px")):(n.push("width: 100%"),n.push("margin-top: -"+(a/s-i)/2+"px")),n.join(";")}function m(t,e){var a=u(".tashuo-right-content-essence");$.removeAllListeners(),$.addListener(a[0],function(){var a=u(".tashuo-right-content-essence .tashuo-item[data-tashuoid]"),i=u(a).attr("data-tashuoid");if(!k.has(i)){var s={page:"lemma",element:"tashuo_article",articleId:i,itemType:"article",lemmaId:t,lemmaTitle:e};v.logViewEl(s),k.set(i,!0)}$.removeAllListeners()})}function l(){var t=u(".tashuo-right-content-essence .slides .tashuo-item-cover"),e=u(".tashuo-right-content-essence .slides .tashuo-item-abstract"),a=Array.from(e).concat(Array.from(t)),i=u("#J-vars");a.forEach(function(t){t.onclick=function(){var e=u(t).find("a").attr("href"),a={page:"lemma",element:"tashuo_article",tashuoParam:"lemma-right",lemmaId:i.attr("data-lemmaid"),lemmaTitle:i.attr("data-lemmatitle"),articleId:w.getQuery("id",e)||"",itemType:"article"};v.logActClick(a)}})}function r(){var t=u(".tashuo-right-title-essence");t.on("click",function(){var t=u("#J-vars"),e={page:"lemma",element:"tashuo-article-list",tashuolistParam:"lemma-right",lemmaId:t.attr("data-lemmaid"),lemmaTitle:t.attr("data-lemmatitle")};v.logActClick(e)})}var h,c,d,u=t("wiki-common:widget/lib/jquery/jquery"),p=t("wiki-common:widget/component/nslog/nslog"),g=t("wiki-common:widget/lib/jsmart/jsmart"),f=t("wiki-common:widget/ui/carousel/carousel"),_=(t("wiki-common:widget/ui/pager/horPager/horPager"),t("wiki-lemma:widget/tools/inSightDetector/inSightDetector.es")),v=t("wiki-lemma:widget/tools/clickstream/clickstream"),w=t("wiki-common:widget/util/url"),b=!1,$=new _({interval:500}),k=new Map,T=function(t){h=new g('<div class="tashuo-right-title-essence" {%if $cnt > 5%}style="cursor:pointer"{%/if%}>\n<a {%if $cnt > 5%}href="/tashuolist/{%$lemmaTitle|escape:url%}/{%$lemmaId|f_escape_path%}?fromLemmaModule=pcRight" class="tashuo-more" target="_blank"{%/if%}>\n<img src="https://bkssl.bdimg.com/static/wiki-lemma/widget/promotion/rightTashuo/img/ta-logo-blue_5458427.png" alt="">\n<span>解读词条背后的知识</span>\n</a>\n</div>\n<div class="slides">\n<div class="viewport">\n<ul>\n{%foreach $items as $index=>$item%}\n<li class="wgt_carousel_aniUnit">\n<div class="tashuo-item J-item" data-tashuoId="{%$item.tashuoId|f_escape_xml%}">\n<div class="tashuo-item-author">\n<a href="/usercenter/userpage?uk={%$item.uk|f_escape_path%}&authorId={%$item.authorId|f_escape_path%}&from=lemma" target="_blank">\n{%if $item.bjhAuthor && $item.bjhAuthor.name%}\n<div class="ta-author-area"><span><img src="{%$item.bjhAuthor.avatar|f_escape_xml%}" /></span></div>\n<div class="ta-author-slogan-area">\n<strong>{%$item.bjhAuthor.name|f_escape_xml%}</strong>\n<span>{%$item.bjhAuthor.v_intro|default:$item.nameDesc|f_escape_xml%}</span>\n</div>\n{%if $item.bjhAuthor.v_type%}<i class="bjh-author-type-{%$item.bjhAuthor.v_type|f_escape_xml%}"></i>{%/if%}\n{%else%}\n<div class="ta-author-area"><span><img src="{%\'https://bkimg.cdn.bcebos.com/pic/\'|cat:$item.picSrc|wiki_common_https_trans%}" /></span></div>\n<div class="ta-author-slogan-area">\n<strong>{%$item.name|f_escape_xml%}</strong>\n<span>{%$item.nameDesc|f_escape_xml%}</span>\n</div>\n{%if $item.isAddV%}<i></i>{%/if%}\n{%/if%}\n</a>\n</div>\n{%if $item.sharePic.src%}\n<div class="tashuo-item-cover">\n<a href="/tashuo/browse/content?id={%$item.id|f_escape_path%}&lemmaId={%$lemmaId|f_escape_path%}&fromLemmaModule=pcRight&lemmaTitle={%$lemmaTitle|f_escape_path%}" target="_blank">\n<img src="{%\'https://bkimg.cdn.bcebos.com/pic/\'|cat:$item.sharePic.src|wiki_common_https_trans%}" data-width="{%$item.sharePic.width|f_escape_xml%}" data-height="{%$item.sharePic.height|f_escape_xml%}" class="cover-img">\n<div class="overlay"><img src="https://bkssl.bdimg.com/static/wiki-lemma/widget/promotion/rightTashuo/img/overlay_543bb29.png"></div>\n<div class="tashuo-item-title">\n{%$item.title|f_escape_xml%}\n</div></a>\n</div>\n<div class="tashuo-item-abstract">\n<a href="/tashuo/browse/content?id={%$item.id|f_escape_path%}&lemmaId={%$lemmaId|f_escape_path%}&fromLemmaModule=pcRight&lemmaTitle={%$lemmaTitle|f_escape_path%}" target="_blank">\n{%if $item.abstract%}{%$item.abstract|f_escape_xml%}{%else%}{%$item.title|f_escape_xml%}{%/if%}\n</a>\n</div>\n{%else%}\n<div class="no-cover">\n<div class="tashuo-item-title">\n<a href="/tashuo/browse/content?id={%$item.id|f_escape_path%}&lemmaId={%$lemmaId|f_escape_path%}&fromLemmaModule=pcRight&lemmaTitle={%$lemmaTitle|f_escape_path%}" target="_blank">\n{%$item.title|f_escape_xml%}\n</a>\n</div><div class="tashuo-item-abstract">\n<a href="/tashuo/browse/content?id={%$item.id|f_escape_path%}&lemmaId={%$lemmaId|f_escape_path%}&fromLemmaModule=pcRight&lemmaTitle={%$lemmaTitle|f_escape_path%}" target="_blank">\n{%if $item.abstract%}{%$item.abstract|f_escape_xml%}{%else%}{%$item.title|f_escape_xml%}{%/if%}\n</a>\n</div>\n</div>\n{%/if%}\n</div>\n</li>\n{%/foreach%}\n</ul>\n</div>\n{%if $cnt > 1%}\n<div class="J-slides-btn slides_btn prev" data-skipTo="prev"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em></div>\n<div class="J-slides-btn slides_btn next" data-skipTo="next"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em></div>\n{%/if%}\n</div>\n'),c=t.lemmaId,d=t.lemmaTitle;var e={lemmaId:t.lemmaId,limit:5};b||u.ajax({url:"/api/tashuo/gettashuolist",type:"GET",dataType:"json",data:e,success:function(t){0===t.errno&&t.data&&t.data.length>0&&(b=!0,i(t))}})};a.exports=T});
;/*!wiki-lemma:widget/promotion/serviceProduct/serviceProduct.es.js*/
define("wiki-lemma:widget/promotion/serviceProduct/serviceProduct.es",function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function a(e){this.options=e,this.getData()}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},n=e("wiki-common:widget/lib/jquery/jquery"),s=l(n),o=e("wiki-common:widget/lib/jsmart/jsmart"),d=l(o),c=e("wiki-lemma:widget/tools/clickstream/clickstream"),m=l(c),u=e("wiki-lemma:widget/tools/throttle/throttle.es"),p=l(u),f=new d["default"]('<div class="product-wrapper">\n{%if $enableScroll%}\n<div class="left-arrow toggle-arrow disabled-arrow"></div>\n{%/if%}\n<div class="product-list-wrapper {%if !$enableScroll%}disabled-scroll-wrapper{%/if%}">\n<div class="product-list">\n{%foreach $list as $index => $item%}\n<a class="product-item" href="{%$item.pc_url|f_escape_xml%}" target="_blank">\n<div class="product-cover" style="background-image:url({%$item.image|f_escape_xml%});"></div>\n<div class="product-info-wrapper">\n<div class="product-name">{%$item.name|f_escape_xml%}</div>\n<div class="product-info-bottom">\n<div class="info-bottom-left">\n<div class="product-price">\n<div class="product-present-price">\n<span class="price-unit">￥</span><span>{%$item.price|f_escape_xml%}</span>\n</div>\n{%if $item.withDiscount && $item.value%}\n<div class="product-original-price">\n<span class="price-unit">￥</span><span>{%$item.value|f_escape_xml%}</span>\n</div>\n{%/if%}\n</div>\n<div class="product-seller">服务由{%$item.sellerName|f_escape_xml%}提供</div>\n</div>\n<div class="info-bottom-right">\n<span class="buy-btn">购买</span>\n</div>\n</div>\n</div>\n</a>\n{%/foreach%}\n</div>\n</div>\n{%if $enableScroll%}\n<div class="right-arrow toggle-arrow"></div>\n{%/if%}\n</div>'),v="disabled-arrow";a.prototype={constructor:a,getData:function(){var e=this,t=this.options.lemmaInfo,i=t.newLemmaId,l=t.lemmaTitle;m["default"].logActEvent({page:"lemma",act_type:"book-request",lemmaId:i}),s["default"].ajax({url:"/api/wikiui/getrelatedbusiness",data:{eid:0,word:i,platform:"pc",url:"https://baike.baidu.com/item/"+l+"/"+i,adpage:"pcbook"}}).done(function(t){var l=t.errno,a=t.data;if(0===l&&a.ad_natural_list&&a.ad_natural_list.length)try{var r=JSON.parse(a.ad_natural_list);if(r.length){m["default"].logActEvent({page:"lemma",act_type:"book-request-success",lemmaId:i});var n=e.filterData(r),s=e.formatData(n).slice(0,5);s.length&&(e.productList=s,e.currentIndex=0,e.render(s),e.setElems(),e.bindClickEvents(),s.length>2&&e.bindScrollEvents(),e.bindExposeLog())}}catch(o){}})},filterData:function(e){var t=e.filter(function(e){var t=e.pc_url,i=e.image,l=e.name,a=e.price,r=e.sellerName;return t&&i&&l&&a&&r});return t},formatData:function(e){var t=e.map(function(e){return r({},e,{withDiscount:Number(e.price)<Number(e.value)})});return t},render:function(e){s["default"]("#serviceProduct").append(f.fetch({list:e,enableScroll:e.length>2})),m["default"].logViewElDraw({page:"lemma",element:"book-module",renderNum:e.length,lemmaId:this.options.lemmaInfo.newLemmaId})},setElems:function(){var e=s["default"]("#serviceProduct"),t=e.find(".left-arrow"),i=e.find(".right-arrow"),l=e.find(".product-list");this.elems={$wrapper:e,$leftArrow:t,$rightArrow:i,$list:l}},bindClickEvents:function(){var e=this,t=this.options.lemmaInfo,i=t.newLemmaId,l=t.lemmaTitle;this.elems.$list.find(".product-item").on("click",function(){var t=s["default"](this).index(),a=e.productList[t],r=a.price,n=a.value,o=a.sellerName,d=a.product_id,c=a.name;m["default"].logActClick({page:"lemma",element:"book-module-item",index:t,lemmaId:i,lemmaTitle:l,price:r,value:n,productName:c,sellerName:o,pid:d})})},bindScrollEvents:function(){var e=this,t=this.elems,i=t.$leftArrow,l=t.$rightArrow;i.on("click",function(){i.hasClass("."+v)||e.scroll("right")}),l.on("click",function(){l.hasClass("."+v)||e.scroll("left")});var a=new Array(this.productList.length);a[0]=a[1]=!0,this.exposedArr=a},scroll:function(e){var t=this.options.lemmaInfo,i=t.newLemmaId,l=t.lemmaTitle,a=this.getNewIndex(e),r=375*a,n=this.elems.$list;n.css("transform","translateX(-"+r+"px)"),this.currentIndex=a,this.handleBtnDisabled();for(var s=a;a+2>s;s++)if(!this.exposedArr[s]){var o=this.productList[s],d=o.price,c=o.value,u=o.sellerName,p=o.product_id,f=o.name;m["default"].logViewEl({page:"lemma",element:"book-module-item",index:s,lemmaId:i,lemmaTitle:l,price:d,value:c,productName:f,sellerName:u,pid:p}),this.exposedArr[s]=!0}},getNewIndex:function(e){var t=this.currentIndex,i=this.productList;return"left"===e?Math.min(t+2,i.length-2):Math.max(t-2,0)},handleBtnDisabled:function(){var e=this.elems,t=e.$leftArrow,i=e.$rightArrow,l=this.currentIndex,a=this.productList;l?t.removeClass(v):t.addClass(v),l+2===a.length?i.addClass(v):i.removeClass(v)},bindExposeLog:function(){var e=this,t=this.elems.$wrapper,i=s["default"](window),l=t.offset().top,a=t.height()/2,r=i.height(),n=i.scrollTop();r+n>l+a?this.logModuleExpose():!function(){var t=p["default"](function(){var n=i.scrollTop();r+n>l+a&&(e.logModuleExpose(),i.off("scroll",t))},200);i.on("scroll",t)}()},logModuleExpose:function(){var e=this.options.lemmaInfo,t=e.newLemmaId,i=e.lemmaTitle,l=this.productList.length;m["default"].logViewEl({page:"lemma",element:"book-module",renderNum:l,lemmaId:t,lemmaTitle:i});for(var a=0;a<Math.min(l,2);a++){var r=this.productList[a],n=r.price,s=r.value,o=r.sellerName,d=r.product_id,c=r.name;m["default"].logViewEl({page:"lemma",element:"book-module-item",index:a,lemmaId:t,lemmaTitle:i,price:n,value:s,sellerName:o,productName:c,pid:d})}}},t["default"]=a,i.exports=t["default"]});
;/*!wiki-lemma:widget/promotion/slide/slide.js*/
define("wiki-lemma:widget/promotion/slide/slide",function(e,a,i){var n=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/lib/jsmart/jsmart"),r=e("wiki-common:widget/ui/pager/horPager/horPager"),t=e("wiki-common:widget/ui/carousel/carousel"),s=new o('{%foreach $data as $ad%}\n<dd class="wgt_carousel_aniUnit">\n<a href="{%$ad.url|f_escape_xml%}" target="_blank" ad-type="slideAd" title="{%$ad.text|f_escape_xml%}" nslog-type="10002202" nslog-params=\'{"adId":"{%$ad.adId|f_escape_xml%}", "adTitle":"{%$ad.name|f_escape_xml%}", "adPos": 2}\'>\n<img src="{%$ad.picUrl|f_escape_xml%}" />\n</a>\n</dd>\n{%/foreach%}');i.exports=function(e){var a=s.fetch({data:e});if(n(".lemmaWgt-promotion-slide .promotion_viewport dl").html(a),e.length>1){var i=new t({container:n(".lemmaWgt-promotion-slide .promotion_viewport dl"),aniUnitSize:{width:270,height:260},autoPlayInterval:5e3,aniConfig:{duration:400,direction:"left"},onAniComplete:function(e){o.reset({curIndex:e+1})}}),o=new r({pContainer:n(".lemmaWgt-promotion-slide .promotion_viewport_pager"),template:'<span class="pTagBox">\n<a href="javascript:;" class="pTag prev" p-index="{%$pagers.prev.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em></a><span>{%foreach $pagers.normal as $pager%}<a href="javascript:;" class="dot pTag{%if $pager.state == "cur"%} cur{%/if%}"{%if $pager.state != "cur"%} p-index="{%$pager.index|f_escape_xml%}"{%/if%}><em class="cmn-icon cmn-icons cmn-icons_userbar-new"></em></a>{%/foreach%}</span><a href="javascript:;" class="pTag next" p-index="{%$pagers.next.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em></a>\n</span>',conTotalCount:e.length,conPerPage:1,pMaxCount:e.length,onIndexChange:function(e,a){n(a.currentTarget).hasClass("prev")?i.play(-1):n(a.currentTarget).hasClass("next")?i.play():i.play(e-1)}});o.show()}else n(".lemmaWgt-promotion-slide .promotion_viewport_pager").remove();n(".lemmaWgt-promotion-slide").show()}});
;/*!wiki-lemma:widget/promotion/topAd/topAd.js*/
define("wiki-lemma:widget/promotion/topAd/topAd",function(o,t,e){var a=o("wiki-common:widget/lib/jquery/jquery"),n=o("wiki-common:widget/component/nslog/nslog");e.exports=function(o){var o=o[0],t='<a target="_blank" class="topA" ad-type="topAd" nslog-type="10002202" nslog-params=\'{"adId":"'+o.adId+'", "adTitle": "'+o.name+'", "adPos": 3}\' href="'+o.url+'" title="'+o.text+'"style="background-image:url('+o.picUrl+');"></a>';a(".header-wrapper .layout").append(a(t)),n(40000303),a("body").on("click",".topA",function(){n(40000304)})}});
;/*!wiki-lemma:widget/promotion/unionAd/unionAd.js*/
define("wiki-lemma:widget/promotion/unionAd/unionAd",function(n,i,e){function o(n,i){var e={adId:"u1997633",sClassName:"union"};"testA"===i?e.adId="u6273274":"contrast"===i&&(e.adId="u6273283"),t(n,e,i),r(n).addClass(e.sClassName)}function t(n,i,e){var o=r(n);o.find(".union-content").attr("id","cpro_"+i.adId),(window.cproArray=window.cproArray||[]).push({id:i.adId}),(window.cproStyleApi=window.cproStyleApi||{})[i.adId]={wn:2,hn:8},a.bklog("netunionRequest"),r.getScript("https://cpro.baidustatic.com/cpro/ui/c.js",function(){o.css("display","block"),setTimeout(function(){"testA"!==e&&u(o,"netunion"),d(o,e)},2500)})}function d(n,i){var e=n.find(".union-content").children().filter("iframe");if(e.length){a.bklog("netunionView");var o={secondId:-1,group:i};s.sendPv("lemma_page_netunion_show",o);var t=new c({interval:100});t.addListener(e[0],function(){a.bklog("netunionExposed"),t.removeListener(e[0])})}}var r=n("wiki-common:widget/lib/jquery/jquery"),c=n("wiki-lemma:widget/tools/inSightDetector/inSightDetector.es"),a=n("wiki-lemma:widget/tools/bkclick/bkclick"),s=n("wiki-common:widget/component/superLogger/superLogger.es"),u=n("wiki-lemma:widget/promotion/fengchao/setAdScrollEvent");e.exports=o});
;/*!wiki-lemma:widget/promotion/unionAdFromPs/unionAdFromPs.js*/
define("wiki-lemma:widget/promotion/unionAdFromPs/unionAdFromPs",function(e,n,i){function o(e){var n=t("#unionAd_fromPs");return e.adManager&&"undefined"!=typeof e.adManager.pcNetUnionSearchRecommend?n.remove():void t.getScript("https://su.bdimg.com/static/dspui/js/ls.js",function(){setTimeout(function(){n.find("iframe").length<0&&n.remove()},2e3)})}var t=e("wiki-common:widget/lib/jquery/jquery");i.exports=o});
;/*!wiki-lemma:widget/promotion/vbaike/vbaike.js*/
define("wiki-lemma:widget/promotion/vbaike/vbaike",function(e,a,n){var i=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/lib/jsmart/jsmart"),t=e("wiki-common:widget/ui/pager/horPager/horPager"),r=e("wiki-common:widget/ui/carousel/carousel"),m=new o('{%foreach $data as $ad%}\n<dd class="wgt_carousel_aniUnit">\n<a href="{%$ad.url|f_escape_xml%}" target="_blank" ad-type="vbaikeAd" title="{%$ad.text|f_escape_xml%}" nslog-type="10002202" nslog-params=\'{"adId":"{%$ad.adId|f_escape_xml%}", "adTitle":"{%$ad.name|f_escape_xml%}", "adPos": 1}\'>\n<img src="{%$ad.picUrl|f_escape_xml%}" />\n</a>\n</dd>\n{%/foreach%}');n.exports=function(e){var a=m.fetch({data:e});if(i(".lemmaWgt-promotion-vbaike .promotion_viewport dl").html(a),e.length>1){var n=new r({container:i(".lemmaWgt-promotion-vbaike .promotion_viewport dl"),aniUnitSize:{width:268,height:152},autoPlayInterval:5e3,aniConfig:{duration:400,direction:"left"},onAniComplete:function(e){o.reset({curIndex:e+1})}}),o=new t({pContainer:i(".lemmaWgt-promotion-vbaike .promotion_viewport_pager"),template:'\n<span class="pTagBox">\n<a href="javascript:;" class="pTag prev" p-index="{%$pagers.prev.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-left"></em></a>\n<a href="javascript:;" class="pTag next" p-index="{%$pagers.next.index|f_escape_xml%}"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_arrow-right"></em></a>\n</span>\n',conTotalCount:e.length,conPerPage:1,pMaxCount:e.length,onIndexChange:function(e,a){i(a.currentTarget).hasClass("prev")?n.play(-1):i(a.currentTarget).hasClass("next")?n.play():n.play(e-1)}});o.show()}i(".lemmaWgt-promotion-vbaike").show()}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/extendedJsmart.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/extendedJsmart",function(e,i,n){var t=e("wiki-common:widget/lib/jsmart/jsmart");t.prototype.registerPlugin("modifier","number2cn",function(e){var i=parseInt(e,10);return isNaN(i)?"":i>=1e4?((i-500)/1e4).toFixed(1).replace(".0","")+"万":e}),n.exports=t});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/formatListFun.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/formatListFun",function(e,a,i){i.exports={getMockResponse:function(e,a){for(var i=[],m=e.data.list,r=0;r<m.length;r++){var l=[],t=m[r];if(t.lemmas)for(var s=0;s<t.lemmas.length;s++)l[s]={lemmaId:t.lemmas[s].lemmaId,lemmaTitle:t.lemmas[s].lemmaTitle,lemmaDesc:t.lemmas[s].lemmaDesc};var d=t.content||{},n=d.playUrl||{},o=t.dynamic||{},c=t.relation||{},p=d.ttg||[],u=!1;p.indexOf("second_baike")>=0&&(u=!0),i[r]={bjhAppId:d.bjhAppId,coverPic:d&&d.cover?{imageShareUrl:d.cover.shareUrl,imageUrl:d.cover.url,src:d.cover.src}:{},createUk:t.uk,createUname:t.uname,intPlayTime:d.duration,playTime:d.duration,isPay:t.isPay,isVertical:d.isVertical,lemmaList:l,shouldSkipTTG:u,mediaId:d.mediaId,miniPlayUrl:{hls:n.mini_hls,mp4:n.mini_mp4},playUrl:n.hls,playMp4Url:n.mp4,nid:d.nid,vid:d.vid||d.nid,playNum:o.viewCounts,recType:c.desc,recCategory:c.type,secondId:t.secondId,shareLemmaId:l[0]?l[0].lemmaId:"",shareLemmaTitle:l[0]?l[0].lemmaTitle:"",subTitle:d.subTitle,threadId:d.threadId,title:d.title,topic:t.topics,uk:t.uk,source:t.source}}var h={errmsg:e.errmsg,errno:e.errno,from:e.data.from,hasMore:e.data.hasMore,list:i,nextPn:a+1,eid:e.data.eid};return h}}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/logMap.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/logMap",function(l,i,o){o.exports={pv:"10002501",click:"10002502",dialogClose:"10002503",dialogListClick:"10002504",play:"10002505",complete:"10002506",lemmaPv:"10002507",miniPlayerClick:"10002508",uploadShow:"10800002",uploadClick:"10800003"}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom",function(e,t,n){"use strict";function o(e,t){return window.getComputedStyle(e)[t]}function r(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function c(e,t){for(var n in t){var o=t[n];"number"==typeof o&&(o=o.toString()+"px"),e.style[n]=o}return e}var i={};i.e=function(e,t){var n=document.createElement(e);return n.className=t,n},i.appendTo=function(e,t){return t.appendChild(e),e},i.css=function(e,t,n){return"object"==typeof t?c(e,t):"undefined"==typeof n?o(e,t):r(e,t,n)},i.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},i.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},i.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return i.matches(e,t)})},n.exports=i});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class",function(s,i){"use strict";function c(s,i){var c=s.className.split(" ");c.indexOf(i)<0&&c.push(i),s.className=c.join(" ")}function a(s,i){var c=s.className.split(" "),a=c.indexOf(i);a>=0&&c.splice(a,1),s.className=c.join(" ")}i.add=function(s,i){s.classList?s.classList.add(i):c(s,i)},i.remove=function(s,i){s.classList?s.classList.remove(i):a(s,i)},i.list=function(s){return s.classList?Array.prototype.slice.apply(s.classList):s.className.split(" ")}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper",function(t,e){"use strict";var n=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class"),o=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom");e.toInt=function(t){return parseInt(t,10)||0},e.clone=function(t){if(null===t)return null;if("object"==typeof t){var e={};for(var n in t)e[n]=this.clone(t[n]);return e}return t},e.extend=function(t,e){var n=this.clone(t);for(var o in e)n[o]=this.clone(e[o]);return n},e.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},e.removePsClasses=function(t){for(var e=n.list(t),o=0;o<e.length;o++){var i=e[o];0===i.indexOf("ps-")&&n.remove(t,i)}},e.outerWidth=function(t){return this.toInt(o.css(t,"width"))+this.toInt(o.css(t,"paddingLeft"))+this.toInt(o.css(t,"paddingRight"))+this.toInt(o.css(t,"borderLeftWidth"))+this.toInt(o.css(t,"borderRightWidth"))},e.startScrolling=function(t,e){n.add(t,"ps-in-scrolling"),"undefined"!=typeof e?n.add(t,"ps-"+e):(n.add(t,"ps-x"),n.add(t,"ps-y"))},e.stopScrolling=function(t,e){n.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?n.remove(t,"ps-"+e):(n.remove(t,"ps-x"),n.remove(t,"ps-y"))},e.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/default-setting.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/default-setting",function(e,l,o){"use strict";o.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/event-manager.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/event-manager",function(e,n,t){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,n){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(n),this.element.addEventListener(e,n,!1)},i.prototype.unbind=function(e,n){var t="undefined"!=typeof n;this.events[e]=this.events[e].filter(function(i){return t&&i!==n?!0:(this.element.removeEventListener(e,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var n=this.eventElements.filter(function(n){return n.element===e})[0];return"undefined"==typeof n&&(n=new i(e),this.eventElements.push(n)),n},o.prototype.bind=function(e,n,t){this.eventElement(e).bind(n,t)},o.prototype.unbind=function(e,n,t){this.eventElement(e).unbind(n,t)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,n,t){var i=this.eventElement(e),o=function(e){i.unbind(n,o),t(e)};i.bind(n,o)},t.exports=o});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/guid.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/guid",function(n,t,r){"use strict";r.exports=function(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}}()});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances",function(l,t){"use strict";function r(l){function t(){i.add(l,"ps-focus")}function r(){i.remove(l,"ps-focus")}var o=this;o.settings=b.clone(c),o.containerWidth=null,o.containerHeight=null,o.contentWidth=null,o.contentHeight=null,o.isRtl="rtl"===a.css(l,"direction"),o.isNegativeScroll=function(){var t=l.scrollLeft,r=null;return l.scrollLeft=-1,r=l.scrollLeft<0,l.scrollLeft=t,r}(),o.negativeScrollAdjustment=o.isNegativeScroll?l.scrollWidth-l.clientWidth:0,o.event=new n,o.ownerDocument=l.ownerDocument||document,o.scrollbarXRail=a.appendTo(a.e("div","ps-scrollbar-x-rail"),l),o.scrollbarX=a.appendTo(a.e("div","ps-scrollbar-x"),o.scrollbarXRail),o.scrollbarX.setAttribute("tabindex",0),o.event.bind(o.scrollbarX,"focus",t),o.event.bind(o.scrollbarX,"blur",r),o.scrollbarXActive=null,o.scrollbarXWidth=null,o.scrollbarXLeft=null,o.scrollbarXBottom=b.toInt(a.css(o.scrollbarXRail,"bottom")),o.isScrollbarXUsingBottom=o.scrollbarXBottom===o.scrollbarXBottom,o.scrollbarXTop=o.isScrollbarXUsingBottom?null:b.toInt(a.css(o.scrollbarXRail,"top")),o.railBorderXWidth=b.toInt(a.css(o.scrollbarXRail,"borderLeftWidth"))+b.toInt(a.css(o.scrollbarXRail,"borderRightWidth")),a.css(o.scrollbarXRail,"display","block"),o.railXMarginWidth=b.toInt(a.css(o.scrollbarXRail,"marginLeft"))+b.toInt(a.css(o.scrollbarXRail,"marginRight")),a.css(o.scrollbarXRail,"display",""),o.railXWidth=null,o.railXRatio=null,o.scrollbarYRail=a.appendTo(a.e("div","ps-scrollbar-y-rail"),l),o.scrollbarY=a.appendTo(a.e("div","ps-scrollbar-y"),o.scrollbarYRail),o.scrollbarY.setAttribute("tabindex",0),o.event.bind(o.scrollbarY,"focus",t),o.event.bind(o.scrollbarY,"blur",r),o.scrollbarYActive=null,o.scrollbarYHeight=null,o.scrollbarYTop=null,o.scrollbarYRight=b.toInt(a.css(o.scrollbarYRail,"right")),o.isScrollbarYUsingRight=o.scrollbarYRight===o.scrollbarYRight,o.scrollbarYLeft=o.isScrollbarYUsingRight?null:b.toInt(a.css(o.scrollbarYRail,"left")),o.scrollbarYOuterWidth=o.isRtl?b.outerWidth(o.scrollbarY):null,o.railBorderYWidth=b.toInt(a.css(o.scrollbarYRail,"borderTopWidth"))+b.toInt(a.css(o.scrollbarYRail,"borderBottomWidth")),a.css(o.scrollbarYRail,"display","block"),o.railYMarginHeight=b.toInt(a.css(o.scrollbarYRail,"marginTop"))+b.toInt(a.css(o.scrollbarYRail,"marginBottom")),a.css(o.scrollbarYRail,"display",""),o.railYHeight=null,o.railYRatio=null}function o(l){return"undefined"==typeof l.dataset?l.getAttribute("data-ps-id"):l.dataset.psId}function e(l,t){"undefined"==typeof l.dataset?l.setAttribute("data-ps-id",t):l.dataset.psId=t}function s(l){"undefined"==typeof l.dataset?l.removeAttribute("data-ps-id"):delete l.dataset.psId}var i=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class"),a=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),c=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/default-setting"),n=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/event-manager"),d=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/guid"),b=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),u={};t.add=function(l){var t=d();return e(l,t),u[t]=new r(l),u[t]},t.remove=function(l){delete u[o(l)],s(l)},t.get=function(l){return u[o(l)]}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/destroy.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/destroy",function(e,o,l){"use strict";var r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),s=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances");l.exports=function(e){var o=c.get(e);o&&(o.event.unbindAll(),r.remove(o.scrollbarX),r.remove(o.scrollbarY),r.remove(o.scrollbarXRail),r.remove(o.scrollbarYRail),s.removePsClasses(e),c.remove(e))}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll",function(t,e,n){"use strict";var c,o,i=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),s=document.createEvent("Event"),r=document.createEvent("Event"),l=document.createEvent("Event"),a=document.createEvent("Event"),d=document.createEvent("Event"),v=document.createEvent("Event"),p=document.createEvent("Event"),E=document.createEvent("Event"),u=document.createEvent("Event"),f=document.createEvent("Event");s.initEvent("ps-scroll-up",!0,!0),r.initEvent("ps-scroll-down",!0,!0),l.initEvent("ps-scroll-left",!0,!0),a.initEvent("ps-scroll-right",!0,!0),d.initEvent("ps-scroll-y",!0,!0),v.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),E.initEvent("ps-x-reach-end",!0,!0),u.initEvent("ps-y-reach-start",!0,!0),f.initEvent("ps-y-reach-end",!0,!0),n.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===e&&0>=n&&(t.scrollTop=n=0,t.dispatchEvent(u)),"left"===e&&0>=n&&(t.scrollLeft=n=0,t.dispatchEvent(p));var h=i.get(t);"top"===e&&n>=h.contentHeight-h.containerHeight&&(t.scrollTop=n=h.contentHeight-h.containerHeight,t.dispatchEvent(f)),"left"===e&&n>=h.contentWidth-h.containerWidth&&(t.scrollLeft=n=h.contentWidth-h.containerWidth,t.dispatchEvent(E)),c||(c=t.scrollTop),o||(o=t.scrollLeft),"top"===e&&c>n&&t.dispatchEvent(s),"top"===e&&n>c&&t.dispatchEvent(r),"left"===e&&o>n&&t.dispatchEvent(l),"left"===e&&n>o&&t.dispatchEvent(a),"top"===e&&(t.scrollTop=c=n,t.dispatchEvent(d)),"left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(v))}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry",function(t,l,r){"use strict";function e(t,l){return t.settings.minScrollbarLength&&(l=Math.max(l,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(l=Math.min(l,t.settings.maxScrollbarLength)),l}function i(t,l){var r={width:l.railXWidth};r.left=l.isRtl?l.negativeScrollAdjustment+t.scrollLeft+l.containerWidth-l.contentWidth:t.scrollLeft,l.isScrollbarXUsingBottom?r.bottom=l.scrollbarXBottom-t.scrollTop:r.top=l.scrollbarXTop+t.scrollTop,c.css(l.scrollbarXRail,r);var e={top:t.scrollTop,height:l.railYHeight};l.isScrollbarYUsingRight?e.right=l.isRtl?l.contentWidth-(l.negativeScrollAdjustment+t.scrollLeft)-l.scrollbarYRight-l.scrollbarYOuterWidth:l.scrollbarYRight-t.scrollLeft:e.left=l.isRtl?l.negativeScrollAdjustment+t.scrollLeft+2*l.containerWidth-l.contentWidth-l.scrollbarYLeft-l.scrollbarYOuterWidth:l.scrollbarYLeft+t.scrollLeft,c.css(l.scrollbarYRail,e),c.css(l.scrollbarX,{left:l.scrollbarXLeft,width:l.scrollbarXWidth-l.railBorderXWidth}),c.css(l.scrollbarY,{top:l.scrollbarYTop,height:l.scrollbarYHeight-l.railBorderYWidth})}var o=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class"),c=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),s=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),a=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),n=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");r.exports=function(t){var l=a.get(t);l.containerWidth=t.clientWidth,l.containerHeight=t.clientHeight,l.contentWidth=t.scrollWidth,l.contentHeight=t.scrollHeight;var r;t.contains(l.scrollbarXRail)||(r=c.queryChildren(t,".ps-scrollbar-x-rail"),r.length>0&&r.forEach(function(t){c.remove(t)}),c.appendTo(l.scrollbarXRail,t)),t.contains(l.scrollbarYRail)||(r=c.queryChildren(t,".ps-scrollbar-y-rail"),r.length>0&&r.forEach(function(t){c.remove(t)}),c.appendTo(l.scrollbarYRail,t)),!l.settings.suppressScrollX&&l.containerWidth+l.settings.scrollXMarginOffset<l.contentWidth?(l.scrollbarXActive=!0,l.railXWidth=l.containerWidth-l.railXMarginWidth,l.railXRatio=l.containerWidth/l.railXWidth,l.scrollbarXWidth=54,l.scrollbarXLeft=s.toInt((l.negativeScrollAdjustment+t.scrollLeft)*(l.railXWidth-l.scrollbarXWidth)/(l.contentWidth-l.containerWidth))):l.scrollbarXActive=!1,!l.settings.suppressScrollY&&l.containerHeight+l.settings.scrollYMarginOffset<l.contentHeight?(l.scrollbarYActive=!0,l.railYHeight=l.containerHeight-l.railYMarginHeight,l.railYRatio=l.containerHeight/l.railYHeight,l.scrollbarYHeight=e(l,s.toInt(l.railYHeight*l.containerHeight/l.contentHeight)),l.scrollbarYTop=s.toInt(t.scrollTop*(l.railYHeight-l.scrollbarYHeight)/(l.contentHeight-l.containerHeight))):l.scrollbarYActive=!1,l.scrollbarXLeft>=l.railXWidth-l.scrollbarXWidth&&(l.scrollbarXLeft=l.railXWidth-l.scrollbarXWidth),l.scrollbarYTop>=l.railYHeight-l.scrollbarYHeight&&(l.scrollbarYTop=l.railYHeight-l.scrollbarYHeight),i(t,l),l.scrollbarXActive?o.add(t,"ps-active-x"):(o.remove(t,"ps-active-x"),l.scrollbarXWidth=0,l.scrollbarXLeft=0,n(t,"left",0)),l.scrollbarYActive?o.add(t,"ps-active-y"):(o.remove(t,"ps-active-y"),l.scrollbarYHeight=0,l.scrollbarYTop=0,n(t,"top",0)),l.settings.updateView&&l.settings.updateView()}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/click-rail.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/click-rail",function(t,e,i){"use strict";function n(t,e){function i(t){return t.getBoundingClientRect()}var n=window.Event.prototype.stopPropagation.bind;e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",n),e.event.bind(e.scrollbarYRail,"click",function(n){var l=o.toInt(e.scrollbarYHeight/2),a=e.railYRatio*(n.pageY-window.pageYOffset-i(e.scrollbarYRail).top-l),s=e.railYRatio*(e.railYHeight-e.scrollbarYHeight),g=a/s;0>g?g=0:g>1&&(g=1),c(t,"top",(e.contentHeight-e.containerHeight)*g),r(t),n.stopPropagation()}),e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",n),e.event.bind(e.scrollbarXRail,"click",function(n){var l=o.toInt(e.scrollbarXWidth/2),a=e.railXRatio*(n.pageX-window.pageXOffset-i(e.scrollbarXRail).left-l),s=e.railXRatio*(e.railXWidth-e.scrollbarXWidth),g=a/s;0>g?g=0:g>1&&(g=1),c(t,"left",(e.contentWidth-e.containerWidth)*g-e.negativeScrollAdjustment),r(t),n.stopPropagation()})}var o=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),l=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),r=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),c=t("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");i.exports=function(t){var e=l.get(t);n(t,e)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar",function(e,o,t){"use strict";function n(e,o){function t(t){var l=n+t*o.railXRatio,r=Math.max(0,o.scrollbarXRail.getBoundingClientRect().left)+o.railXRatio*(o.railXWidth-o.scrollbarXWidth);o.scrollbarXLeft=0>l?0:l>r?r:l;var a=i.toInt(o.scrollbarXLeft*(o.contentWidth-o.containerWidth)/(o.containerWidth-o.railXRatio*o.scrollbarXWidth))-o.negativeScrollAdjustment;s(e,"left",a)}var n=null,l=null,a=function(o){t(o.pageX-l),c(e),o.stopPropagation(),o.preventDefault()},u=function(){i.stopScrolling(e,"x"),o.event.unbind(o.ownerDocument,"mousemove",a)};o.event.bind(o.scrollbarX,"mousedown",function(t){l=t.pageX,n=i.toInt(r.css(o.scrollbarX,"left"))*o.railXRatio,i.startScrolling(e,"x"),o.event.bind(o.ownerDocument,"mousemove",a),o.event.once(o.ownerDocument,"mouseup",u),t.stopPropagation(),t.preventDefault()})}function l(e,o){function t(t){var l=n+t*o.railYRatio,r=Math.max(0,o.scrollbarYRail.getBoundingClientRect().top)+o.railYRatio*(o.railYHeight-o.scrollbarYHeight);o.scrollbarYTop=0>l?0:l>r?r:l;var a=i.toInt(o.scrollbarYTop*(o.contentHeight-o.containerHeight)/(o.containerHeight-o.railYRatio*o.scrollbarYHeight));s(e,"top",a)}var n=null,l=null,a=function(o){t(o.pageY-l),c(e),o.stopPropagation(),o.preventDefault()},u=function(){i.stopScrolling(e,"y"),o.event.unbind(o.ownerDocument,"mousemove",a)};o.event.bind(o.scrollbarY,"mousedown",function(t){l=t.pageY,n=i.toInt(r.css(o.scrollbarY,"top"))*o.railYRatio,i.startScrolling(e,"y"),o.event.bind(o.ownerDocument,"mousemove",a),o.event.once(o.ownerDocument,"mouseup",u),t.stopPropagation(),t.preventDefault()})}var r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),a=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),s=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");t.exports=function(e){var o=a.get(e);n(e,o),l(e,o)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/keyboard.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/keyboard",function(e,t,n){"use strict";function r(e,t){function n(n,r){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&r>0||o>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var c=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===c&&0>n||c>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var r=!1;t.event.bind(e,"mouseenter",function(){r=!0}),t.event.bind(e,"mouseleave",function(){r=!1});var i=!1;t.event.bind(t.ownerDocument,"keydown",function(s){if(!s.isDefaultPrevented||!s.isDefaultPrevented()){var f=c.matches(t.scrollbarX,":focus")||c.matches(t.scrollbarY,":focus");if(r||f){var u=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(u){for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(o.isEditable(u))return}var d=0,m=0;switch(s.which){case 37:d=-30;break;case 38:m=30;break;case 39:d=30;break;case 40:m=-30;break;case 33:m=90;break;case 32:m=s.shiftKey?90:-90;break;case 34:m=-90;break;case 35:m=s.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:m=s.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-m),l(e,"left",e.scrollLeft+d),a(e),i=n(d,m),i&&s.preventDefault()}}})}var o=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),a=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),l=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");n.exports=function(e){var t=i.get(e);r(e,t)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/mouse-wheel.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/mouse-wheel",function(e,t,l){"use strict";function n(e,t){function l(l,n){var o=e.scrollTop;if(0===l){if(!t.scrollbarYActive)return!1;if(0===o&&n>0||o>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var r=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===r&&0>l||r>=t.contentWidth-t.containerWidth&&l>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,l=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof l)&&(t=-1*e.wheelDeltaX/6,l=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,l*=10),t!==t&&l!==l&&(t=0,l=e.wheelDelta),[t,l]}function o(t,l){var n=e.querySelector("textarea:hover");if(n){var o=n.scrollHeight-n.clientHeight;if(o>0&&!(0===n.scrollTop&&l>0||n.scrollTop===o&&0>l))return!0;var r=n.scrollLeft-n.clientWidth;if(r>0&&!(0===n.scrollLeft&&0>t||n.scrollLeft===r&&t>0))return!0}return!1}function s(s){var a=n(s),f=a[0],d=a[1];o(f,d)||(c=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?i(e,"top",e.scrollTop-d*t.settings.wheelSpeed):i(e,"top",e.scrollTop+f*t.settings.wheelSpeed),c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(f?i(e,"left",e.scrollLeft+f*t.settings.wheelSpeed):i(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),c=!0):(i(e,"top",e.scrollTop-d*t.settings.wheelSpeed),i(e,"left",e.scrollLeft+f*t.settings.wheelSpeed)),r(e),c=c||l(f,d),c&&(s.stopPropagation(),s.preventDefault()))}var c=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",s):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var o=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");l.exports=function(e){var t=o.get(e);n(e,t)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/native-scroll.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/native-scroll",function(e,n,c){"use strict";function o(e,n){n.event.bind(e,"scroll",function(){i(e)})}var t=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry");c.exports=function(e){var n=t.get(e);o(e,n)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/selection.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/selection",function(e,t,o){"use strict";function n(e,t){function o(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function n(){f||(f=setInterval(function(){return i.get(e)?(r(e,"top",e.scrollTop+a.top),r(e,"left",e.scrollLeft+a.left),void c(e)):void clearInterval(f)},50))}function s(){f&&(clearInterval(f),f=null),l.stopScrolling(e)}var f=null,a={top:0,left:0},g=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(o())?g=!0:(g=!1,s())}),t.event.bind(window,"mouseup",function(){g&&(g=!1,s())}),t.event.bind(window,"mousemove",function(t){if(g){var o={x:t.pageX,y:t.pageY},i={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};o.x<i.left+3?(a.left=-5,l.startScrolling(e,"x")):o.x>i.right-3?(a.left=5,l.startScrolling(e,"x")):a.left=0,o.y<i.top+3?(a.top=i.top+3-o.y<5?-5:-20,l.startScrolling(e,"y")):o.y>i.bottom-3?(a.top=o.y-i.bottom+3<5?5:20,l.startScrolling(e,"y")):a.top=0,0===a.top&&0===a.left?s():n()}})}var l=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");o.exports=function(e){var t=i.get(e);n(e,t)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/touch.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/touch",function(e,n,t){"use strict";function o(e,n,t,o){function c(t,o){var i=e.scrollTop,r=e.scrollLeft,a=Math.abs(t),c=Math.abs(o);if(c>a){if(0>o&&i===n.contentHeight-n.containerHeight||o>0&&0===i)return!n.settings.swipePropagation}else if(a>c&&(0>t&&r===n.contentWidth-n.containerWidth||t>0&&0===r))return!n.settings.swipePropagation;return!0}function l(n,t){a(e,"top",e.scrollTop-t),a(e,"left",e.scrollLeft-n),r(e)}function s(){M=!0}function p(){M=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function g(e){if(u(e)){P=!0;var n=d(e);f.pageX=n.pageX,f.pageY=n.pageY,b=(new Date).getTime(),null!==h&&clearInterval(h),e.stopPropagation()}}function v(e){if(!M&&P&&u(e)){var n=d(e),t={pageX:n.pageX,pageY:n.pageY},o=t.pageX-f.pageX,i=t.pageY-f.pageY;l(o,i),f=t;var r=(new Date).getTime(),a=r-b;a>0&&(m.x=o/a,m.y=i/a,b=r),c(o,i)&&(e.stopPropagation(),e.preventDefault())}}function w(){!M&&P&&(P=!1,clearInterval(h),h=setInterval(function(){return i.get(e)?Math.abs(m.x)<.01&&Math.abs(m.y)<.01?void clearInterval(h):(l(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(h)},10))}var f={},b=0,m={},h=null,M=!1,P=!1;t&&(n.event.bind(window,"touchstart",s),n.event.bind(window,"touchend",p),n.event.bind(e,"touchstart",g),n.event.bind(e,"touchmove",v),n.event.bind(e,"touchend",w)),o&&(window.PointerEvent?(n.event.bind(window,"pointerdown",s),n.event.bind(window,"pointerup",p),n.event.bind(e,"pointerdown",g),n.event.bind(e,"pointermove",v),n.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(n.event.bind(window,"MSPointerDown",s),n.event.bind(window,"MSPointerUp",p),n.event.bind(e,"MSPointerDown",g),n.event.bind(e,"MSPointerMove",v),n.event.bind(e,"MSPointerUp",w)))}var i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),a=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");t.exports=function(e,n,t){var r=i.get(e);o(e,r,n,t)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/initialize.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/initialize",function(e,n,o){"use strict";var l=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/class"),s=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),t=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),i=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/click-rail"),r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar"),a=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/keyboard"),d=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/mouse-wheel"),m=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/native-scroll"),g=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/selection"),w=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/handler/touch");o.exports=function(e,n){n="object"==typeof n?n:{},l.add(e,"ps-container");var o=c.add(e);o.settings=s.extend(o.settings,n),l.add(e,"ps-theme-"+o.settings.theme),i(e),r(e),d(e),m(e),o.settings.useSelectionScroll&&g(e),(s.env.supportsTouch||s.env.supportsIePointer)&&w(e,s.env.supportsTouch,s.env.supportsIePointer),o.settings.useKeyboard&&a(e),t(e)}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update",function(l,s,e){"use strict";var o=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/dom"),c=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/lib/helper"),i=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances"),r=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-geometry"),a=l("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update-scroll");e.exports=function(l){var s=i.get(l);s&&(s.negativeScrollAdjustment=s.isNegativeScroll?l.scrollWidth-l.clientWidth:0,o.css(s.scrollbarXRail,"display","block"),o.css(s.scrollbarYRail,"display","block"),s.railXMarginWidth=c.toInt(o.css(s.scrollbarXRail,"marginLeft"))+c.toInt(o.css(s.scrollbarXRail,"marginRight")),s.railYMarginHeight=c.toInt(o.css(s.scrollbarYRail,"marginTop"))+c.toInt(o.css(s.scrollbarYRail,"marginBottom")),o.css(s.scrollbarXRail,"display","none"),o.css(s.scrollbarYRail,"display","none"),r(l),a(l,"top",l.scrollTop),a(l,"left",l.scrollLeft),o.css(s.scrollbarXRail,"display",""),o.css(s.scrollbarYRail,"display",""))}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/main.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/main",function(e,i,n){var o=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/destroy"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/initialize"),l=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/update");n.exports={initialize:c,update:l,destroy:o}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/index.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/index",function(e,n,o){o.exports=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/main")});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/adaptor/global.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/adaptor/global",function(e){"use strict";var n=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/main");"function"==typeof define&&define.amd?define(n):(window.PerfectScrollbar=n,"undefined"==typeof window.Ps&&(window.Ps=n))});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/adaptor/jquery.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/adaptor/jquery",function(e,n,i){"use strict";function t(e){e.fn.perfectScrollbar=function(n){return this.each(function(){if("object"==typeof n||"undefined"==typeof n){var i=n;r.get(this)||o.initialize(this,i)}else{var t=n;"update"===t?o.update(this):"destroy"===t&&o.destroy(this)}return e(this)})}}var o=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/main"),r=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/src/js/plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],t);else{var s=window.jQuery?window.jQuery:window.$;"undefined"!=typeof s&&t(s)}i.exports=t});
;/*!wiki-lemma:node_modules/clipboard/dist/clipboard.js*/
define("wiki-lemma:node_modules/clipboard/dist/clipboard",function(t,e,n){!function(t,r){"object"==typeof e&&"object"==typeof n?n.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof e?e.ClipboardJS=r():t.ClipboardJS=r()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(e){return t[e]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t){function e(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}t.exports=e},function(t){function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function r(){o.off(t,r),e.apply(n,arguments)}var o=this;return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;for(r;o>r;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;a>i;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e},function(t,e,n){function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!u.string(e))throw new TypeError("Second argument must be a String");if(!u.fn(n))throw new TypeError("Third argument must be a Function");if(u.node(t))return o(t,e,n);if(u.nodeList(t))return i(t,e,n);if(u.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return c(document.body,t,e,n)}var u=n(3),c=n(4);t.exports=r},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},function(t,e,n){function r(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function o(t,e,n,o,i){return"function"==typeof t.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return r(t,e,n,o,i)}))}function i(t,e,n,r){return function(n){n.delegateTarget=a(n.target,e),n.delegateTarget&&r.call(t,n)}}var a=n(5);t.exports=o},function(t){function e(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=e},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}n.r(e);{var c=n(0),l=n.n(c),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(){function t(e){r(this,t),this.resolveOptions(e),this.initSelection()}return f(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=l()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=l()(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":s(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}(),h=d,p=n(1),y=n.n(p),m=n(2),g=n.n(m),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function(t){function e(t,n){o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return a(e,t),b(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===v(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=g()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new h({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);return e?document.querySelector(e):void 0}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(y.a);e["default"]=k}}])["default"]})});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/shareBubble.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/shareBubble",function(e,n,s){function o(e){this.$host=a(e.host),this.secondId=e.secondId,this.shareData=e.shareData||{},this.beforeShare=e.beforeShare||a.noop,this.pos=e.pos||"leftAuto",this.marginFromHost=e.marginFromHost||15,this.classNames=e.classNames||"",this.initializeBubble(),this.initializeEvents()}var a=e("wiki-common:widget/lib/jquery/jquery"),i=e("wiki-common:widget/lib/jsmart/jsmart"),t=e("wiki-common:widget/ui/bubble/bubble"),c=e("wiki-common:widget/component/share/share"),r=e("wiki-lemma:widget/tools/newSideShare/qrcode"),h=e("wiki-common:widget/util/url"),l=e("wiki-lemma:node_modules/clipboard/dist/clipboard");o.prototype={constructor:o,update:function(e){this.shareData=a.extend(this.shareData,e)},share:function(e){this.beforeShare();var n=h.getQuery("secondId",this.shareData.url);a.get("/api/second/dynamic/share?secondId="+n);var s=this;a.ajax({url:"/api/common/genbkshorturl?url="+encodeURIComponent(this.shareData.url),success:function(e){0===e.errno&&e.shortUrl&&s.update({url:e.shortUrl})},error:function(e){console.log("err",e)},complete:function(){"wechat"===e?s.share2WeChat():s.share2Others(e)}})},share2WeChat:function(){var e=new t({host:a(this.bubble.getNode()).find('[data-channel="wechat"]'),content:'<div class="bubble-content"></div>',classNames:"lemmaWgt-secondsKnow-dialog-qrcode-bubble",marginFromHost:15,pos:"bottomAuto",showTail:!0,hideWhenBlur:!0,animation:"SLIDE"}),n=new r(a(e.getNode()).find("div").get(0),{width:180,height:180});n.makeCode(this.shareData.url),e.show()},share2Others:function(e){if("link"===e){var n=a(".J-sl-player-el-copy-link");return n.show(),void setTimeout(function(){n.hide()},3e3)}c.openShareLink(e,{url:this.shareData.url,title:this.shareData.title,pic:this.shareData.pic})},initializeBubble:function(){this.bubble=new t({host:this.$host,content:new i('<li class="bubble-content">\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002511" data-channel="wechat"><em class="cmn-icon cmn-icons cmn-icons_logo-wechat secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002512" data-channel="qzone"><em class="cmn-icon cmn-icons cmn-icons_logo-qzone secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002513" data-channel="qq"><em class="cmn-icon cmn-icons cmn-icons_logo-qq secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002514" data-channel="weibo"><em class="cmn-icon cmn-icons cmn-icons_logo-sina-weibo secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002514" data-channel="link"><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_secondknow-share-link J-link secondsknow-share-icon__em J-link-{%$secondId|f_escape_xml%}"></em></a>\n</li>').fetch({secondId:this.secondId}),classNames:this.classNames,marginFromHost:this.marginFromHost,pos:this.pos,showTail:!0,hideWhenBlur:!0,animation:"SLIDE"})},initializeEvents:function(){var e=this;e.$host.on("click",function(){e.bubble.show()}),a(e.bubble.getNode()).on("click","a",function(){var n=a(this).attr("data-channel");e.share(n)});var e=this;new l(".J-link-"+this.secondId,{text:function(){return e.shareData.url}})}},s.exports=o});
;/*!wiki-lemma:node_modules/lodash.throttle/index.js*/
define("wiki-lemma:node_modules/lodash.throttle/index",function(t,n,e){function i(t,n,e){function i(n){var e=b,i=g;return b=g=void 0,x=n,y=t.apply(i,e)}function r(t){return x=t,j=setTimeout(l,n),$?i(t):y}function u(t){var e=t-h,i=t-x,r=n-e;return E?T(r,m-i):r}function f(t){var e=t-h,i=t-x;return void 0===h||e>=n||0>e||E&&i>=m}function l(){var t=w();return f(t)?s(t):void(j=setTimeout(l,u(t)))}function s(t){return j=void 0,W&&b?i(t):(b=g=void 0,y)}function v(){void 0!==j&&clearTimeout(j),x=0,b=h=g=j=void 0}function d(){return void 0===j?y:s(w())}function p(){var t=w(),e=f(t);if(b=arguments,g=this,h=t,e){if(void 0===j)return r(h);if(E)return j=setTimeout(l,n),i(h)}return void 0===j&&(j=setTimeout(l,n)),y}var b,g,m,y,j,h,x=0,$=!1,E=!1,W=!0;if("function"!=typeof t)throw new TypeError(c);return n=a(n)||0,o(e)&&($=!!e.leading,E="maxWait"in e,m=E?O(a(e.maxWait)||0,n):m,W="trailing"in e?!!e.trailing:W),p.cancel=v,p.flush=d,p}function r(t,n,e){var r=!0,u=!0;if("function"!=typeof t)throw new TypeError(c);return o(e)&&(r="leading"in e?!!e.leading:r,u="trailing"in e?!!e.trailing:u),i(t,n,{leading:r,maxWait:n,trailing:u})}function o(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function u(t){return!!t&&"object"==typeof t}function f(t){return"symbol"==typeof t||u(t)&&x.call(t)==s}function a(t){if("number"==typeof t)return t;if(f(t))return l;if(o(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=o(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var e=p.test(t);return e||b.test(t)?g(t.slice(2),e?2:8):d.test(t)?l:+t}var c="Expected a function",l=0/0,s="[object Symbol]",v=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt,m="object"==typeof global&&global&&global.Object===Object&&global,y="object"==typeof self&&self&&self.Object===Object&&self,j=m||y||Function("return this")(),h=Object.prototype,x=h.toString,O=Math.max,T=Math.min,w=function(){return j.Date.now()};e.exports=r});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsLog.es.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsLog.es",function(e,o,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var l=e("wiki-lemma:widget/tools/clickstream/clickstream"),m=i(l),d=e("wiki-lemma:node_modules/lodash.throttle/index"),t=i(d),n=2e3,r=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.logPlay=!1,e.logValidPlay=!1,e.logCompletePlay=!1,e.logDurationTimer=null,e.logTimestamp=0,e.playedTime=0,e.accumulatedPlayedTime=0},c=function(e,o,a){void 0===e&&(e={}),e.playedTime&&(m["default"].logTimingVideo({page:"lemma",videoParam:o,isVertical:e.isVertical?1:0,time_duration:e.playedTime,index:e.videoIdx,videoTab:"recommend"===e.relation?"recommend":"relative",lemmaId:a,recCategory:e.recCategory,isRecommend:e.isRecommend}),e.playedTime=0)},g=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=Date.now(),a=o-e.logTimestamp;e.logTimestamp&&2*n>a&&(e.playedTime+=a,e.accumulatedPlayedTime+=a),e.logTimestamp=o},s=function(e,o,a){void 0===e&&(e={}),g(e),c(e,o,a),clearInterval(e.logDurationTimer),e.logTimestamp=0,e.logDurationTimer=null},u=function(e,o,a){void 0===e&&(e={}),setTimeout(function(){e.logPlay=e.logValidPlay=e.logCompletePlay=!1},n),e.accumulatedPlayedTime=0,s(e,o,a)},v=function(e){m["default"].logActEvent({page:"lemma",act_type:"lemma_with_video",lemmaId:e})},y=function(e,o,a){e&&!e.logPlay&&(e.logPlay=!0,m["default"].logActVideo({page:"lemma",video_action:"play",videoParam:o,isVertical:e.isVertical?1:0,lemmaId:a||e.shareLemmaId,secondId:e.secondId,index:e.videoIdx,videoTab:"recommend"===e.relation?"recommend":"relative",recCategory:e.recCategory,isRecommend:e.isRecommend}))},p=function(e,o,a){e.accumulatedPlayedTime>=3e3&&!e.logValidPlay&&(e.logValidPlay=!0,m["default"].logActVideo({page:"lemma",video_action:"validplay",videoParam:o,isVertical:e.isVertical?1:0,lemmaId:a||e.shareLemmaId,secondId:e.secondId,index:e.videoIdx,videoTab:"recommend"===e.relation?"recommend":"relative",recCategory:e.recCategory,isRecommend:e.isRecommend}))},f=function(e,o,a){void 0===e&&(e={}),e.logCompletePlay||(e.logCompletePlay=!0,m["default"].logActVideo({page:"lemma",video_action:"completeplay",videoParam:o,isVertical:e.isVertical?1:0,lemmaId:a||e.shareLemmaId,secondId:e.secondId,index:e.videoIdx,videoTab:"recommend"===e.relation?"recommend":"relative",recCategory:e.recCategory,isRecommend:e.isRecommend}))},T=function(e,o,a,i){void 0===e&&(e={}),m["default"].logViewEl({page:"lemma",element:"video-"+a+"-item",isVertical:e.isVertical?1:0,lemmaId:i||e.shareLemmaId,secondId:e.secondId,index:o,videoTab:"recommend"===e.relation?"recommend":"relative",recCategory:e.recCategory,isRecommend:e.isRecommend})},I=function(e){var o=e.player,a=e.dataItem,i=e.pos,l=e.lemmaId;o.on("timeupdate",t["default"](function(){g(a),p(a,i,l)},n)),o.on("play",function(){y(a,i,l),clearInterval(a.logDurationTimer),a.logDurationTimer=setInterval(function(){c(a,i,l)},6*n)}),o.on("pause",function(){s(a,i,l)}),o.on("complete",function(){u(a,i,l)})};a.exports={addLogField:r,logPagePv:v,logPlay:y,logValidPlay:p,logCompletePlay:f,logVideoShow:T,logPlayedTime:c,resetLogField:u,resetLogTimer:s,recordPlayedTime:g,addVideoLogEvent:I,throttleInterval:n}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsKnow.js*/
define('wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsKnow', function(require, exports, module) {

  /**
   * @file 秒懂百科
   * @author yuhui06@baidu.com
   * @date 2018/10/23
   * @desc
   *     1) 重构原来的代码，由同步变为异步加载，主要是因为词条页存在 pageCache 缓存策略，秒懂数据不能及时更新，
   *        会造成视频排序、播放量等数据更新不及时的问题
   *     2) 页面所需数据放到了 this.data.list 里，尽量直接从这里查询数据，而不是通过 DOM 传递数据
   */
  var $ = require('wiki-common:widget/lib/jquery/jquery');
  var Dialog = require('wiki-common:widget/ui/dialog/dialog');
  var VideoPlayer = require('wiki-common:widget/ui/videoPlayer/videoPlayer');
  var nslog = require('wiki-common:widget/component/nslog/nslog');
  var superLogger = require('wiki-common:widget/component/superLogger/superLogger.es');
  var browser = require('wiki-common:widget/util/browser');
  var urlExt = require('wiki-common:widget/util/url');
  var ShareBubble = require('wiki-lemma:widget/lemma_content/configModule/secondsKnow/shareBubble');
  var JSmart = require('wiki-lemma:widget/lemma_content/configModule/secondsKnow/extendedJsmart');
  var logMap = require('wiki-lemma:widget/lemma_content/configModule/secondsKnow/logMap');
  var clickstream = require('wiki-lemma:widget/tools/clickstream/clickstream');
  var secondsLog = require('wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsLog.es');
  var throttle = require('wiki-lemma:node_modules/lodash.throttle/index');
  var formatListFun = require('wiki-lemma:widget/lemma_content/configModule/secondsKnow/formatListFun');
  var evtMsgManager = require('wiki-common:widget/component/evtMsgManager/evtMsgManager.es');
  
  module.exports = {
      initialize: function (data) {
          this.data = data;
          this.data.list = [];
          this.data.displayBox = [];
          this.data.nextPn = 1; // 请求page参数默认值（向下加载）
          this.data.hasOperation = false; // 控制判断是否操作过播放器（手动选择视频），只修改一次状态
          this.loading = false;
          this.listTpl = new JSmart("{%$secondsKnow=$data.displayBox%}\n{%if $data.orgId == 75%}\n{%$pageBg=$data.pageBg%}\n<div id=\"lemmaWgt-secondsKnow\" class=\"lemmaWgt-secondsKnow-pageBg lemmaWgt-secondsKnow-isScience-pageBg\">\n<div class=\"layout\">\n<ul class=\"lemmaWgt-secondsKnow-gallery\">\n{%foreach $secondsKnow as $i => $video%}\n{%if $i < 1%}\n<li class=\"lemmaWgt-secondsKnow-gallery-li\" data-mediaId=\"{%$video.mediaId|f_escape_xml%}\" data-secondId=\"{%$video.secondId|f_escape_xml%}\"\n                        data-playSrc=\"{%$video.playUrl || $video.playMp4Url|f_escape_xml%}\">\n{%if $pageBg.bgName%}\n<div class=\"page-bg-name\">{%$pageBg.bgName|f_escape_xml%}</div>\n{%/if%}\n<a href=\"javascript:;\" nslog-type=\"10002502\">\n<img src=\"{%$video.videoSrc.cover_small|f_escape_xml%}\" />\n<span class=\"video-shadow\"></span>\n<span class=\"video-play\"><em class=\"cmn-icon cmn-icons cmn-icons_videoPlayer-play\"></em></span>\n<span class=\"video-title\" title=\"{%$video.title|f_escape_xml%}\">\n<span class=\"video-title-content\">{%$video.title|f_escape_xml%}</span>\n<span class=\"video-title-vv\"><em class=\"wiki-lemma-icons wiki-lemma-icons_eye\"></em>{%$video.playNum|number2cn|f_escape_xml%}</span>\n</span>\n</a>\n</li>\n{%/if%}\n{%/foreach%}\n</ul>\n</div>\n<div class=\"bgMask\"></div>\n</div>\n<div class=\"after-science-page-background\" style=\"position:relative;margin-top:-260px;\"></div>\n{%elseif $data.type==\"normal\"%}\n<div id=\"lemmaWgt-secondsKnow\" class=\"lemmaWgt-secondsKnow\">\n<div class=\"lemmaWgt-secondsKnow-cnt\">\n{%$num=$secondsKnow|count%}\n{%if $num>3%}\n{%$num=3%}\n{%/if%}\n<div class=\"layout\" style=\"width: {%335+$num*204%}px\">\n<div class=\"lemmaWgt-secondsKnow-logo\"></div>\n<ul class=\"lemmaWgt-secondsKnow-gallery\">\n{%foreach $secondsKnow as $i => $video%}\n{%if $i<3%}\n<li class=\"lemmaWgt-secondsKnow-gallery-li\" data-mediaId=\"{%$video.mediaId|f_escape_xml%}\" data-secondId=\"{%$video.secondId|f_escape_xml%}\"\n                            data-playSrc=\"{%$video.playUrl || $video.playMp4Url|f_escape_xml%}\">\n<a href=\"javascript:;\">\n<img src=\"{%$video.videoSrc.cover_small|f_escape_xml%}\" />\n<span class=\"video-shadow\"></span>\n<span class=\"video-play\"><em class=\"cmn-icon cmn-icons cmn-icons_videoPlayer-play\"></em></span>\n<span class=\"video-title\" title=\"{%$video.title|f_escape_xml%}\">\n<span class=\"video-title-content\">{%$video.title|f_escape_xml%}</span>\n<span class=\"video-title-vv\"><em class=\"wiki-lemma-icons wiki-lemma-icons_eye\"></em>{%$video.playNum|number2cn|f_escape_xml%}</span>\n</span>\n</a>\n</li>\n{%/if%}\n{%/foreach%}\n</ul>\n</div>\n</div>\n</div>\n{%elseif $data.type == \"largeFeature\"%}\n<div id=\"lemmaWgt-secondsKnow\" class=\"lemmaWgt-secondsKnow-largeFeature lemmaWgt-secondsKnow-largeFeature-{%$data.color|f_escape_xml%}\">\n<div class=\"lemmaWgt-secondsKnow-logo\"></div>\n<ul class=\"lemmaWgt-secondsKnow-gallery\">\n{%foreach $secondsKnow as $i => $video%}\n{%if $i<2%}\n<li class=\"lemmaWgt-secondsKnow-gallery-li\" data-mediaId=\"{%$video.mediaId|f_escape_xml%}\" data-secondId=\"{%$video.secondId|f_escape_xml%}\"\n                    data-playSrc=\"{%$video.playUrl || $video.playMp4Url|f_escape_xml%}\">\n<a href=\"javascript:;\">\n<img src=\"{%$video.videoSrc.cover_small|f_escape_xml%}\" />\n<span class=\"video-shadow\"></span>\n</a>\n</li>\n{%/if%}\n{%/foreach%}\n</ul>\n</div>\n{%elseif $data.type == \"pageBg\"%}\n{%$pageBg=$data.pageBg%}\n<div id=\"lemmaWgt-secondsKnow\" class=\"lemmaWgt-secondsKnow-pageBg layout\">\n<ul class=\"lemmaWgt-secondsKnow-gallery\">\n{%foreach $secondsKnow as $i => $video%}\n{%if $i < 1%}\n<li class=\"lemmaWgt-secondsKnow-gallery-li\" data-mediaId=\"{%$video.mediaId|f_escape_xml%}\" data-secondId=\"{%$video.secondId|f_escape_xml%}\"\n                    data-playSrc=\"{%$video.playUrl || $video.playMp4Url|f_escape_xml%}\">\n{%if $pageBg.bgName%}\n<div class=\"page-bg-name\">{%$pageBg.bgName|f_escape_xml%}</div>\n{%/if%}\n<a href=\"javascript:;\">\n<img src=\"{%$video.videoSrc.cover_small|f_escape_xml%}\" />\n<span class=\"video-shadow\"></span>\n<span class=\"video-play\"><em class=\"cmn-icon cmn-icons cmn-icons_videoPlayer-play\"></em></span>\n<span class=\"video-title\" title=\"{%$video.title|f_escape_xml%}\">\n<span class=\"video-title-content\">{%$video.title|f_escape_xml%}</span>\n<span class=\"video-title-vv\"><em class=\"wiki-lemma-icons wiki-lemma-icons_eye\"></em>{%$video.playNum|number2cn|f_escape_xml%}</span>\n</span>\n</a>\n</li>\n{%/if%}\n{%/foreach%}\n</ul>\n</div>\n{%/if%}\n");
          this.dialogTpl = new JSmart("<div class=\"lemmaWgt-secondsKnow-dialog-content\" {%if $videoSrcList|count > 1%}style=\"width: 932px\"{%/if%} data-shareSrc=\"{%$videoSrcList[0].videoSrc.cover_small|wiki_common_https_trans|f_escape_xml%}\">\n<div class=\"dialog-player\">\n<div class=\"player-container\"></div>\n<div class=\"J-sl-player-el-copy-link dialog-player-link\">复制链接成功</div>\n<div class=\"sl-player-detail-sp\">\n<span class=\"sl-player-detail-title-sp\"></span>\n</div>\n</div>\n<div class=\"dialog-list\" id=\"dialog-all-list\" {%if $videoSrcList|count < 1%}style=\"display:none\"{%/if%}>\n</div>\n</div>\n");
          this.dialogListTpl = new JSmart("<div class=\"sl-player__list__title\">\n<div class=\"sl-player__list__title__relative J-sl-player-title sl-player-title--active\" data-name=\"relative\">相关视频</div>\n{%if $showUploadVideoBtn%}\n<div class=\"sl-player__list__upload__video J-sl-upload-video\">\n</div>\n{%else%}\n<div class=\"sl-player__cannot__upload__video J-sl-cannot-upload-video\">\n</div>\n{%/if%}\n</div>\n<div class=\"sl-player__list__relative J-sl-player__list__relative sl-player-list-dialog-ul J-sl-player-list-ul\" data-name=\"relative\">\n{%foreach $listRelative as $index => $item%}\n{%if $item.recHeadShow%}\n<div class=\"recommend-tab\">\n为你推荐</div>\n{%/if%}\n<div\n            class=\"sl-player-list-item J-sl-player-list-item sl-player-relative-item {%if $curSecondId == $item.secondId%}sl-player-list-item--active{%/if%}\"\n            data-secondId=\"{%$item.secondId|f_escape_xml%}\"\n            title=\"{%$item.title|f_escape_xml%}\"\n        >\n<div class=\"sl-player-list-item__cover\" style=\"background-image: url({%$item.videoSrc.cover|f_escape_xml%});\"></div>\n<div class=\"sl-player-list-item__text\">\n<div class=\"sl-player-list-item__text__title\">{%$item.title|f_escape_xml%}</div>\n{%if $item.playNum%}\n<div class=\"sl-player-list-item__text__subtitle\">{%$item.playNum|number2cn|f_escape_xml%}播放</div>\n{%/if%}\n</div>\n<em class=\"cmn-icon wiki-lemma-icons wiki-lemma-icons_share-circle sl-player-list-item__share J-sl-player-list-item__share\"></em>\n<div class=\"sl-player-list-item__overlay\"></div>\n</div>\n{%if $item.recBottomShow%}\n<div class=\"recommend-tab\">\n为你推荐</div>\n{%/if%}\n{%/foreach%}\n</div>");
          this.$listContainer = $('.J-wgt-seconds-know-container');
          this.logoTimer = null;
          this.logoModalTimer = null;
          // 是否需要跳过片头
          this.isSkipTitle = false;
          this.skipTitleSecondId = '';
          this.isFirst = true;
  
          this.closeDialogWhenEscKeydown = this.closeDialogWhenEscKeydown.bind(this);
          this.handleRequestSuccess = this.handleRequestSuccess.bind(this);
          this.handleRequestFail = this.handleRequestFail.bind(this);
          this.handleRequestComplete = this.handleRequestComplete.bind(this);
          this.handleMoreListSuccess = this.handleMoreListSuccess.bind(this);
          this.getSpecialPlaceList = this.getSpecialPlaceList.bind(this);
          this.switchItem = this.switchItem.bind(this);
          this.renderDialogAgain = this.renderDialogAgain.bind(this);
          this.registerUploadClick = this.registerUploadClick.bind(this);
          this.recTabShow = this.recTabShow.bind(this);
          this.addRecommendAttribute = this.addRecommendAttribute.bind(this);
          this.firstSecondId = urlExt.getQuery('secondId', window.location.href) || '';
          this.recFirstShow = false;
          this.player_modal = $('<div></div>');
          this.player_modal.addClass('bg-player-modal');
          // 等待后续策略迭代符合特型词条头部展示位时删除
          this.getSpecialPlaceList(data.secondsKnow);
          // 获取feed list页视频列表，初始化弹层
          this.getData(1, this.handleRequestSuccess, this.handleRequestFail);
          nslog({
              type: logMap.lemmaPv,
              lemmaTitle: data.lemmaTitle,
              lemmaId: data.lemmaId
          });
  
          secondsLog.logPagePv(data.lemmaId);
      },
      handleRequestSuccess: function (res) {
          if (res && res.errno === 0) {
              // 用于统计首页加载视频小于6个的bad case打点（导致滚动条加载不出）
              if (res.list && res.list.length) {
                  if (res.list.length <= 6 && res.hasMore) {
                      clickstream.logViewEl({
                          page: 'lemma',
                          element: 'first_video_list_lt6',
                          lemmaId: this.data.lemmaId,
                          listLength: res.list.length,
                          hasMore: res.hasMore,
                          isSpecialLemma: true
                      });
                  }
              }
              this.data.nextPn = res.nextPn;
              this.data.hasMore = res.hasMore;
              var firstSecondId = this.firstSecondId;
              // firstSecondIdExist表url上参数是否有效，反向查询
              var firstSecondIdExist = false;
              for (var j = res.list.length - 1; j >= 0; j--) {
                  if (res.list[j].secondId === Number(firstSecondId)) {
                      firstSecondIdExist = true;
                  }
              }
              // firstSecondIdExist有效，自动打开弹层，计算为你推荐展现位置
              if (firstSecondIdExist) {
                  this.data.list = this.parse(this.flatten(res.list), true);
              } else {
                  this.data.list = this.parse(this.flatten(res.list), false);
              }
              this.data.listLength = this.data.list.length;
              // 给video对象添加额外属性
              for (var i = this.data.listLength - 1; i >= 0; i--) {
                  this.data.list[i].fromPn = res.nextPn - 1;
                  this.data.list[i].videoIdx = i;
              }
              this.addRecommendAttribute(this.data.list);
              // 由于首次分享打开会多一次请求，isFirst限制只初始化弹层一次
              if (this.isFirst) {
                  this.isFirst = false;
                  this.handleRequestComplete();
              }
          } else {
              this.handleRequestFail();
          }
      },
      // 等待后续策略迭代符合特型词条头部展示位时删除
      getSpecialPlaceList: function (list) {
          var showList = list;
          showList.map((value) => {
              this.data.displayBox.push(value);
          });
          this.addRecommendAttribute(this.data.displayBox);
      },
      // 向下滚动加载
      handleMoreListSuccess: function (res) {
          if (res && res.errno === 0) {
              this.data.secondsKnow = this.parse(res.list, true);
              this.data.nextPn = res.nextPn;
              this.data.hasMore = res.hasMore;
              var newlist = this.data.secondsKnow;
              var length = newlist.length;
              var moreList = '';
              for (var i = 0; i <= length - 1; i++) {
                  // 为你推荐tab只展示一次
                  if (!$('.recommend-tab').length && i === 0 &&
                      this.data.timeOutShow) {
                      this.recFirstShow = true;
                      moreList += '<div class="recommend-tab">为你推荐</div>';
                  }
                  newlist[i].playNum = this.handleNum(newlist[i].playNum);
                  newlist[i].fromPn = res.nextPn - 1;
                  newlist[i].videoIdx = this.data.list.length;
                  this.data.list.push(newlist[i]);
                  this.loading = false;
                  moreList += '<div class="sl-player-list-item J-sl-player-list-item sl-player-relative-item"'
                  + 'data-secondId="' + newlist[i].secondId + '"title="' + newlist[i].title + '">'
                  + '<div class="sl-player-list-item__cover" style="background-image: url('
                  + newlist[i].videoSrc.cover + ');"></div><div class="sl-player-list-item__text">'
                  + '<div class="sl-player-list-item__text__title">' + newlist[i].title
                  + '</div><div class="sl-player-list-item__text__subtitle">' + newlist[i].playNum
                  + '播放</div></div><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_share-circle'
                  + ' sl-player-list-item__share J-sl-player-list-item__share">'
                  + '</em><div class="sl-player-list-item__overlay"></div></div>';
              }
              this.data.listLength = this.data.list.length;
              $('.J-sl-player__list__relative').append(moreList);
              this.addRecommendAttribute(this.data.list);
              this.initializeShareBubble();
              this.getDomObject();
          } else {
              this.handleRequestFail();
          }
      },
      handleRequestFail: function () {
          this.data.list = this.data.secondsKnow;
          this.data.list.forEach(secondsLog.addLogField);
          this.handleRequestComplete();
      },
      handleRequestComplete: function () {
          this.renderList();
          this.initializeDialog();
          this.handleScroll();
          this.bindEvents();
  
          var secondId = this.firstSecondId;
          var isInclude = !!this.get(secondId);
          isInclude ? this.play(secondId, true) : this.initializeMiniPlay(); // 首次进入this.play播放静音
  
          nslog({
              type: logMap.pv,
              lemmaTitle: this.data.lemmaTitle,
              lemmaId: this.data.lemmaId,
              secondIds: this.getSecondIds()
          });
          superLogger.sendPv('lemma_video', {
              lemmaTitle: this.data.lemmaTitle,
              lemmaId: this.data.lemmaId,
              secondIds: this.getSecondIds(),
              // 标注为二三类视频
              isShow: this.data.isShow
          });
          clickstream.logViewEl({
              page: 'lemma',
              isShow: this.data.isShow,
              element: 'lemma_video',
              lemmaTitle: this.data.lemmaTitle,
              lemmaId: this.data.lemmaId,
              secondIds: this.getSecondIds()
          });
  
          var self = this;
          this.$listContainer.find('.lemmaWgt-secondsKnow-gallery-li').each(function (index) {
              var $this = $(this);
              var nowSecondId = $this.attr('data-secondId');
              var nowVideo = self.getDisplayItem(nowSecondId);
              superLogger.sendScreenView('lemma_topImage_secondKnow_show', {
                  secondId: $this.attr('data-secondId'),
                  lemmaId: self.data.lemmaId,
                  index: index,
                  recCategory: nowVideo.recCategory,
                  isRecommend: nowVideo.isRecommend
              });
              clickstream.logViewEl({
                  page: 'lemma',
                  secondId: $(this).attr('data-secondid'),
                  lemmaId: self.data.lemmaId,
                  index: index,
                  element: 'lemma_topImage_secondKnow',
                  recCategory: nowVideo.recCategory,
                  isRecommend: nowVideo.isRecommend
              });
              secondsLog.logVideoShow(self.data.list[index], index, 'top', self.data.lemmaId);
          });
      },
      recTabShow: function (data, index, value) {
          var self = this;
          // 为你推荐展示条件
          var lemmaVideoType = [1, 3, 6];
          var videoFromType = Number(value.recCategory);
          var allListLength = data.length || 0;
          var hasMore = self.data.hasMore;
          // 判断当前的index是否是为你推荐tab下的视频，isRecommend属性用于打点记录
          value.isRecommend = 0;
          if (index >= self.data.isRecIndex) {
              value.isRecommend = 1;
          }
          // 当前list首个视频为非词条挂载非策略挖掘视频，则头部插入为你推荐
          if (!self.recFirstShow
              && !lemmaVideoType.includes(videoFromType)
              && videoFromType !== 0
              && index !== 0)
          {
              self.recFirstShow = true;
              self.data.isRecIndex = index;
              value.recHeadShow = true;
              value.isRecommend = 1;
          }
          // top10已经展现后（且有第二页视频），尾部插入为你推荐，临时原因屏蔽feed接口加hasMore判断(接入feed接口则不需要)
          // 特殊情况（后端返回不准确，存在true下一页没有视频的情况），延时下一页插入
          else if (!self.recFirstShow
              && index === allListLength - 1
              && lemmaVideoType.includes(videoFromType)
              && hasMore
              && videoFromType !== 0)
          {
              self.recFirstShow = true;
              self.data.isRecIndex = index + 1;
              self.data.timeOutShow = true;
          }
          // 首位词条挂载视频只有一个(且后有推荐视频)，尾部插入为你推荐，临时原因屏蔽feed接口加listLength判断(接入feed接口则不需要)
          else if (!self.recFirstShow
              && videoFromType === 0
              && index !== allListLength - 1)
          {
              self.recFirstShow = true;
              self.data.isRecIndex = 1;
              value.recBottomShow = true;
          }
      },
      addRecommendAttribute: function (allList) {
          var self = this;
          $.each(allList, function (index, value) {
              // 判断当前的index是否是为你推荐tab下的视频，isRecommend属性用于打点记录
              value.isRecommend = 0;
              if (index >= self.data.isRecIndex) {
                  value.isRecommend = 1;
              }
          });
      },
      getData: function (pn, successCallback, failCallback, childCallback) {
          var self = this;
          if (typeof childCallback !== 'function') {
              childCallback = function () {};
          }
          var firstSecondId = this.firstSecondId;
          var classify = {
              adManager: self.data.adManager,
              kpdClassify: self.data.kpdClassify,
              memorial: self.data.memorial
          };
          $.ajax({
              url: '/api/second/video/list',
              data: {lemmaId: this.data.lemmaId, pn: pn, classify: JSON.stringify(classify),
                  secondId: firstSecondId, scene: 'pc'},
              success: function (res) {
                  var res_model = formatListFun.getMockResponse(res, pn);
                  successCallback(res_model);
                  childCallback();
              },
              error: failCallback
          });
      },
      getSecondIds: function () {
          var l = [];
          $.each(this.data.list, function (index, item) {
              l.push(item.secondId);
          });
  
          return l.join('|');
      },
      parse: function (list, getRecTab) {
          var self = this;
          $.each(list, function (index, item) {
              if (getRecTab && self.data.nextPn === 2) {
                  self.recTabShow(list, index, item);
              }
              var coverPic = item.coverPic || {};
              // 兼容老数据
              item.videoSrc = {
                  type: 'baikePlayer',
                  source: item.source,
                  secondId: item.secondId,
                  mid: item.mediaId,
                  cover: coverPic.imageUrl || '',
                  cover_small: coverPic.imageUrl || ''
              };
  
              // 添加打点相关数据字段
              secondsLog.addLogField(item);
          });
  
          return list;
      },
      flatten: function (data) {
          var list = [];
          $.each(data, function (index, item) {
              list = list.concat(item);
          });
  
          return list;
      },
      renderList: function () { // 将请求的数据进行模版渲染
          // 模版渲染对应case: orgId == 75---亚硝酸盐等，$data.type ==
          // "largeFeature"---明星特型等，$data.type == "pageBg"---二型糖尿病等
          var html = this.listTpl.fetch({data: this.data});
          this.$listContainer.html(html);
          this.$listContainer.find('.lemmaWgt-secondsKnow-gallery').css('opacity', 1);
      },
      renderDialog: function () { // 将请求的数据进行模版渲染
          var html = this.dialogTpl.fetch({
              videoSrcList: this.data.list
          });
          var listHtml = this.dialogListTpl.fetch({
              listRelative: this.data.list,
              lemmaId: this.data.lemmaId,
              curSecondId: this.firstSecondId,
              showUploadVideoBtn: this.data.showUploadVideoBtn
          });
          var self = this;
          this.$dialogCnt.html(html);
          self.$dialogList = $('#dialog-all-list');
          this.$dialogList.html(listHtml);
          this.registerUploadClick();
      },
      closeDialogWhenEscKeydown: function (event) {
          var isEscKeydown = (event.keyCode === 27 || event.which === 27);
          if (isEscKeydown && this.dialog && this.dialog.hide) {
              this.dialog.hide();
          }
      },
      registerUploadClick() {
          var self = this;
          // 注册上传视频点击事件
          if (self.data.showUploadVideoBtn) {
              $('.J-sl-upload-video').on('click', function () {
                  nslog({
                      type: logMap.uploadClick,
                      lemmaTitle: self.data.lemmaTitle,
                      lemmaId: self.data.lemmaId
                  });
  
                  var href = '/second/publish?lemmaId='
                      + self.data.lemmaId
                      + '&from=lemma&lemmaTitle='
                      + self.data.lemmaTitle
                      + '&lemmaDesc='
                      + self.data.lemmaDesc;
  
                  self.gotoPage(href, 'a_blank_tag');
              });
          } else {
              $('.J-sl-cannot-upload-video').on('click', function () {
                  self.player_modal.css('display', 'block');
                  self.player_modal.find('.cannot-upload-modal').css('display', 'block');
                  self.player_modal.find('.cannot-upload-modal').css('opacity', '1');
  
                  var content = '<div style="text-align: left;width: 528px">'
                      + '<h2 style="font-size: 20px;color: #333;line-height: 26px;margin-bottom: 20px;">'
                      + '对不起，该词条暂不开放视频上传</h2>'
                      + '<p style="font-size: 16px;color: #ccc;line-height: 26px;">'
                      + '如有疑义，请点击左下角进行反馈</p></div>';
                  if ($('.cannot-upload-modal').length) {
                      self.player_modal.css('display', 'block');
                      self.noFlashDialog.show();
                      $('.hide-dialog').on('click', function () {
                          self.noFlashDialog.hide();
                          self.player_modal.css('display', 'none');
                      });
                  } else {
                      self.noFlashDialog = new Dialog({
                          classNames: 'cannot-upload-modal',
                          title: '编辑提示',
                          content: content,
                          btns: [
                              {
                                  text: '<span style="font-size: 14px">反馈问题</span>',
                                  key: 'discussion'
                              },
                              {
                                  text: '<span class="hide-dialog" style="font-size: 14px">返回词条</span>',
                                  key: 'back'
                              }
                          ],
                          onBtnClick: function (btnKey) {
                              if (btnKey === 'discussion') {
                                  window.location.href = '/feedback';
                              }
                          }
                      });
                      self.noFlashDialog.show();
  
                      $('.hide-dialog').on('click', function () {
                          self.noFlashDialog.hide();
                      });
                      self.player_modal.append(document.getElementsByClassName('cannot-upload-modal')[0]);
                      $('body').append(self.player_modal);
                  }
              });
          }
      },
      initializeDialog: function () {
          var self = this;
          self.dialog = new Dialog({
              classNames: 'lemmaWgt-secondsKnow-dialog',
              hasCloseBtn: true,
              content: '<div id="secondsKnow-dialog-cnt"></div>',
              onShow: function () {
                  $('body').on('keydown', self.closeDialogWhenEscKeydown);
                  if (self.miniPlayer) {
                      self.miniPlayer.destroy();
                      self.miniPlayer = null;
                      $('.J-mini-player-container').remove();
                  }
                  superLogger.sendPv('wikisecond_video_flow');
                  self.dialogVisible = true;
                  self.triggerScreenViewPv();
              },
              onHide: function () {
                  nslog(logMap.dialogClose);
                  $('body').off('keydown', self.closeDialogWhenEscKeydown);
  
                  if (self.player && self.player.destroy) {
                      self.player.destroy();
                  }
  
                  // 清空列表，等待下一次打开弹框
                  self.data.list = [];
                  $('.list-gallery').empty(); // 清空dom元素下的子节点
  
                  self.dialogVisible = false;
                  self.data.nextPn = 2;
                  self.recFirstShow = false;
                  evtMsgManager.trigger(evtMsgManager.Events.LEMMA_VIDEO_PAUSE);
              }
          });
  
          self.$dialogCnt = $('#secondsKnow-dialog-cnt');
          self.renderDialog();
          self.initializeShareBubble();
          self.getDomObject();
      },
      getDomObject: function () {
          var self = this;
          var $el = $('#secondsKnow-dialog-cnt').find('.sl-player-list-dialog-ul');
          self.$screenViewItems = $el.find('.J-sl-player-list-item');
          self.screenViewElSize = $el.height();
          self.screenViewItemSize = self.$screenViewItems.eq(0).height() + 10;
          self.screenViewLogedIndex = -1;
      },
      triggerScreenViewPv: function () {
          var self = this;
          var scrollTop = $('#secondsKnow-dialog-cnt').find('.J-sl-player__list__relative').scrollTop();
          var currentIndex = Math.floor((scrollTop + self.screenViewElSize) / self.screenViewItemSize);
          if (currentIndex < self.screenViewLogedIndex) {
              return;
          }
          self.$screenViewItems.each(function (index) {
              if (index > self.screenViewLogedIndex && index <= currentIndex) {
                  secondsLog.logVideoShow(self.data.list[index], index, 'layer', self.data.lemmaId);
              }
          });
          self.screenViewLogedIndex = currentIndex;
      },
      initializeShareBubble: function () {
          var self = this;
          $('.J-sl-player-list-item__share').each(function (index, item) {
              var $el = $(item);
              var secondId = parseInt($el.parents('.J-sl-player-list-item').attr('data-secondId'), 10);
              var data = self.get(secondId);
              $el.attr('secondid', secondId);
              if (data) {
                  var shareData = self.generateShareData(data);
                  new ShareBubble({
                      host: $el,
                      classNames: 'sl-share-bubble',
                      pos: 'bottom-center',
                      marginFromHost: 8,
                      shareData: shareData,
                      secondId: secondId
                  });
              }
          });
      },
      generateShareData: function (data) {
          return {
              url: window.location.origin
                  + '/video'
                  + '?lemmaId=' + (this.data.lemmaId || data.shareLemmaId)
                  + '&secondId=' + data.secondId,
              title: '快速了解' + (this.data.lemmaTitle || data.shareLemmaTitle) + '，就在百科秒懂视频！',
              pic: data.videoSrc.cover
          };
      },
      // 获取feed列表展示的视频对象
      get: function (secondId) {
          var data = null;
  
          $.each(this.data.list, function (index, item) {
              if (parseInt(item.secondId, 10) === parseInt(secondId, 10)) {
                  data = item;
                  return false;
              }
          });
  
          return data;
      },
      // 获取特型展示位的视频对象
      getDisplayItem: function (secondId) {
          var data = null;
  
          $.each(this.data.displayBox, function (index, item) {
              if (parseInt(item.secondId, 10) === parseInt(secondId, 10)) {
                  data = item;
                  return false;
              }
          });
  
          return data;
      },
      gotoPage: function (url, id) {
          var el = document.createElement('a');
  
          el.setAttribute('href', encodeURI(url));
          el.setAttribute('target', '_blank');
          el.setAttribute('id', id);
  
          if (!document.getElementById(id)) {
              document.body.appendChild(el);
          }
  
          el.click();
      },
      switchItem: function (secondId) {
          const itemActiveClass = 'sl-player-list-item--active';
          // 标记正在播放的视频高亮
          var $parentel = $('.J-sl-player__list__relative');
          var $el = $parentel.find('.J-sl-player-list-item[data-secondId=' + secondId + ']');
          $('.' + itemActiveClass).removeClass(itemActiveClass);
          $el.addClass(itemActiveClass);
      },
      renderDialogAgain: function (secondId) {
          this.renderDialog(); // 重置渲染dialog
          this.initializeShareBubble(); // 重新初始化分享模块
          this.data.nextPn = 2; // 重置pn的值用于请求第二页
          this.handleScroll();
          this.play(secondId, false);
      },
      bindEvents: function () {
          var self = this;
  
          self.$listContainer.on('click', '.lemmaWgt-secondsKnow-gallery-li', function () {
              var secondId = $(this).attr('data-secondId');
              // secondId不存在，进入页面默认两个加载位的请求和点击加载位的请求会重复请求第一页，故在点击前清空
              if (!self.firstSecondId) {
                  self.data.list = [];
              }
  
              nslog({
                  type: logMap.click,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId
              });
              // 上传视频展示pv打点
              if (self.data.showUploadVideoBtn) {
                  nslog({
                      type: logMap.uploadShow,
                      lemmaTitle: self.data.lemmaTitle,
                      lemmaId: self.data.lemmaId
                  });
              }
              if (!self.data.hasOperation) {
                  self.data.hasOperation = true;
              }
              if (self.miniPlayer && self.miniPlayer.pause) {
                  self.miniPlayer.pause();
                  evtMsgManager.trigger(evtMsgManager.Events.LEMMA_VIDEO_PAUSE);
              }
              // 视频入口点击，重新渲染列表和dialog
              self.firstSecondId = secondId;
              self.getData(1, self.handleRequestSuccess, self.handleRequestFail,
                  () => self.renderDialogAgain(secondId));
          });
  
          self.$listContainer.on('click', '.J-mini-player-container', function () {
              var secondId = $(this).parent().attr('data-secondId');
  
              nslog({
                  type: logMap.miniPlayerClick,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId
              });
          });
  
          self.$dialogCnt.on('click', '.sl-player-list-item', function (event) {
              var isClickOnShare = $(event.target).hasClass('J-sl-player-list-item__share');
              if (isClickOnShare) {
                  return;
              }
  
              var $this = $(this);
              var secondId = $this.attr('data-secondId');
              var data = self.get(secondId) || {};
  
              nslog({
                  type: logMap.dialogListClick,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId,
                  title: data.title
              });
  
              var params = {
                  recCategory: data.recCategory,
                  isRecommend: data.isRecommend
              };
              if (self.player.baikePlayer && self.player.baikePlayer.plugin
              && self.player.baikePlayer.plugin.playViaSecondId
              && self.player.baikePlayer.plugin.playViaSecondId.sendVideoPlayDurationsLog) {
                  self.player.baikePlayer.plugin.playViaSecondId.sendVideoPlayDurationsLog(params);
              }
              if (!self.data.hasOperation) {
                  self.data.hasOperation = true;
              }
  
              if (self.player && self.player.videoSrc && self.player.videoSrc.secondId) {
                  var prevSecondId = self.player.videoSrc.secondId;
                  secondsLog.resetLogTimer(self.get(prevSecondId) || {}, 'layer', self.data.lemmaId);
              }
              self.play(secondId, false);
              self.switchItem(secondId);
          });
  
          $(window).on('beforeUnload', function () {
              if (self.player && self.player.videoSrc && self.player.videoSrc.secondId) {
                  secondsLog.resetLogTimer(self.get(secondId) || {}, 'layer', self.data.lemmaId);
              }
          });
      },
      play: function (secondId, isVoiceMuted) {
          secondId = parseInt(secondId, 10);
          var playSrc;
          var dataList = this.data.list || [];
          // 查询首次进入播放的视频对象
          for (var i = 0; i < dataList.length; i++) {
              if (dataList[i].secondId === secondId) {
                  playSrc = dataList[i].playUrl || dataList[i].playMp4Url;
              }
          }
  
          this.dialog.show();
          this.updatePlayer(secondId, isVoiceMuted, playSrc);
          this.updateVideoInfo(secondId);
          this.updateDialogList(secondId);
      },
      updatePlayer: function (secondId, isVoiceMuted, playSrc) {
          if (!isVoiceMuted) {
              isVoiceMuted = false;
          }
          if (this.player) {
              this.player.destroy();
          }
          var data = this.get(secondId) || {};
  
          this.player = new VideoPlayer('.lemmaWgt-secondsKnow-dialog .player-container', {
              type: 'baikePlayer',
              lemmaId: this.data.lemmaId,
              secondId: secondId,
              src: playSrc,
              recCategory: data.recCategory,
              isRecommend: data.isRecommend
          }, {
              width: 685,
              height: 390
          });
  
          if (this.isSkipTitle &&
              data.shouldSkipTTG &&
              this.skipTitleSecondId !== data.secondId) {
              var src = data.miniPlayUrl.hls;
              this.player.baikePlayer.src(src);
          }
          // 第一次share弹窗视频静音
          if (isVoiceMuted) {
              this.player.baikePlayer.muted(true);
          }
  
          $.getJSON('/api/second/dynamic/view?secondId=' + secondId);
  
          var self = this;
  
          this.initializeModalQuanminLogo();
          this.addVideoLog(this.player, data, 'layer');
  
          this.player.on('play', function () {
              clearTimeout(self.logoModalTimer);
              self.logoModalTimer = setTimeout(function () {
                  self.handleQuanminLogo('modal', data);
              }, 300);
  
              // 隐藏重复的秒懂片头
              if (!self.isSkipTitle && data.shouldSkipTTG) {
                  self.isSkipTitle = true;
                  self.skipTitleSecondId = secondId;
              }
  
              nslog({
                  type: logMap.play,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId,
                  title: data.title
              });
          });
  
          this.player.on('complete', function () {
              nslog({
                  type: logMap.complete,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId,
                  title: data.title
              });
  
              var list = self.data.list;
              var currentSecondId = $('.sl-player-list-item--active').attr('data-secondId');
              var currentIndex;
              for (var i = 0; i < list.length; i++) {
                  if (parseInt(currentSecondId, 10) === list[i].secondId) {
                      currentIndex = i;
                  }
              }
              var nextSecondId = list[currentIndex + 1] && list[currentIndex + 1].secondId;
              if (nextSecondId) {
                  if (self.data.hasOperation) {
                      self.play(nextSecondId, false);
                      self.switchItem(nextSecondId);
                  } else {
                      self.play(nextSecondId, true); // 没有视频选择操作，保持静音状态
                      self.switchItem(nextSecondId);
                  }
              }
          });
  
          try {
              this.player.on('fullscreen', function () {
                  self.handleQuanminLogo('modal', data, true);
              });
          } catch (e) {}
  
          this.player.play();
          evtMsgManager.trigger(evtMsgManager.Events.LEMMA_VIDEO_PLAY);
      },
      updateVideoInfo: function (secondId) {
          var data = null;
          $.each(this.data.list, function (index, item) {
              if (parseInt(item.secondId, 10) === secondId) {
                  data = item;
                  return false;
              }
          });
  
          if (data) {
              var $dialog = $('.lemmaWgt-secondsKnow-dialog');
              $dialog.find('.sl-player-detail-title-sp').html(data.title); // bca-disable-line
          }
      },
      updateDialogList: function (secondId) {
          var playingClass = 'play';
          var $list = $('.J-list-gallery-li');
          $list.removeClass(playingClass);
          $list.each(function (index, el) {
              var $el = $(el);
              var curSecondId = parseInt($el.attr('data-secondId'), 10);
              if (curSecondId === secondId) {
                  $el.addClass(playingClass);
                  return false;
              }
          });
      },
      initializeMiniPlay: function () {
          if (this.data.type === 'largeFeature') {
              var $li = $('.lemmaWgt-secondsKnow-gallery-li').eq(0);
              $li.length && this.initializeMiniPlayer($li);
          }
      },
  
      initializeMiniQuanminLogo: function () {
          var $logoEl = $('<div class="quanmin-mini-logo"></div>');
          var $logoWrapperEl = $('<div class="quanmin-mini-wrapper"></div>');
  
          $logoWrapperEl.append($logoEl);
  
          $('.J-mini-player-container .larkplayer').append($logoWrapperEl);
  
          this.$miniLogoEl = $logoEl;
          this.$miniLogoWrapperEl = $logoWrapperEl;
      },
  
      initializeModalQuanminLogo: function () {
          var $logoEl = $('<div class="quanmin-mini-logo"></div>');
          var $logoWrapperEl = $('<div class="quanmin-mini-wrapper"></div>');
  
          $logoWrapperEl.append($logoEl);
  
          $('.wgt-videoPlayer-baikePlayer .larkplayer').append($logoWrapperEl);
  
          this.lastSecondId = '';
          this.$modalLogoEl = $logoEl;
          this.$modalLogoWrapperEl = $logoWrapperEl;
      },
  
      // 全民小视频水印
      handleQuanminLogo: function (type, cdata, force) {
          var isModal = type === 'modal';
          var self = this;
  
          if (!isModal && (!this.$miniLogoWrapperEl || !this.$miniLogoEl || !cdata)) {
              return;
          }
  
          if (isModal && (!this.$modalLogoWrapperEl || !this.$modalLogoEl || !cdata)) {
              return;
          }
  
          if (cdata.secondId === this.lastSecondId && !force) {
              return;
          }
  
          this.lastSecondId = cdata.secondId;
  
          try {
              var $logoEl = isModal ? this.$modalLogoEl : this.$miniLogoEl;
              var $logoWrapperEl = isModal ? this.$modalLogoWrapperEl : this.$miniLogoWrapperEl;
  
              $logoEl.hide();
  
              var $wrapperEl = $logoWrapperEl.parent();
  
              if (!$wrapperEl || !cdata.isVertical) {
                  return;
              }
  
              clearTimeout(self.logoTimer);
              self.logoTimer = setTimeout(function () {
                  var wrapperHeight = $wrapperEl.height();
  
                  if (!wrapperHeight) {
                      return;
                  }
  
                  var videoWidth = wrapperHeight * 9 / 16;
                  var rate = 220 / 30; // 水印图片宽度和视频高度比例
                  var logoWidth = wrapperHeight / rate;
                  var logoHeight = logoWidth / 5; // 水印图片宽高比例
                  var marginRightSize = wrapperHeight <= 270 ? 5 : 10; // 右边距
                  var marginTop = marginRightSize; // 上边距
                  var marginLeft = (videoWidth - logoWidth - marginRightSize * 2);
  
                  $logoEl.css({
                      width: logoWidth + 'px',
                      height: logoHeight + 'px',
                      marginLeft: marginLeft + 'px',
                      marginTop: marginTop + 'px'
                  });
  
                  if (cdata.source === 101) {
                      $logoEl.show();
                  }
              }, 100);
          } catch (e) {}
      },
  
      initializeMiniPlayer: function ($li) {
          var $playerContainer = $('<div class="J-mini-player-container" style="display: none;"></div>');
          $li.append($playerContainer);
          var secondId = $li.attr('data-secondId');
          var width = $li.width();
          var height = $li.height();
          var data = this.getDisplayItem(secondId);
          var poster = data.videoSrc.cover;
          var playSrc = data.playUrl || data.playMp4Url;
  
          this.miniPlayer = new VideoPlayer($playerContainer, {
              type: 'baikePlayer',
              lemmaId: this.data.lemmaId,
              secondId: secondId,
              src: playSrc,
              // 由于特型词条头部没有策略返回视频来源类型数据，故默认值1
              // 等待后续策略迭代符合特型词条头部展示位时删除默认值
              recCategory: data.recCategory || 1,
              isRecommend: data.isRecommend
          }, {
              width: width,
              height: height,
              poster: poster
          });
  
          if (this.isSkipTitle && data.shouldSkipTTG && this.skipTitleSecondId !== secondId) {
              var src = data.miniPlayUrl.hls;
              this.miniPlayer.baikePlayer.src(src);
          }
          this.miniPlayer.baikePlayer.muted(true);
          this.miniPlayer.play();
          evtMsgManager.trigger(evtMsgManager.Events.LEMMA_VIDEO_PLAY);
  
          var self = this;
  
          this.initializeMiniQuanminLogo();
          this.addVideoLog(this.miniPlayer, data, 'top');
  
          self.miniPlayer.on('play', function () {
              // 延时 1s，避免封面加载过程中造成的图片闪烁
              setTimeout(function () {
                  $playerContainer.show();
                  self.handleQuanminLogo('mini', data);
                  self.isPlayed = true;
              }, 1000);
  
              // 隐藏重复的秒懂片头
              if (!self.isSkipTitle && data.shouldSkipTTG) {
                  self.isSkipTitle = true;
                  self.skipTitleSecondId = secondId;
              }
              nslog({
                  type: logMap.play,
                  secondId: secondId,
                  lemmaId: self.data.lemmaId,
                  lemmaTitle: self.data.lemmaTitle,
                  mini: 1
              });
              superLogger.sendPv('video_flow_first_play', {
                  type: logMap.play,
                  lemmaTitle: self.data.lemmaTitle,
                  lemmaId: self.data.lemmaId,
                  secondId: secondId,
                  // 标注为二三类视频
                  isShow: self.data.isShow,
                  // 由于特型词条头部没有策略返回视频来源类型数据，故默认值1
                  // 等待后续策略迭代符合特型词条头部展示位时删除默认值
                  recCategory: data.recCategory || 1,
                  isRecommend: data.isRecommend
              });
          });
  
          self.miniPlayer.on('complete', function () {
              self.miniPlayer.destroy();
              $playerContainer.remove();
  
              nslog({
                  type: logMap.complete,
                  secondId: secondId,
                  lemmaId: self.data.lemmaId,
                  lemmaTitle: self.data.lemmaTitle,
                  mini: 1
              });
  
              if ($li.next('li').length) {
                  self.initializeMiniPlayer($li.next('li'));
              }
          });
      },
  
      handleScroll: function (callback) {
          var self = this;
          var page;
          if (typeof callback !== 'function') {
              callback = function () {};
          }
          self.getDomObject();
          self.$scrollView = $('#secondsKnow-dialog-cnt').find('.J-sl-player__list__relative');
          // 等待getDomObject执行完毕，绑定事件
          var $el = self.$scrollView;
          $el.on('scroll', function () {
              if ($el.scrollTop() + self.screenViewElSize >= self.screenViewItemSize
              * (self.data.listLength - 5)) {
                  if (self.data.hasMore && !self.loading) {
                      self.loading = true;
                      page = self.data.nextPn;
                      self.getData(page, self.handleMoreListSuccess, self.handleRequestFail);
                  }
              }
              if ($el.scrollTop() + $el.height() >= self.screenViewItemSize * (self.data.isRecIndex + 6.45) + 20) {
                  $('.J-sl-player-title').text('为你推荐');
              } else {
                  $('.J-sl-player-title').text('相关视频');
              }
              if (self.dialogVisible) {
                  self.triggerScreenViewPv();
              }
          });
          callback();
      },
  
      handleNum: function (num) {
          if (num > 10000) {
              num = (num / 10000).toFixed(1) + '万';
              return num;
          } else {
              return num;
          }
      },
  
      /**
       * 在 player 上绑定相关事件，处理视频打点
       * @param {Object} player 播放器对象
       * @param {Object} dataItem 播放的视频数据项
       * @param {string} pos 视频位置，打点用，top: 词条顶部或小窗，layer: 弹层
       */
      addVideoLog: function (player, dataItem, pos) {
          var self = this;
          var lemmaId = self.data.lemmaId;
          player.on('timeupdate', throttle(function () {
              if (
                  player && player.baikePlayer
                  && typeof player.baikePlayer.currentTime === 'function'
                  && typeof player.baikePlayer.duration === 'function'
                  && player.baikePlayer.currentTime() / player.baikePlayer.duration() >= 0.8
              ) {
                  secondsLog.logCompletePlay(dataItem, pos, lemmaId);
              }
          }, 4000));
  
          secondsLog.addVideoLogEvent({
              player: player,
              dataItem: dataItem,
              pos: pos,
              lemmaId: lemmaId
          });
      }
  };
  

});

;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/constants.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/constants",function(e,s,t){var i={TITLE_ACTIVE:"sl-player-title--active",LIST_ITEM_ACTIVE:"sl-player-list-item--active"},n={RELATIVE_LIST:"relative",RECOMMEND_LIST:"recommend",RELATIVE_RELATION:"同词条"};t.exports={cssClasses:i,strings:n}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/container.es.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/container.es",function(e,a,t){"use strict";var i=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/util/url"),d=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsLog.es"),s=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/formatListFun"),n=e("wiki-lemma:widget/tools/clickstream/clickstream");t.exports={initialize:function(e,a){this.data={lemmaId:e.lemmaId,lemmaTitle:e.lemmaTitle,lemmaDesc:e.lemmaDesc,secondId:e.secondsKnow[0].secondId,autoplay:!1,showUploadVideoBtn:e.showUploadVideoBtn,isShow:e.isShow,isMemorial:e.isMemorial,memorial:e.memorial,allAdForbidden:e.allAdForbidden,showEndAd:e.showEndAd,secondKnowRecBList:e.secondKnowRecBList,kpdClassify:e.kpdClassify||[],adManager:e.adManager||[],eid:""},this.recFirstShow=!1,this.getData(a)},normalize:function(e){var a=this,t=[],o=0;return i.each(e,function(t,i){a.recTabShow(e,t,i),i.videoIdx=o,i.maximumPlayProgress=0,o++;var s=i.coverPic||{};i.videoSrc={type:"baikePlayer",source:i.source,secondId:i.secondId,mid:i.mediaId,cover:s.imageUrl||"",cover_small:s.imageUrl||""},d.addLogField(i)}),t=t.concat(e)},recTabShow:function(e,a,t){var i=this,o=[1,3,6],d=Number(t.recCategory),s=e.length||0,n=i.data.hasMore;i.recFirstShow||o.includes(d)||0===d||0===a?!i.recFirstShow&&a===s-1&&o.includes(d)&&n&&0!==d?(i.recFirstShow=!0,i.data.isRecIndex=a+1,i.data.timeOutShow=!0):i.recFirstShow||0!==d||a===s-1||(i.recFirstShow=!0,i.data.isRecIndex=1,t.recBottomShow=!0):(i.recFirstShow=!0,i.data.isRecIndex=a,t.recHeadShow=!0,t.isRecommend=1)},addRecommendAttribute:function(e){var a=this;i.each(e,function(e,t){t.isRecommend=0,e>=a.data.isRecIndex&&(t.isRecommend=1)})},mergeUrlData:function(){var e=parseInt(o.getQuery("secondId"),10);e&&(this.data.secondId=e,this.data.autoplay=!0)},getRequestData:function(){var e=this,a=1,t=o.getQuery("secondId",window.location.href)||"",d={adManager:e.data.adManager,kpdClassify:e.data.kpdClassify,memorial:e.data.memorial};return new Promise(function(o,r){i.ajax({url:"/api/second/video/list",data:{lemmaId:e.data.lemmaId,classify:JSON.stringify(d),pn:a,secondId:t,scene:"pc"},success:function(t){var i=s.getMockResponse(t,a);0===i.errno&&(i.list&&i.list.length&&i.list.length<=6&&i.hasMore&&n.logViewEl({page:"lemma",element:"first_video_list_lt6",lemmaId:e.data.lemmaId,listLength:i.list.length,hasMore:i.hasMore,isSpecialLemma:!1}),e.data.hasMore=i.hasMore,e.data.pn=i.nextPn,e.data.eid=i.eid,i.list.length>0&&(e.data.list=e.normalize(i.list),e.data.secondId=e.data.list[0].secondId,e.data.listLength=e.data.list.length),e.addRecommendAttribute(e.data.list)),e.mergeUrlData(),o()},error:function(){e.mergeUrlData(),r()}})})},getData:function(e){var a=this,t=a.getRequestData();t.then(function(){e(a.data)})["catch"](function(){a.data.list=[]})}}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/windowScroll.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/windowScroll",function(o,n,e){var l={disableScroll:function(){var o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;window.onscroll=function(){window.scrollTo(o,n)}},enableScroll:function(){window.onscroll=null}};e.exports=l});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/elementDrag.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/elementDrag",function(e,n,t){var o=e("wiki-lemma:widget/feature/Audio/isCollide"),l=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/windowScroll"),i={bindEvent:function(e,n){e.onmousedown=function(t){var i=t.target.className;if(i.match("J-sl-player-cover-container")||i.match("J-sl-player-replay")){var c=0,m=0,d=0,u=0,a=t||window.event;c=a.clientX-e.offsetLeft,m=a.clientY-e.offsetTop,document.onmousemove=function(t){l.disableScroll();var i=t||window.event,a=i.clientX-c,s=i.clientY-m;0>a&&(a=0);var r=$("#sl-player-el-video").width();a>document.documentElement.clientWidth-r&&(a=document.documentElement.clientWidth-r);var f=$("#sl-player-el-video").height();s>document.documentElement.clientHeight-f&&(s=document.documentElement.clientHeight-f),0>s&&(s=0),e.style.left=a+"px",e.style.top=s+"px",n&&(o(e,n)?(d=a,u=s):(e.style.left=d+"px",e.style.top=u+"px"))},document.onmouseup=function(){l.enableScroll(),document.onmousemove=null,document.onmouseup=null}}}}};t.exports=i});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAd.es.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAd.es",function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function d(e){this.options=e,this.requested=!1,this.adData=null,this.size="normal",this.initEvents()}Object.defineProperty(t,"__esModule",{value:!0});var a=e("wiki-common:widget/lib/jquery/jquery"),o=n(a),r=e("wiki-lemma:widget/tools/throttle/throttle.es"),s=n(r),l=e("wiki-lemma:widget/tools/eid/eid.es"),u=e("wiki-lemma:widget/tools/clickstream/clickstream"),c=n(u);d.prototype={constructor:d,initEvents:function(){var e=this,t=this.options,i=t.player,n=t.onAdShow,d=t.onEnded,a=t.showEndAd,o=t.getCurrentData;if(i){i.on("firstplay",function(){e.requested=!1,e.hideAd()});var r=s["default"](function(){var t=o(),n=i.currentTime(),d=i.duration(),r=l.getEid("endAd");t&&!Number(t.isVertical)&&n>=d/2&&!e.requested&&a&&85311===r?e.getAdData(t,r):t&&!Number(t.isVertical)&&n>=d/(5/4)&&!e.requested&&a&&85324===r?e.getAdData(t,r):t&&!Number(t.isVertical)&&n>=d/2&&!e.requested&&a&&85325===r&&"small"!==e.size?e.getAdData(t,r):t&&!Number(t.isVertical)&&n>=d/(5/4)&&!e.requested&&a&&85326===r&&"small"!==e.size&&e.getAdData(t,r)},500);i.on("timeupdate",r),i.on("endadnoad",function(){d()}),i.on("endadshow",function(){e.adData&&(n(),c["default"].logActEvent({page:"lemma",act_type:"end-ad-show"}))}),i.on("endadhide",function(){e.adData=null}),i.on("endadclose",function(){e.endAd()}),i.on("endadended",function(){e.endAd()}),i.on("endadclick",function(){e.endAd(),c["default"].logActEvent({page:"lemma",act_type:"end-ad-click"})}),i.on("endadmaskclick",function(){e.endAd()})}},getAdData:function(e,t){var i=this;if(!this.requested){var n=e.lemmaList,d=void 0===n?[]:n,a=e.secondId,r=e.title,s=d[0]||{};if(s.lemmaTitle&&a&&t){c["default"].logActEvent({page:"lemma",act_type:"end-ad-request"}),this.requested=!0;var u={query:s.lemmaTitle,preQuery:r,eids:JSON.stringify([l.getEid("endAd"),this.options.eid]),lemmaIds:d.map(function(e){return e.lemmaId}).join(","),url:window.location.href,referer:document.referrer};o["default"].ajax({url:"/api/second/ad/pc",method:"post",data:u}).done(function(e){return!e.errno&&e.adUrl?void i.handleData(e):void c["default"].logActEvent({page:"lemma",act_type:"end-ad-reques-fail"})}).fail(function(){c["default"].logActEvent({page:"lemma",act_type:"end-ad-reques-fail"})})}}},handleData:function(e){c["default"].logActEvent({page:"lemma",act_type:"end-ad-reques-success"});var t=e.adTitle,i=e.adUrl,n=e.imTimeSign,d=e.mediaDuration,a=e.picUrl,o=e.type,r=e.js;if("image"===o){var s={type:"img",sourceSrc:this.options.player.src(),url:i,poster:a,imTimeSign:n,duration:d||10,title:t};this.adData=s,this.options.player.plugin.endAd.update(s),this.insertScript(r)}},endAd:function(){this.adData&&(this.hideAd(),this.options.onEnded())},hideAd:function(){var e=this.options.player.plugin.endAd;this.adData=null,this.requested=!1,e&&e.hide()},isPlayingEndAd:function(){return this.options.player.plugin.endAd.isPlayingEndAd()},changeSize:function(e){this.size=e},insertScript:function(e){var t="endAdScriptContainer";o["default"]("#"+t).length||o["default"](document.body).append('<div id="'+t+'"></div>');var i=o["default"]("#"+t);i.empty(),i.append("<script>"+e+"</script>")}},t["default"]=d,i.exports=t["default"]});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAdPlugin.min.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAdPlugin.min",function(e,n,t){!function(r,i){"object"==typeof n&&"object"==typeof t?t.exports=i(e("wiki-common:widget/lib/larkplayer/larkplayer")):"function"==typeof define&&define.amd?define(["larkplayer"],i):"object"==typeof n?n["larkplayer-end-ad"]=i(e("wiki-common:widget/lib/larkplayer/larkplayer")):r["larkplayer-end-ad"]=i(r.larkplayer)}(window,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(n){return e[n]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s="./src/index.js")}({"./img/exit-fullscreen.png":function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAABmJLR0QA/wD/AP+gvaeTAAACaUlEQVRYhc2ZPWsUURSG37vZwlJEolgpiiSd2lvkB2jhBxYbiK1gKiv9AXa2sRa0tLH2d2RBEILuJmiIGFgMq7t5LHZWbybzcT/mMvvCwM6cc9599s5l5p67Au4CX7LjkQIE3AL6wDfgqUO+AbaAEeUaA0PgA3B9Xji0EiZALwD2o+XxBzhXk79WAVmkI+BqR5KxfJYkvQkAvmR97kq6UJNvauJ5nZH0UsDDbERteY0wsJ2rX63Jn0+DscfoDubF94HfueAx8CQFrKOnyXlO7WAwcArYzPeE8sEg4FZgQ4Fbgw0BbhXWF7h1WB/ghYB1BU4Ie2R5/nItqgROCPva8tzyKSwFTghrgNvZ4feKrgDeSwEbLWCd02uJvBYDVnICXknxvV3ghqRXki571h5IWi6J7cdAlckAfUlNjsSOMeZKg37/1FH9QtlXLxr2+y9gE79FcJmGQA/fR4yHTAZ8VlJl31SjkTHme1kQWNas9VkK9P9sjPkZWFsvZg/0HjBo4K6NceiaY2A3GoC0dZBkfjGbt7uSLjZo2+82aGbrvIpBkbQj6Yen36GkZ5FMxQJWKm5n0EZKMgGrOcDjgnOnNj+5CmC/ErEvYRuHrxndYbeJ3EiZG4etxj1hs+txwIT0OYGw0cC5ovoOMhI2CrgN2GDgtmCDgNuE9QZuG9YLeBFgnYGBaS4h+sUQAusEzOkNiiqNmP0XUPmDQmGz2qI2fwLcE/DeA3autVSwFcCDjqTnksY+Zg7alzSxznd9io0xbyU9ljS1L0uSgGvAO07+gVekMQ7TIPPcBA6BT8BNH1jL4wGzaboH3PkLppnwQwJJFOoAAAAASUVORK5CYII="},"./img/fullscreen.png":function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAMAAADyQNAxAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMAiImKi6+xtO7w8vP3+Pn8W6LTIgAAAAFiS0dEEJWyDSwAAABpSURBVDjL7ZRLCoAwDERTU/9pm/ufVoqKDgTbjbiwb5fhkUUIQyx6IY52Br3TU4R5OawZUiEY07lrhFizRc806y0raihY2eDgClbZ+BM8uQqj7vbtVz+1jC70gv1ld+EKaSROVhd6SLsN1ScS1tPk8+EAAAAASUVORK5CYII="},"./img/muted-white.png":function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAFPFKMkAAAAAXNSR0IArs4c6QAAB6tJREFUeAHtW9trHUUczsk9TRAxpmlq6oNoSU0tBSn4EENbqJprE9P4DxRJUYktCNWKhT4oxmIRbaXeL0iR1PQS2/rgk6VSH4SqGBHxpSKJaX0QtMbEXPy+zf6W2cnOXs7ZzdnIWTiZ2+/y/b6ZnZmd3WQWFhaKiwKu0pMnT2YCZIqWWOnv75/VlUpZsXPnzvXl5eU/6I1Stix5CfT19b0hVpe4c7SLi3fPz8+/w7LlDuCtVDTZIHXMuyyxYWZmZgMb1CszPDxcolZ45TNBZAYS6cKiAnbcEcf09PQGuLIulufm5g4zBfB7rVB18kZGRp6mNUbnciFme3t7t7GRQq5QRUsEmbosqEyKkEtAKtXU5UJtiJIP9ALsU0EGLbp0IYyzo8XFxXv0elPZMUK2TEJSz0EM47tJHGkvLS393NgvoqSn6NCB2dnZHXQoBijjIJFugcAo6tt1Ayyj7RrkViNr6QHZEAzv9+0dCVEceBlmnYPESyBIWXQCbygR9EsDbzo/ZWkLHGwi6JcGGhFy/YwYiYXy91Bs8lOWNk8jYbyLAaZWOC0tLRWc0B/G5Wegq6vrNlUZsvsdIw0NDTc4Z5WUlAyrQnq+srLyand3952st539zXwgsRSSi4OvoqLiR9vAPpRfY1skI2KMKabjz6QcyYiCwEIkoVm9o94jtqA40dM9kH2bldSB7E/Irve8i9E4gcY6CvNSnSzWuP96hgOlhsnJyRq3qLnkOdgofvHixX+QcBq8z6y+2OIZTpCS3u4Zji4UVI4FSZCTMO2xRBPGUZBMaoAYR1pQBJi8ejD5fCJyQfeFyJnSSEA6OzvXVFVV/Woylkt9KCCYFW7ASUUujoJ0XUAC5rMgW652sYVZuGl0dPRntVH2V6yTLnUBUYVzzdMBN3f22sJloQljah33Z7ZtZ61hOTEgNM4NIpKBXbt2jRIQ6/BU9ALqDzKvXokCUbsATvcBxEZsfw+g2w7oXaYD+QMKN6tIs83LGCEAdJO13Nu2BtQukzESaorHrqcZm5Zv/UCJQT8ZvzadEU/Zs2fPjqHBkkWkg8gf8RTMoTIUENU+In8VZf64VeMGaQfzuV6huiZXJ2H0U7PopQZILE9rYaj3kzl06FBRYYzoDKVmjBSA6F0TeWZVDWBmfQrlF3EW1Hb69GnZZ6giofNZAwGISXippScs7b1IlhdIT0/P5rKysq8JIM4r0mDlIpcECAYUqmtaW1sr6+vr/4qTAd1WICNgYTBpEEsYwU7sLlQ6ryiwK/sCZeeUQ4/CVG5ra7tl1apVz2GTvM8kg+3i8fHx8cHLly/PUMbpGkTOUb/NpBilvqamhtvKBtjsw0bqdl0X9X+irqqxsXEd0g62q11j3YqszPWCczrgtRZOf1nMLv4VECxBzgLBvAqE5dguOBG2HTAaCGm3fCYGhNY1MP+iqkqrZ9G6EgVCDwoY6yZQyosI7L+JA7G7w3GqjxlpSBSIYUw4Y0ZAME0MiBcIpVuWgHGAYCk3Tj4q8jB5gLgCOc+BqYLBpPah2HNuIewnOIs6ZQq0t7fXVVdX8ww50oU3lM/iLOQEnHo+0BMMwE4h+CExHGoXD6VvoLBRlPQUxw1vYjp/TK+PUna6xk8JEWxGlN1+Mrm2hQJCJ6dOnbpg9+90rk699EMDEWWAqUZXHJdyXGlkIHSM8fDE1NRUowLCeouklCNnXXdJFO1z5879BnmO/r0A9koUXS/ZUHeNl2LcdVl1TdwgaK8ARGc1NYykZrDqDOWrnJqeyRcBut8CIRojBUIKhGgMaMWstyKanayL+IzlDrxzbMdm/goeIr7M2lBMinkhBC/11+Kl/vuIYbvEgTfBRXjUOop93l6py0e6bIRs3bq1qra29ghOhR/1CbTcp21ZmhInBLt7PtQ/j1/egw3DaCKE4CObLhwCvAUAt4YBkSaZ2AjBu4pNeE3wEYK7O00BRsWSEyEdHR2rcdD+Hpw+GNVxWuU9CbG/fhkB6JvSBBzz0afA02ZjGseXONv1j6f88Npx8dNy63ARZzsvYVU7oOp4EoIl8GUIpYoMgkYAV7BKCSFr7Y+4AonRiRACYIsnr67LkxCXRIoK6E1+KHaQn0chmN02NCMxJiKgp39y5US5oggR1CDG+rLORAzknsGPR53WrSF6SI1EiMyKJETAm4hB+wciY6eBRIj8/+JpF3PLxwjI9L9InGOc/x+QwE3pih4hpjkC/8j2VSaTkf8BMM4xXqSsSEJMRCBA161hmmP8lmsTIb97sZfvOhDRgi0Bh3+oydI0xyjL9f3Yx1xV4/IkBC+kHtiyZUsZ/vOI74Gst+aqEvMAdg+eV15Htl5vS6oMn/xPHpUM14gw+fUh5jB0HlH1Yjl1xw7ycRgdwq9SNR41j8kx1Avaurq6zPXr1xei2hf55ubmkrGxsTkpq2ksqwxG1DH8aiYmJviq85jqIIl8LmQQj4kMtnneMmzI5rp06RJfQj/Jn/3g9y7yD2VjK186sRKiBnH+/PlrKHeybiUdDSRGiErOmTNnvkN5E+vSfni0LISo5OAbDz7Cr2GddryI6Wf+hCqbj3wsq0w+gCflM5ZVJilw+bBbIERjvUBIgRCNAa1YGCEKIVj1Fv4DCsK8yqO+EIcAAAAASUVORK5CYII="},"./img/play-button.png":function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAYAAADBNhlmAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAArRJREFUWMPNmD+LGmEQxl/PO46IBrIcF2+LE0QIaGVhEbE4hCgk5YWQGJAEU0kuqbRYm00XuNZWm8tnSGVnk09g4SkIdikMFgYUxcwTZo89MWb/uy88ILrvzG9n9p2ZVQiLa71eS6Qs6ZL0jnRFUlhX/N0lXyMJLxY5CpPypCpJNakq7w27AXZMuuDoqDalsK1jp+CSpJoDYJuCzaQdsADfqeqy4CNgFu6I9MoDOE3wdWQmcl7C6SEDRgAv9gB3l24jB0Lds5K7SknNB4C1rSVoz6ndnWruEIqPAJV7HYdbkGlDg8Hgut/vX7sEmdcDWumtajqd/pVIJFblcvnHeDz+6jBgVT+VWDISj8fXmlKp1O9Go/F9Pp9/cRBSEjwO2QbUlMlkfrbb7RuHALNiuVy+dBJQU7FY7He73aYdQLAB8L0bgJDd5xNsYrVafXIL0O7zCTZhp/4ZBdRUKBRuzdZDRLDhV0CwicVi8dmLFCuKYjrFYBOz2eyDXw8J2MR0On3tUpm5tVtmwCZGo1He6ULdarW+OVGowSaazWbMr60ObGjHYXoYP/ptWAAT2AB4SKF84bdxC0xg+zvRVCqVmJ166LTAAib9UP1wOBw+9wsgWMCkBwzmcrlzIq/7IHp1sIBp870p0ul0nu4bEAxg2fbmeUCK7jPVnNoos2xdD0KhkEwV/K3XcPAJ32D4378fESq6515Cwhd8/iu1mwt/4Ei4Gy/SDR8cOYl9C8OQJBkPrRunGzb5QJiG00Mi5HI2m43hTp0o5rABW7DJcBErcPcODp8suVQqxdGCrPRu7MFe2GCwqJEDYXQd8J2esXG5Xq8/6fV6zyaTyRsMlph+ER0In/EdfsM1uFbbxzYiu0qJnRXkFnSqc2hUp7w3KDxahzwOPSKdkB5zdM748wn/Fr6bSiysPwlCtPGo5+eOAAAAAElFTkSuQmCC"},"./img/volume.png":function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAFPFKMkAAAAAXNSR0IArs4c6QAAFpdJREFUeAHtmweUVUWax7tfv040dJNzapJIVAFRFGVR5wgiI6JCg4IJcHBFDCMjeIaDI0lAYUQWHBOOhNFBjmBAWI8Iix7MiuiCLEFybqDD65d6f//i1fW+168Two474z3nvntv3a+qvvp/ob76br3E1157LSmhnMMT+37evHmJsWVRRMOGDWvywQcfBEQ0adKkpHvuuSdD94aoRo0aw2+++eag1+stUOHYsWNTd+7cWePo0aMn9Jwgnoo5evXq5bX39vryyy/ndOnSJdkhsoS6Nm/ePO2dd94ZoXt6SDJEqtm+ffsUFerQCxGOGjXqUr1L1I/pN/Jzxx131HnppZcOu8tKELlf2vtyiaIwUq3XX3/dVjZXh2D8+PFeYbRy5cpmenPZZZc9bSjq1KlTdcWKFaM0ksaNG6enpqa21H21atVqValSpUFCWlpadsOGDatoVK1ateJ9akuViTgUChUkpKenN1KNjIyMepZAzyLo06fPhQ5o1Grm9/uPqAWJQkSCPmqYDz74YEo4HE6cPXt2kWGQnygCW+i+lkvgJi7t3sEqlkDaeffdd2f1799/x4gRIzLd72MBdwYrrdAga9euXW337t3LNNgmTZp00NUCIFilOcBYxOnTvVEe/QgtEft8vkNfffXVYxKUGhXEKlcjQm/Xrl2vQ7NHlQsLC/du3rx5ljq2wzHX+vXrt7nhhhtm8qKQRtwjSGjRokW4TZs242mwkV589tlnf27WrFk/Q2SljjrUljps27ZtoXrv2rVrBw3NcqLeEVthzZo1M1GIpirPzMysqfpxpSNQv/jii8zjx4/v93g8KVRq/sorr+xRr3r3zTffVGnQoIFv4sSJIZXFbUQvKnOclUYssJXpuARtmY1IqeK5xNhWSm3kkUceSf74449bvPjii1OnT5/u0KnhWI11XtrWRTBy5Mhq33///VY0d2t2dvbDBw8e9Nr37733XtbJkyez3Q0bYG3L3333XdL27dvrFhQU7EYNwmhyp6Kiom8bNWqUgQ6FgsFg4uHDh7Py8vIO4DQaXnfddYeMUkpt5U3kctetWzdJSjR16tTfyE4ob6xn3ePcJwcCgaO6xzSmqlxmYWxHmqgCbOEw3uagtFZ2opfuRqTRotO1atWqdXXPTJIlOq9Y1Hgp6HrJJZfshUX5eQuBc83KysrXA/TiMFf3cJaiqwMYDScDZuqpU6f8lIf10n1QwQohhA2Z+8TExGLReAHPVMDEf1DBc889N4AJbjUO3PGPKkciNXSFPg9a46S496nMe+GFFwZr1aqVhRTks6uAzXZEnICF1ua9M/d269Yt8b777uvETBpCeru2bt06t2nTpqYjTR8JnBpvvkSNqVdHPz6h5yMpKSmXqicd9erV2/ftt9/uv/POO9vzmAh+jy1YsMCMwsFEhJEG8zp06NB5//79jZDWNpXjDizYxUwHW9HialdffXWh3uko1YqtTwFwDyLPHT16tAHxdLXo31IbiSYr+8mKrWyqct6eFU7K6aNCr8/KaCrUUzlEUVpSDq3zWiopz3PkyJFkNMmblJQUrl69ul+6H890nYpl3FSYEXWOy/Ps2bMnBTPPfPfdd4deccUVM2zbOKEm+IgjMGJiWFsujaVOEnW8ycnJYWwnqPk4luFyGVFDzM3Jubm5VQmO28+YMeMD2wkx3+Trr79+gp7xL6mgY0Rt/bXKcanexx9/vOttt922Xs84s+wff/zxCH7aF2VGco9wlySXKlersESTvlyn3CgupTWd+OVOdTBzrKKxJgoG8EfNTCE/Cl/kv+W35YIJYyYxGdS37em9pX311VcHqX3ND+pfpwm0FIYr7LSEsVcc4UE6zUYPqqsjMa6rnQdEbxlRuMphIheVjxkzpociHESSQRvNVaZD9CpTW2LEQHnixIkkOVZBpwOi9pra5GDleNu2bdsMP7gb731qypQpZSrkpZde6qfucTptq7bmzJmzAWdcDeZClOV+/vnnf1I5yP6d8jREZBx4XB3BCvLq1q17/Mknn4xSPDVQ3iElJIoIMk9r3jIHAJjJER8dZor+FDVIYBLsRLkHJRYjxW5GHP977bXXtkOGTT/88MMADn0vCOUBb2FFzFORBrNMOnWHiQv0q4iBFTJNFWu2ZXX4B5VjSW9QFkCfTvcr+UhRJX80/FnJL97BSnGDZC9Flk5JsXk2AYforY5I7ljZ47YNaBpJidX+U089db2rvLHasMrquHiZnOQVgSoBBU0kAvYyuoybbrqpJcvEjzUSHUQ2U3r06LFAJgvdVpUh/1bo034i4wBTphwdQCSFpRs4vmqY7ApQvkS0+Jym0B6RPkmUOhxGzFOcH7cjQ+7VGMFv+/btOz+W1DLiXqaJRuvMAwcOZDLA/Swkxl511VWLWfbktWvXLmSZEF25jIjIHpYpfERafn5+1pYtW2bQ6GDeh5F1A1YruXadYOvoatHWPX7FBhV6dI5KMeLU4sYyJRGqnA7CUZ7STVyBe7fVVID8J5IIrCXCyp8oKnf3iwkDzlg0lRtv2dSgW/yLQeRXRmKFdcZWUxHfENtZWc9nxIiiNkVeeNpkwgcP076fMDI4bty4MzbnSjFinRjzRiqeNZOMzFgmrkEs1XsQXxzjvTN3uEevevZwu3VbpmuFGbFBMBNjFVaoNUDjKya1amoENJbj3n/DO8UvTjhhGVdiggkyUXkFaELxPHC5VqPGxATL3RRm1epEXNewRP4fy4QY4T4LESlSd5bLKtdsrqj/gQceaPvRRx+N1+QnkboREp2OMhFRBa1fYEB5vOpclxFZdVVFOs5/8803/3zjjTc+SowhBhwm3B2BXjIr5i9UZ9OmTU06duz48JdffnmSx6iQMwoRNWBPoUDIl4I+ZDJlZysJYJkAnedQ0C7EtCbNblMU6kwRmurp1HpG4SFR+wC9Q5+GTZs2rduxY8dShZbKnEMREgpkEuqKrhRxKwrjqKkIjETCLBtV6Tpw4MCuLDPq6Fy/fv04laEvW7SEUOSm+kuWLOm5atWq38J4DUVnWpbs2LFjsWh1KGpTdKZ+1T9FHiMvoPKiUFVnzZp1IcuBbCkW8WVSv379phBXVhfXdLaZqf46Gsklq+ojdExjtM6AdIMYEjlTBg8evE7PLL66kNPaRp2C888//1HEm6Ny8p29+GqwElSCPJ5Wbi1yNArgfsKwG+fnjTfeGI4oAKxehuJb1dECacOGDSUQEZJ0sEbNMKCA6mmtA2K1SLI+rXJimL1CVG1ZRMyQGL0a7iFuWb8WMKrDkXM/o2lx++23ryQWzWVURWU5LcJFwV5E1DZKbaE7XpQ6Q6kv3hWReJqncgLthpSnsp5yIDU3cO4UkEv7KwF3N1BqDwLtkfOh1q1bn9JSwtq/wj01yGGvp5/4pV4Acy5gQMdVuHbt2lskZjoPIUonrQYwySDj9FvCfFmxB8l8nVKAq/BPnZbmDZ3eXTeqg6UFsJjVEa97kQaqdQ0ISSfMASNJ0kX7XIIRvZDJqUGLgCWu6FXmDPQ+0cOAcqhOh7YNlhMSm1NeghFxD5RpfIQI4ohCiCZUGabkXWnDy5K1uzrFZ2zVwHQvFHTVQbkfMTqTpGHE7ZCQbXW+17RDq32U+xYvXryHBVI+jsofJ8HijOh082ZxrXWurMQswgcNGvQCog5iuhKFSfCKVmKSuGw9wwjKpUTuKRV26tQph86NveuZBdN2HFxvVm65KFchnlcTVwkGRKulBf4mFQV16jMhnqB+WOXLly/vIzqQCUhxMW0HEY+UkQJ/dnb272DGyZ6qgg6ZL6PZmZOT056FVZZcd+zkdprytEND7t7u3btPVdn7778/CjQKaFeOLoPPfHNUzvw1i3KfRK5nHR5ZBEmXACabiy9pDKT1EEt95cSYYzpCY+B79tlnN+Du5+BRa+GulaiWvB1o1ZgO4A6Q5loBs+v4prWcdvzcpz/zzDM9eW3MFX/yHxq8QDCVVE83sg4gLwJyVUoUxIwgEbd/koaaYY5/RbGuJObIAeKBlLUHWj80UcqOYmuEPj6cDZWlyKcQQHkpr3nXXXctUV+gMUPuAR8VNfs6DUV8hTg0XGoWhrEQrj+I2G554oknLr7//vtXwkAKjP7AxDaGTtLUuPuQ41M9lWlQoJN26NCh7/UM4wdB42ksqlCKrzJ7lLvAEkOaFLGcdBioQZriM5xeTTWAdfjkJ0DpB2bZHiBxwj0FKJRAnOlff/31H5koRyPyNsxFZqpw+yhAKH+BJaQ0ypYtW+ajP4fRpY40PE2MiAldZf6cygg4Mle5dAARFF1wwQWTuG+AEzum+crNhOh0OKI5/Rj/NyK2MCP0EeoFe/bsOeu8885b9Omnn25SDWbVWcwlTs7MtqJ6MneYMF5WjEXasiTOtUKMWOqIUgdQuJMwVCQLk1LKFBFNlBXYOpGOo5Cy79zXSjGiiq5RFqKUZjbV9B/H67r7Kfe+0oxYZrhqlMY6yu2lAgROPFAB2nNK8isjsfCW69BiK/wzP2OI5TvWf2YA4o3tF2Mz8Zj7R5T9CkgM6mc0z8S0UeFHBVg6mCjNNyH3upcQolgTp+IZhQqiKy1c0LtzdZxzQCwILG08AoCkUxIrk2QizGRWGMrvJSm4IwwOsrQKAIqfJXOQLEaIuqXGUP/vABEQ0gROAZFErJ/CajqFlVD6Qw891Orhhx+exQLjAvfAWCtMvOiiixZAo6ycgk5FOmXGdRZwq3Xu9s5E286qhsSCwLrDyyImFW1Iu/zyy2uzYXcSQW1/N9Pue1LXQwHjFRbYAeoqiVJm6Kf+pHksOwW4F8CV4zCpBi3kWV6EWLsEWDaEiPiNKZZnhj8bEAuCVnOWMUCQNqSzrs345JNP7mXJcS9m4eRELAgsyJTMa2SftRLgNGlOLdjVJu9K1RBphcyQxV4K662s/+JgJdFU7VG2kTTrrSwIuT3pY0GnZbTMsMSeFdu/rmcEiBsEMURHXiSagiakIqEqb7/9dn822UxCQlF7ctUh9JvYKD5h7ty5B0iT9GMD3x9VrkO+5PTdT7+2L5VEADIvZQ56pk+BqKuHq1MRALqzCe4HUv/j2KO2hPf5aJ7Wd4GyQIkCRJ3rEPK6qkMG6uSEkLy5p8zDfZJUlFMgKOvRdejQoTNJ5zRTXfcB7QE+G/x++PDhGxi02QCCE01FO8wC1E3rvlff1iTQJjliJb08Ak4mQQpAZ1imwXaIPLI6PUkJDWWnwRTbDjsXppNM6Utu9A7G44HXQtoVKFEbASy9A4jAsDMBFWX7+jZmZgGQV7xiJBG5Sq2T2WrYaPLkydNhxKQNbaO6wngBOxGmoClLYb4AprVANqtzJKUtFIkakLtO7L0EIIcMP2nz58/vTDbwHcBIV/MbN24c07t37+W0UaiZiYyRD/oQ2rCQlMO7JO/+k3e11KYyS/v27VuC/8phlkvAjDRWZaRKmI8BxILBx6BkJJHGPqKs1atXv8gs0EsNVuIII6mXMIOZqOspQPAJBOvY1I5MTL6GW+m3o316F++QL+FMIhtZPwKGyDwkCecyK/0bKfkHEU6e8v70U8SAw+Rswp07d+5FUmkN8U19VZDQoJ+MP/sDGhIiFaccTtTnPtOwfqxzUnyACVR566235lUGDBB//9Zbb70YKTUnofQoz/uUEGKX6yn2oRaSKgsoiyW7V38VPRSs0abMwj9gwIB17B67AnCcrCuz0kDyQuPgOUMarXblPHGshaRsjpP8HOHuC7PJIVfdEdPT5h8v4/ZIGdyHE7pDIPuSKXiRRKqbiN1iSlxfDIOdUM+2nK2V+oXZZkwkDUnLDGa34hakcJSk5wny1QXaMaQNO8or2anORqCutssEiH70D5BQZJAFzz///A5MZ5irvrLCo4lrWsqXAYqZyeAtIO2cMGHCZoD5m5ue72n3M85U6L1M1R7rLy2N40NUABhS4RJqTAd+nOAxOslTgowziNTkzIp1ok1G+nbAFgDbyc+5qk18SAjtDSDZIj6RfEn7aynvZdtlM1sOHyCf4L2ctD4wiTcegwFMeIM+FFlatPR8CV1miB9zduDZ91GA2MLYK2CEOQOAUMTgi+jA+YwWS3u2nwWugioJAB5CaG8IH7TFDQg8ZTNID4P0AEKihASdyfXyn7D/xtE6bKF1jQkSM3DKJ9GUEsKvECDSHHUok0JSSahZGFs06m79wrnQDjsKNESO1fBAmYc+G9h3uqL6BwAgLBAEhn0nvvlfThP7rCuAHSN+KwBgbWFwaC1NhQBBtaRiVbE7RYVK+QcjDIQj8UAQX6JTSfFKfwe1zMS70p6JRuUEEUgKn7prMX2e/ndSpAI+7j1pMGCYaVxawqk/mHmZhTq524X/LfAelLZxmtW1+70DiJCFQChLLaOQYwobicMa6a5o7/fu3fs34oM/sZUmlzaKmM40/QWY50PSHmmO9SmxDsy2UdoVEExgyAeeFPrXJ7IMZoVF8OdMBnwaXccuboXsml0MIBY8tKM6jv137vbZJ7KUcfrhNYj5GOG53xtAxLTMANUL0KmPD4ZvMW32dhOWds/UNwgVHIQ0/HwQmo19/oWvUwUw6mNW0l7noAUnThslbNhNAwiJShdwTRkyZEgDtGUtA8myNAx8JzPcnZQVqC85Uy3yKE9DQzLY7DCNwTufc9mLu5GdyivlC5khA5oMbFv26mgIoOilnxiimAjwZRpcgoTT2KVTB5Mxn+xlk7JlQPOAfkMi1UnQnKfGkFoKO3QeIfB6hLrH1qxZ8xh1VzGgQiQscALMVub/Urbzylz5F9i1bjDg823iinsZXD7t+uR0Fd4DRjqmrc3D8/lMeLXtA57zCAH+nTby0QxNDqF4X3GcrLsNUKTWnFqrSF3luQWAAUKNCxQBIhvlqv97pi9durQ3G42nwpT+khR1AMi2F1544UEG9A3+xofEQrSh+umANhiNMl8CVQnpbkUz+yLpEwBdQFxj9lEw+GT4MUkl6pool3Y09SuhFBR/eo/gqvBVuTH9Lae8oWWEvnLZB9QLTT4AeAV8gfQrvon9iohpFzuA2MqlXS1gei/Q5Pndy3061Z9D0/k2fzs+5/cwHBXcqR4DW08QNR4Aj/LoJSK+4Zprrnlc73TEAqKt45Ki7Q8BmS/gokXjjJ+jjhJQCsoy2MoxkZAgytfx7nOSTjmYcS5gFKI1+sgYd++JAHFMRp2UdVjHGKERM2ZxBLNBwCkCnAKp7JVXXjkbcBbw0TmL5f2j2dnZQ6A1voJFVs+FCxeu5yzGuS3DV+1y9yntcz/rPtKv6S/2nWYgAaJyotK6gOGE6rTlX7Ro0RD+TLcRjcsn2i0SwHL0sZrhbrfCGuKuFO9eGiRJcpqUIaYiFVZqII11ThM23k1ngXZ5vLq2TBoCaH0whRPYeIE2a5TFvPrUCp2ZTWG4SVGysMwkOg2wNd+HiZocLSCYHK17xrN9uq+VMhl3xbLurWlZcPQvi8iiUanE9JkzZ17AH/Ofwsu3iG2HGOEjtizcgv3nAUiFImIrCJmwVtK2TZkU7ThZ/BgNt2RR13MCiLsHC46kKGZh2uRZtBDDGacuW7asJ8t4bTpKYlPBEqbE1ah3IVO1X7tZ4s0C7vbP9v05B8TNcKwkNYPhCLW6Nn4D9Tb/t1G0K6dXnnq72z5b9wKkwk7153YaUVnHGZfVXoS2LJJz9u7/DBD3CP6RA3bzEe/ecULxXv4rlv0KSIzUbY4hpvhf85HvRQn/C0Zia1bzuHNeAAAAAElFTkSuQmCC"},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js!./src/index.css":function(e,n,t){var r=t("./node_modules/css-loader/lib/url/escape.js");n=e.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),n.push([e.i,"\n/* TODO 应该加到 larkplayer 里 */\n.larkplayer {\n    position:  relative;\n}\n\n.end-ad--hide {\n    display: none;\n}\n\n/* Detail */\n.end-ad-detail {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #fff;\n    text-decoration: none;\n    font-size: 12px;\n    height: 24px;\n    line-height: normal;\n    margin-right: 17px;\n    text-align: center;\n    padding: 0 13px;\n    background: rgba(0,0,0,0.60);\n    border: 1px solid rgba(255,255,255,0.30);\n    border-radius: 10px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n\n/* 这里是迫于无奈，有童鞋在业务里的其他地方为 a 元素统一加了权重较大的样式，只有这样才能确保正确的颜色 */\n.end-ad-img .end-ad-img-bottom .end-ad-detail {\n    color: #fff;\n}\n\n/* Close */\n.end-ad-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    font-size: 12px;\n    color: #fff;\n    height: 24px;\n    line-height: normal;\n    padding: 0 10px 0 12px;\n    background: rgba(0,0,0,0.60);\n    border: 1px solid rgba(255,255,255,0.30);\n    border-radius: 10px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.end-ad-close__separator {\n    margin: 0 5px;\n}\n.end-ad-close__time__value {\n    font-family: Monospace, Courier, Monaco, Courier New, Terminal;\n}\n\n\n/* Volume */\n.end-ad-volume {\n    display: inline-block;\n    width: 23px;\n    height: 23px;\n    background-color: blue;\n    margin: 0 10px 0 12px;\n}\n.end-ad-volume--normal {\n    background: url("+r(t("./img/volume.png"))+") center no-repeat;\n    background-size: contain;\n}\n.end-ad-volume--muted {\n    background: url("+r(t("./img/muted-white.png"))+") center no-repeat;\n    background-size: contain;\n}\n\n/* FullscreenButton */\n.end-ad-fullscreen {\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    background: center no-repeat;\n    background-size: contain;\n    margin: 0 15px 0 18px;\n}\n.end-ad-fullscreen--enter {\n    background-image: url("+r(t("./img/fullscreen.png"))+");\n}\n.end-ad-fullscreen--exit {\n    background-image: url("+r(t("./img/exit-fullscreen.png"))+");\n}\n\n/* BottomGradient */\n.end-ad-bottom-gradient {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    height: 40px;\n    width: 100%;\n\n    opacity: 0.85;\n    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,0.00)), color-stop(52%, rgba(58,58,58,0.50)), to(rgba(0,0,0,0.80)));\n    background-image: -webkit-linear-gradient(top, rgba(0,0,0,0.00) 0%, rgba(58,58,58,0.50) 52%, rgba(0,0,0,0.80) 100%);\n    background-image: -o-linear-gradient(top, rgba(0,0,0,0.00) 0%, rgba(58,58,58,0.50) 52%, rgba(0,0,0,0.80) 100%);\n    background-image: linear-gradient(-180deg, rgba(0,0,0,0.00) 0%, rgba(58,58,58,0.50) 52%, rgba(0,0,0,0.80) 100%);\n}\n\n.end-ad-bottom {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 40px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.end-ad-bottom__left-actions {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.end-ad-bottom__right-actions {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n\n/* Title */\n.end-ad-title {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    /*height: 87px;*/\n    color: #fff;\n    font-size: 20px;\n    line-height: 1.2;\n    text-shadow: 0 0 1px rgba(0,0,0,0.50);\n    padding: 14px 14px 0 14px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(0,0,0,0.00)), color-stop(67%, rgba(0,0,0,0.66)));\n    background-image: -webkit-linear-gradient(bottom, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.66) 67%);\n    background-image: -o-linear-gradient(bottom, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.66) 67%);\n    background-image: linear-gradient(0deg, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.66) 67%);\n\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n    word-break: break-all;\n}\n\n.end-ad-img-bottom {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 40px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 0 14px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n\n.end-ad-video,\n.end-ad-img {\n    display: none;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n/* Poster */\n.end-ad-poster {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: center no-repeat;\n    background-size: cover;\n}\n\n/* ClickableArea */\n.end-ad-clickable-area {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n/* 只展示后贴片广告，隐藏所有其他元素 */\n.larkplayer-only-video-end-ad > *:not(video) {\n    display: none;\n}\n.larkplayer-only-video-end-ad .larkplayer-end-ad-video {\n    display: block;\n}\n\n.larkplayer-only-img-end-ad > *:not(video) {\n    display: none;\n}\n.larkplayer-only-img-end-ad .larkplayer-end-ad-img {\n    display: block;\n}\n\n/* PlayButton */\n.end-ad-play-button {\n    display: none;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -25px;\n    margin-top: -25px;\n    width: 50px;\n    height: 50px;\n    background: url("+r(t("./img/play-button.png"))+") center no-repeat;\n    background-size: contain;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"./node_modules/css-loader/lib/css-base.js":function(e){function n(e,n){var r=e[1]||"",i=e[3];if(!i)return r;if(n&&"function"==typeof btoa){var o=t(i),a=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}function t(e){var n=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,"+n;return"/*# "+t+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},"./node_modules/css-loader/lib/url/escape.js":function(e){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},"./node_modules/style-loader/lib/addStyles.js":function(e,n,t){function r(e,n){for(var t=0;t<e.length;t++){var r=e[t],i=m[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(d(r.parts[o],n))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(d(r.parts[o],n));m[r.id]={id:r.id,refs:1,parts:a}}}}function i(e,n){for(var t=[],r={},i=0;i<e.length;i++){var o=e[i],a=n.base?o[0]+n.base:o[0],l=o[1],s=o[2],u=o[3],c={css:l,media:s,sourceMap:u};r[a]?r[a].parts.push(c):t.push(r[a]={id:a,parts:[c]})}return t}function o(e,n){var t=v(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=A[A.length-1];if("top"===e.insertAt)r?r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),A.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=v(e.insertAt.before,t);t.insertBefore(n,i)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=A.indexOf(e);n>=0&&A.splice(n,1)}function l(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var t=c();t&&(e.attrs.nonce=t)}return u(n,e.attrs),o(e,n),n}function s(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",u(n,e.attrs),o(e,n),n}function u(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function c(){return t.nc}function d(e,n){var t,r,i,o;if(n.transform&&e.css){if(o=n.transform(e.css),!o)return function(){};e.css=o}if(n.singleton){var u=k++;t=E||(E=l(n)),r=p.bind(null,t,u,!1),i=p.bind(null,t,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=s(n),r=h.bind(null,t,n),i=function(){a(t),t.href&&URL.revokeObjectURL(t.href)}):(t=l(n),r=f.bind(null,t),i=function(){a(t)});return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}function p(e,n,t,r){var i=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=O(n,i);else{var o=document.createTextNode(i),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(o,a[n]):e.appendChild(o)}}function f(e,n){var t=n.css,r=n.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function h(e,n,t){var r=t.css,i=t.sourceMap,o=void 0===n.convertToAbsoluteUrls&&i;(n.convertToAbsoluteUrls||o)&&(r=w(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}var m={},y=function(e){var n;return function(){return"undefined"==typeof n&&(n=e.apply(this,arguments)),n}},b=y(function(){return window&&document&&document.all&&!window.atob}),g=function(e,n){return n?n.querySelector(e):document.querySelector(e)},v=function(){var e={};return function(n,t){if("function"==typeof n)return n();if("undefined"==typeof e[n]){var r=g.call(this,n,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(i){r=null}e[n]=r}return e[n]}}(),E=null,k=0,A=[],w=t("./node_modules/style-loader/lib/urls.js");e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");n=n||{},n.attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=b()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=i(e,n);return r(t,n),function(e){for(var o=[],a=0;a<t.length;a++){var l=t[a],s=m[l.id];s.refs--,o.push(s)}if(e){var u=i(e,n);r(u,n)}for(var a=0;a<o.length;a++){var s=o[a];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete m[s.id]}}}};var O=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}()},"./node_modules/style-loader/lib/urls.js":function(e){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,r=t+n.pathname.replace(/\/[^\/]*$/,"/"),i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var i=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"});return i}},"./src/ck.js":function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n){t(this,e),this.checkCode=0,this.pressTime=0,this.touchX=0,this.touchY=0,this.touchMoveNum=0,this.touchMoveTotalTime=0,this.touchStartTime=0,this.touchEndTime=0,this.touchStartX=0,this.touchStartY=0,this.threshold=10,this.el=n.el,this.callback=n.callback,this.url=n.url,this.imTimeSign=n.imTimeSign,this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleClick=this.handleClick.bind(this),this.initialEvents()}return r(e,[{key:"update",value:function(e){this.el=e.el||this.el,this.callback=e.callback||this.callback,this.url=e.url||this.url,this.imTimeSign=e.imTimeSign||this.imTimeSign}},{key:"normalize",value:function(e,n){return{el:e,callback:n}}},{key:"getCheckCode",value:function(e,n,t,r){var i=void 0,o=/\?url\=([^\.]+)\./,a=0;if(i=o.exec(e)){for(var l=t*n%99+9,s=0;l>s;++s)a+=i[1].charCodeAt(r*s%i[1].length);return a}return!1}},{key:"handleTouchStart",value:function(e){this.touchStartX=parseInt(e.changedTouches[0].pageX,10),this.touchStartY=parseInt(e.changedTouches[0].pageY,10),this.touchStartTime=Date.now()}},{key:"handleTouchEnd",value:function(e){this.touchX=parseInt(e.changedTouches[0].pageX,10),this.touchY=parseInt(e.changedTouches[0].pageY,10),this.touchEndTime=Date.now(),this.pressTime=this.touchEndTime-this.touchStartTime;var n=this.touchX-this.touchStartX,t=this.touchY-this.touchStartY;(n>this.threshold||t>this.threshold)&&(this.touchMoveNum++,this.touchMoveTotalTime+=this.pressTime)}},{key:"handleClick",value:function(e){this.checkCode=this.getCheckCode(this.url,this.imTimeSign,this.pressTime,this.touchX);var n=[this.checkCode,this.pressTime,this.touchX,this.touchY,this.touchMoveNum,this.touchMoveTotalTime].join(".");this.callback(n,e,this.el)}},{key:"initialEvents",value:function(){this.el.addEventListener("touchstart",this.handleTouchStart,!1),this.el.addEventListener("touchend",this.handleTouchEnd,!1),this.el.addEventListener("click",this.handleClick,!1)}},{key:"dispose",value:function(){this.el.removeEventListener("touchstart",this.handleTouchStart,!1),this.el.removeEventListener("touchend",this.handleTouchEnd,!1),this.el.removeEventListener("click",this.handleClick,!1)}}]),e}();n.default=i},"./src/close.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),n.CloseImg=n.CloseVideo=void 0;var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");{var l=t("larkplayer"),s=t("./src/constants.js"),u=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.remainingTimeEl=l.DOM.$(".J-end-ad-close__time__value",o.el),o.handleClose=o.handleClose.bind(o),l.Events.on(o.el,"click",o.handleClose),o}return o(n,e),a(n,[{key:"handleClose",value:function(){this.player.trigger(s.strings.EVENTS_CLOSE)}},{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-close J-end-ad-close"},l.Component.createElement("span",{className:"end-ad-close__time"},l.Component.createElement("span",{"class":"end-ad-close__time__value J-end-ad-close__time__value"}),"s"),l.Component.createElement("span",{className:"end-ad-close__separator"},"|"),l.Component.createElement("span",{className:"end-ad-close__text"},"关闭广告"),l.Component.createElement("span",{className:"cmn-icon cmn-icons cmn-icons_close"}))
}}]),n}(l.Component);n.CloseVideo=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.remainingTimeEl=l.DOM.$(".J-end-ad-close__time__value",o.el),o.updateDuration=o.updateDuration.bind(o),o.updateRemainingTime=o.updateRemainingTime.bind(o),o.player.on("ready",o.updateDuration),o.player.on("endadloadedmetadata",o.updateDuration),o.player.on("endaddurationchange",o.updateDuration),o.player.on("endadtimeupdate",o.updateRemainingTime),o}return o(n,e),a(n,[{key:"updateRemainingTime",value:function(){var e=this.player.currentTime(),n=this.player.duration(),t=Math.round(n-e);!isNaN(t)&&1/0>t&&t>=0&&this.updateDOMRemainingTime(t)}},{key:"updateDuration",value:function(){var e=this.player.duration();isNaN(e)||this.updateDOMRemainingTime(Math.round(e))}},{key:"updateDOMRemainingTime",value:function(e){this.remainingTimeEl.innerText=e}},{key:"createEl",value:function(){return l.Component.createElement(u,null)}}]),n}(l.Component),n.CloseImg=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.remainingTimeEl=l.DOM.$(".J-end-ad-close__time__value",o.el),o}return o(n,e),a(n,[{key:"initialRemainingTime",value:function(e){clearInterval(this.intervalHandler),this.remainingTime=Math.max(Math.round(e)||0),this.updateDOMRemainingTime(this.remainingTime)}},{key:"startCountdown",value:function(){var e=this;return 0===this.remainingTime?void this.player.trigger("endadended"):void(this.intervalHandler=setInterval(function(){e.remainingTime--,e.updateDOMRemainingTime(e.remainingTime),0===e.remainingTime&&(e.player.trigger("endadended"),clearInterval(e.intervalHandler))},1e3))}},{key:"updateDOMRemainingTime",value:function(e){this.remainingTimeEl.innerText=e}},{key:"createEl",value:function(){return l.Component.createElement(u,null)}}]),n}(l.Component)}},"./src/constants.js":function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});{var t=(n.PROXY_EVENTS=["firstplay","loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],"endad");n.strings={EVENTS_PREFIX:t,EVENTS_NO_AD:t+"noad",EVENTS_SHOW:t+"show",EVENTS_HIDE:t+"hide",EVENTS_CLOSE:t+"close",EVENTS_ENDED:t+"ended",EVENTS_CLICK:t+"click",EVENTS_MASK_CLICK:t+"maskclick",HIDE_CLASS_NAME:"end-ad--hide",VIDEO_TYPE:"VIDEO",IMG_TYPE:"IMG",ONLY_SHOW_VIDEO_CLASS_NAME:"larkplayer-only-video-end-ad",ONLY_SHOW_IMG_CLASS_NAME:"larkplayer-only-img-end-ad"}}},"./src/detail-button.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s=function(e){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),a(n,[{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-detail J-end-ad-detail"},"查看详情")}}]),n}(l.Component);n.default=s},"./src/gradient-bottom.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s=function(e){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),a(n,[{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-bottom-gradient"})}}]),n}(l.Component);n.default=s},"./src/img-ad.js":function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s=function O(e,n,t){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:O(i,n,t)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(t)};t("./src/index.css");var u=t("./src/title.js"),c=r(u),d=t("./src/close.js"),p=t("./src/detail-button.js"),f=r(p),h=t("./src/gradient-bottom.js"),m=r(h),y=t("./src/poster.js"),b=r(y),g=t("larkplayer"),v=t("./src/constants.js"),E=t("./src/ck.js"),k=r(E),A=t("./src/navigateTo.js"),w=(r(A),function(e){function n(e,t){i(this,n);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.handleEnded=r.handleEnded.bind(r),r.ckCallback=r.ckCallback.bind(r),r.remainingTimeEl=g.DOM.$(".J-end-ad-close__time__value",r.el),r.detailButtonEl=g.DOM.$(".J-end-ad-detail",r.el),r.posterEl=g.DOM.$(".J-end-ad-poster",r.el),r.titleEl=g.DOM.$(".J-end-ad-title",r.el),r.linkEl=g.DOM.$(".end-ad-content",r.el),r.data={sourceSrc:r.options.sourceSrc,title:r.options.title,duration:r.options.duration,url:r.options.url,poster:r.options.poster,imTimeSign:r.options.imTimeSign},r.isValid(r.data)&&(r.bindEndedEvent(),r.initialRemainingTime(r.data.duration)),r.ckHandler=new k.default({el:r.el,callback:r.ckCallback,url:r.data.url,imTimeSign:r.data.imTimeSign}),r}return a(n,e),l(n,[{key:"ckCallback",value:function(e,n){var t=!(!g.DOM.parent(n.target,"J-end-ad-close")&&!g.DOM.hasClass(n.target,"J-end-ad-close")),r=g.DOM.hasClass(n.target,"end-ad-mask");r?this.player.trigger(v.strings.EVENTS_MASK_CLICK):t?n.preventDefault():t||this.player.trigger(v.strings.EVENTS_CLICK)}},{key:"dispose",value:function(){this.player.off("ended",this.handleEnded),this.ckHandler.dispose(),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"isPlayingEndAd",value:function(){return this.player.hasClass(v.strings.ONLY_SHOW_IMG_CLASS_NAME)}},{key:"update",value:function(e){this.isValid(e)&&(this.data=e,this.ckHandler.update(e),this.bindEndedEvent(),this.initialRemainingTime(this.data.duration),this.render(e))}},{key:"reset",value:function(){this.data={},this.player.off("ended",this.handleEnded),this.initialRemainingTime(0),this.render({url:"",title:"",duration:0,poster:""})}},{key:"show",value:function(){this.player.hasClass(v.strings.ONLY_SHOW_IMG_CLASS_NAME)||(this.player.addClass(v.strings.ONLY_SHOW_IMG_CLASS_NAME),this.player.trigger(v.strings.EVENTS_SHOW),this.startCountdown())}},{key:"hide",value:function(){this.player.hasClass(v.strings.ONLY_SHOW_IMG_CLASS_NAME)&&(this.player.removeClass(v.strings.ONLY_SHOW_IMG_CLASS_NAME),this.player.trigger(v.strings.EVENTS_HIDE),this.stopCountdown())}},{key:"updateDetailButtonEl",value:function(e){e?(this.detailButtonEl.style.display="flex",g.DOM.setAttribute(this.detailButtonEl,"data-href",e)):this.detailButtonEl.style.display="none"}},{key:"updateContainerEl",value:function(e){e&&g.DOM.setAttribute(this.el,"data-ecimtimesign",e)}},{key:"updateLink",value:function(e){g.DOM.setAttribute(this.linkEl,"href",e)}},{key:"render",value:function(e){this.updateContainerEl(e.imTimeSign),this.updateLink(e.url),this.titleEl.innerText=e.title||"",this.remainingTimeEl.innerText=Math.round(e.duration),this.posterEl.style.backgroundImage="url("+e.poster+")"}},{key:"isValid",value:function(e){return e.duration&&e.poster}},{key:"bindEndedEvent",value:function(){clearTimeout(this.endedTimeoutHandler),this.player.off("ended",this.handleEnded),this.player.on("ended",this.handleEnded)}},{key:"handleEnded",value:function(){var e=this;this.endedTimeoutHandler=setTimeout(function(){var n=e.player.src();n===e.data.sourceSrc?(e.player.pause(),e.show(),e.render(e.data)):e.player.trigger(v.strings.EVENTS_NO_AD)},1)}},{key:"initialRemainingTime",value:function(e){clearInterval(this.intervalHandler),this.remainingTime=Math.max(Math.round(e)||0),this.updateDOMRemainingTime(this.remainingTime)}},{key:"startCountdown",value:function(){var e=this;return clearInterval(this.intervalHandler),0===this.remainingTime?void this.player.trigger(v.strings.EVENTS_ENDED):void(this.intervalHandler=setInterval(function(){e.remainingTime--,e.updateDOMRemainingTime(e.remainingTime),0===e.remainingTime&&(e.player.trigger(v.strings.EVENTS_ENDED),clearInterval(e.intervalHandler))},1e3))}},{key:"stopCountdown",value:function(){clearInterval(this.intervalHandler)}},{key:"updateDOMRemainingTime",value:function(e){this.remainingTimeEl.innerText=e}},{key:"createEl",value:function(){return g.Component.createElement("div",{className:"larkplayer-end-ad-img end-ad-img EC_ads_container"},g.Component.createElement("div",{className:"end-ad-mask"}),g.Component.createElement("a",{className:"end-ad-content",target:"_blank"},g.Component.createElement(b.default,null),g.Component.createElement(d.CloseImg,null),g.Component.createElement(m.default,null),g.Component.createElement("div",{className:"end-ad-img-bottom"},g.Component.createElement(c.default,null),g.Component.createElement(f.default,null))))}}]),n}(g.Component));n.default=w,g.Component.register(w,{name:"imgAd"})},"./src/index.css":function(e,n,t){var r=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js!./src/index.css");"string"==typeof r&&(r=[[e.i,r,""]]);var i,o={hmr:!0};o.transform=i,o.insertInto=void 0;t("./node_modules/style-loader/lib/addStyles.js")(r,o);r.locals&&(e.exports=r.locals)},"./src/index.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=t("larkplayer"),s=t("./src/constants.js");t("./src/img-ad.js"),t("./src/video-ad.js");var u=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.videoAdPlugin=o.player.UI.videoAd,o.imgAdPlugin=o.player.UI.imgAd,o.options=l.util.assign({},o.defaultOptions(),o.options),o.options.type=o.options.type.toUpperCase(),o.update(o.options),o}return o(n,e),a(n,[{key:"defaultOptions",value:function(){return{type:"VIDEO",duration:0,url:"end_ad_default_url",poster:"end_ad_default_poster",adSrc:"end_ad_default_ad_src",sourceSrc:"end_ad_default_source_src"}}},{key:"isPlayingEndAd",value:function(){return this.dispathchMethod("isPlayingEndAd")}},{key:"update",value:function(e){e.type=(""+e.type).toUpperCase(),l.util.includes([s.strings.VIDEO_TYPE,s.strings.IMG_TYPE],e.type)&&(this.type=e.type,this.type!==s.strings.VIDEO_TYPE&&this.videoAdPlugin.reset(),this.type!==s.strings.IMG_TYPE&&this.imgAdPlugin.reset(),this.dispathchMethod("update",e))}},{key:"show",value:function(){this.type===s.strings.VIDEO_TYPE?(this.imgAdPlugin.hide(),this.videoAdPlugin.show()):this.type===s.strings.IMG_TYPE&&(this.videoAdPlugin.hide(),this.imgAdPlugin.show())}},{key:"hide",value:function(){this.imgAdPlugin.hide(),this.videoAdPlugin.hide()}},{key:"dispathchMethod",value:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;n>r;r++)t[r-1]=arguments[r];if(this.type===s.strings.VIDEO_TYPE){var i;return(i=this.videoAdPlugin)[e].apply(i,t)}if(this.type===s.strings.IMG_TYPE){var o;return(o=this.imgAdPlugin)[e].apply(o,t)}return!1}}]),n}(l.Plugin);n.default=u,l.Plugin.register(u,{name:"endAd"})},"./src/navigateTo.js":function(e,n){"use strict";function t(e){window.swan.openAdWebPage({url:e})}function r(e){window.location.href=e}function i(e){o?t(e):r(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var o=!1;window.swan&&window.swan.webView&&window.swan.webView.getEnv&&window.swan.webView.getEnv(function(e){o=!!e.smartprogram})},"./src/play-button.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.handlePlay=o.handlePlay.bind(o),o.handlePause=o.handlePause.bind(o),o.handleClick=o.handleClick.bind(o),o.on("click",o.handleClick),o.player.on("pause",o.handlePause),o.player.on("play",o.handlePlay),o}return o(n,e),a(n,[{key:"handlePlay",value:function(){this.el.style.display="none"}},{key:"handlePause",value:function(){this.el.style.display="block"}},{key:"handleClick",value:function(){this.player.play()}},{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-play-button J-end-ad-play-button"})}}]),n}(l.Component);n.default=s},"./src/poster.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s=function(e){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),a(n,[{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-poster J-end-ad-poster"})}}]),n}(l.Component);n.default=s},"./src/title.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s=function(e){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),a(n,[{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-title J-end-ad-title"})}}]),n}(l.Component);n.default=s},"./src/video-ad.js":function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s=function C(e,n,t){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:C(i,n,t)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(t)},u=t("larkplayer");t("./src/index.css");var c=t("./src/detail-button.js"),d=r(c),p=t("./src/close.js"),f=t("./src/volume.js"),h=r(f),m=t("./src/gradient-bottom.js"),y=r(m),b=t("./src/play-button.js"),g=r(b),v=t("./src/constants.js"),E=t("./src/ck.js"),k=r(E),A=t("./src/navigateTo.js"),w=r(A),O=function(e){function n(e,t){i(this,n);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.remainingTimeEl=u.DOM.$(".J-end-ad-close__time__value",r.el),r.detailButtonEl=u.DOM.$(".J-end-ad-detail",r.el),r.handleEnded=r.handleEnded.bind(r),r.ckCallback=r.ckCallback.bind(r),r.handleEventsProxy=r.handleEventsProxy.bind(r),v.PROXY_EVENTS.forEach(function(e){r.player.on(e,r.handleEventsProxy)}),r.data={url:r.options.url,poster:r.options.poster,duration:r.options.duration,adSrc:r.options.adSrc,sourceSrc:r.options.sourceSrc,imTimeSign:r.options.imTimeSign},r.isValid(r.data)&&r.bindEndedEvent(),r.ckHandler=new k.default({el:r.el,callback:r.ckCallback,url:r.data.url,imTimeSign:r.data.imTimeSign}),r}return a(n,e),l(n,[{key:"ckCallback",value:function(e,n){var t=!!u.DOM.parent(n.target,"J-end-ad-bottom__left-actions"),r=u.DOM.hasClass(n.target,"J-end-ad-play-button");if(!t&&!r&&(this.player.trigger(v.strings.EVENTS_CLICK),this.data.url)){var i=this.data.url+(/\?/.test(this.data.url)?"&":"?")+("ck="+e);w.default(i)}}},{key:"dispose",value:function(){var e=this;this.player.off("ended",this.handleEnded),this.ckHandler.dispose(),v.PROXY_EVENTS.forEach(function(n){e.player.off(n,e.handleEventsProxy)}),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"isPlayingEndAd",value:function(){return this.player.src()===this.data.adSrc}},{key:"hasEndAd",value:function(e){return e===this.data.sourceSrc}},{key:"handleEventsProxy",value:function(e){var n=this,t=e.type;this.isPlayingEndAd()&&(e.stopImmediatePropagation(),setTimeout(function(){n.player.trigger(v.strings.EVENTS_PREFIX+t)},1))}},{key:"isValid",value:function(e){return e.adSrc&&e.sourceSrc}},{key:"bindEndedEvent",value:function(){clearTimeout(this.endedTimeoutHandler),this.player.off("ended",this.handleEnded),this.player.on("ended",this.handleEnded)}},{key:"intervalRequestPlay",value:function(){var e=this,n=void 0;this.player.one("play",function(){clearInterval(n)}),n=setInterval(function(){e.player.paused()?e.player.play():clearInterval(n)},200)}},{key:"handleEnded",value:function(){var e=this;this.endedTimeoutHandler=setTimeout(function(){var n=e.player.src();n===e.data.sourceSrc?(e.show(),e.player.src(e.data.adSrc),e.player.isFullscreen()?(e.player.exitFullscreen(),e.intervalRequestPlay()):e.player.play()):e.player.trigger(v.strings.EVENTS_NO_AD)},1)}},{key:"update",value:function(e){this.isValid(e)&&(this.data=e,this.ckHandler.update(e),this.bindEndedEvent(),this.render(e))}},{key:"reset",value:function(){this.data={},this.player.off("ended",this.handleEnded),this.render({url:"",duration:0})}},{key:"updateDetailButtonEl",value:function(e){e?(this.detailButtonEl.style.display="flex",u.DOM.setAttribute(this.detailButtonEl,"data-href",e)):this.detailButtonEl.style.display="none"}},{key:"render",value:function(e){this.updateDetailButtonEl(e.url),this.remainingTimeEl.innerText=Math.round(e.duration)}},{key:"show",value:function(){this.player.hasClass(v.strings.ONLY_SHOW_VIDEO_CLASS_NAME)||(this.player.addClass(v.strings.ONLY_SHOW_VIDEO_CLASS_NAME),this.player.trigger(v.strings.EVENTS_SHOW))}},{key:"hide",value:function(){this.player.hasClass(v.strings.ONLY_SHOW_VIDEO_CLASS_NAME)&&(this.player.removeClass(v.strings.ONLY_SHOW_VIDEO_CLASS_NAME),this.player.trigger(v.strings.EVENTS_HIDE))}},{key:"createEl",value:function(){return u.Component.createElement("div",{className:"larkplayer-end-ad-video end-ad-video J-end-ad-video"},u.Component.createElement(y.default,null),u.Component.createElement(g.default,null),u.Component.createElement("div",{className:"end-ad-bottom"},u.Component.createElement("div",{className:"end-ad-bottom__left-actions J-end-ad-bottom__left-actions"},u.Component.createElement(h.default,null),u.Component.createElement(p.CloseVideo,null)),u.Component.createElement("div",{className:"end-ad-bottom__right-actions J-end-ad-bottom__right-actions"},u.Component.createElement(d.default,null))))}}]),n}(u.Component);n.default=O,u.Component.register(O,{name:"videoAd"})},"./src/volume.js":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t("./src/index.css");var l=t("larkplayer"),s="end-ad-volume--muted",u="end-ad-volume--normal",c=function(e){function n(e,t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return o.handleClick=o.handleClick.bind(o),o.handleVolumeChange=o.handleVolumeChange.bind(o),o.on("click",o.handleClick),o.player.on("volumechange",o.handleVolumeChange),o.player.on("ready",o.handleVolumeChange),o}return o(n,e),a(n,[{key:"handleVolumeChange",value:function(){l.DOM.removeClass(this.el,s),l.DOM.removeClass(this.el,u);var e=this.player.muted(),n=e?s:u;l.DOM.addClass(this.el,n)}},{key:"handleClick",value:function(){var e=this.player.muted();this.player.muted(!e)}},{key:"createEl",value:function(){return l.Component.createElement("div",{className:"end-ad-volume"})}}]),n}(l.Component);n.default=c},larkplayer:function(n){n.exports=e}})})});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/logMap.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/logMap",function(e,l,o){var a=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/logMap");o.exports={play:a.play,complete:a.complete,playerPv:"10002515",playerClick:"10002516",relativeListPv:"10002517",relativeListClick:"10002518",recommendListPv:"10002519",recommendListClick:"10002520",uploadShow:"10800004",uploadClick:"10800005",showWindowPlayer:"14000000",closeWindowPlayer:"14000001",layerPlayerClick:"14000002",playVV:"14000003",play80Percent:"14000004",play3Seconds:"14000005",windowPlayerDrag:"14000006"}});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/model.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/model",function(t,i,e){function s(t){this.idAttribute=t.idAttribute||"id",this.list=t.list||[]}s.prototype={constructor:s,filter:function(t){for(var i=[],e=0;e<this.list.length;e++){var s=this.list[e];t(s,e,this.list)&&i.push(s)}return i},get:function(t){return void 0===t?this.getAll_():this.get_(t)},getAll_:function(){return this.list},get_:function(t){for(var i=null,e=0;e<this.list.length;e++)if(this.list[e][this.idAttribute]===t){i=this.list[e];break}return i},reset:function(t){this.list=t}},e.exports=s});
;/*!wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/secondsKnowLarge.es.js*/
define("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/secondsKnowLarge.es",function(e,i,a){"use strict";var t=e("wiki-lemma:node_modules/lodash.throttle/index"),l=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/lib/larkplayer/larkplayer"),s=e("wiki-common:widget/component/nslog/nslog"),n=e("wiki-common:widget/component/superLogger/superLogger.es"),d=e("wiki-common:widget/util/animation"),r=e("wiki-common:widget/util/browser"),c=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/perfect-scrollbar/index"),m=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/extendedJsmart"),h=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/shareBubble"),p=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/constants"),y=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/logMap"),u=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/model"),g=e("wiki-lemma:widget/tools/clickstream/clickstream"),v=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/elementDrag"),w=e("wiki-common:widget/util/guid"),f=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/windowScroll"),I=e("wiki-common:widget/ui/dialog/dialog"),_=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/secondsLog.es"),P=e("wiki-lemma:widget/lemma_content/configModule/secondsKnow/formatListFun");e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAdPlugin.min");var C=e("wiki-lemma:widget/lemma_content/configModule/secondsKnowLarge/endAd.es"),k=e("wiki-common:widget/component/evtMsgManager/evtMsgManager.es"),x=e("wiki-common:widget/util/url"),S=w(),J=t(function(e,i){e.pvGuid=S,e.playGuid=i,n.sendPv("video_flow_timeupdate",e)},3e3),T={horizontal:{width:270,height:152},vertical:{width:152,height:270}},$={width:685,height:390},L=60;a.exports={initialize:function(e){this.data=e,this.timer=null,this.playGuid=w(),this.isWindowPlayerShow=!1,this.isPlayLayer=!1,this.isLastStatusInViewPoint=!0,this.$el=l(".J-secondsknow-large-container"),this.$player=document.getElementById("J-sl-player__main"),this.$elPlayer=l(".sl-player-el-container"),this.$elNextVideoTextContainer=l(".J-sl-player-next-video"),this.$elNextVideoText=l(".J-sl-player-next-video-text"),this.$elPlayerCover=l(".J-sl-player-cover-container"),this.listTpl=new m('<div class="sl-player__list__title">\n<div class="sl-player__list__title__relative J-sl-player-title sl-player-title--active" data-name="relative">相关视频</div>\n{%if $showUploadVideoBtn%}\n<div class="sl-player__list__upload__video J-sl-upload-video">\n</div>\n{%else%}\n<div class="sl-player__cannot__upload__video J-sl-cannot-upload-video">\n</div>\n{%/if%}\n</div>\n<div class="sl-player__list__relative J-sl-player__list__relative sl-player-list-ul J-sl-player-list-ul" data-name="relative">\n{%foreach $listRelative as $index => $item%}\n{%if $item.recHeadShow%}\n<div class="recommend-tab">\n为你推荐</div>\n{%/if%}\n<div\n            class="sl-player-list-item J-sl-player-list-item sl-player-relative-item {%if $curSecondId == $item.secondId%}sl-player-list-item--active{%/if%}"\n            data-secondId="{%$item.secondId|f_escape_xml%}"\n            title="{%$item.title|f_escape_xml%}"\n        >\n<div class="sl-player-list-item__cover" style="background-image: url({%$item.videoSrc.cover|f_escape_xml%});"></div>\n<div class="sl-player-list-item__text">\n<div class="sl-player-list-item__text__title">{%$item.title|f_escape_xml%}</div>\n{%if $item.playNum%}\n<div class="sl-player-list-item__text__subtitle">{%$item.playNum|number2cn|f_escape_xml%}播放</div>\n{%/if%}\n</div>\n<em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_share-circle sl-player-list-item__share J-sl-player-list-item__share"></em>\n<div class="sl-player-list-item__overlay"></div>\n</div>\n{%if $item.recBottomShow%}\n<div class="recommend-tab">\n为你推荐</div>\n{%/if%}\n{%/foreach%}\n</div>\n'),this.$list=l(".J-sl-player__list"),this.$initialCover=l(".J-sl-player-initial-cover"),this.$elPlayerContainer=l("#J-sl-player-el-container"),this.playerWidth=null,this.playerHeight=null,this.handleRelatedInsert=this.handleRelatedInsert.bind(this),this.handlePn=this.handlePn.bind(this),this.logoTimer=null,this.isSkipTitle=!1,this.skipTitleSecondId="",this.data.pnSet=new Set,this.data.hasMore&&this.data.list.length<=6&&this.getMoreVideo({pn:this.data.pn}),this.model=new u({idAttribute:"secondId",list:this.data.list}),this.firstSecondId=x.getQuery("secondId",window.location.href)||"",this.bindEvents();var i=document.getElementById("J-sl-player-el-container");v.bindEvent(i,document.getElementById("J-audio-container")),i=document.getElementById("J-sl-player-replay"),v.bindEvent(i),this.$initialCover.css("background-image","url("+this.data.list[0].videoSrc.cover+")"),this.initializePlayer(),this.renderList(),this.initializeShareBubble(),this.data.autoplay&&this.play(this.data.secondId),s({type:y.relativeListPv,lemmaId:this.data.lemmaId}),n.sendPv("lemma_video",{isShow:this.data.isShow}),g.logViewEl({page:"lemma",isShow:this.data.isShow,element:"lemma_video"}),_.logPagePv(e.lemmaId),this.lastShowedIndex={relative:-1,recommend:-1},this.triggerScreenViewPv(),this.handleListScroll(),this.getAddVideo()},getAddVideo:function(){var e=this,i={adManager:e.data.adManager||e.adManager||[],kpdClassify:e.data.kpdClassify||e.kpdClassify||[],memorial:e.data.memorial||e.memorial||""};l.ajax({url:"/api/wikiui/allowuploadvideo",data:{classify:JSON.stringify(i)},success:function(e){e.data.allow&&l(".J-sl-upload-video").show()},error:function(){e.mergeUrlData(),reject()}})},handleListScroll:function(){var e,i=this,a=this.$el.find(".J-sl-player__list__relative"),o=a.find(".J-sl-player-list-item"),s=o.eq(0).height()+10;a.on("scroll",t(function(){if(a.scrollTop()+a.height()>=s*(i.data.listLength-3)&&i.data.hasMore&&!i.data.pnSet.has(i.data.pn)){var t=i.handlePn();i.getMoreVideo({pn:t})}e=a.height()>200?6.45:3,l(".J-sl-player-title").text(a.scrollTop()+a.height()>=s*(i.data.isRecIndex+e)+20?"为你推荐":"相关视频"),i.triggerScreenViewPv()},50))},triggerScreenViewPv:function(){var e="relative",i=this.$el.find(".J-sl-player__list__"+e),a=i.find(".J-sl-player-list-item"),t=a.eq(0).height()+10,l=i.scrollTop(),o=this.lastShowedIndex[e],s=Math.floor((l+i.height())/t);if(!(o>s)){var n=this.data.list,d=this.data.lemmaId;a.each(function(e){e>o&&s>=e&&_.logVideoShow(n[e],e,"top",d)}),this.lastShowedIndex[e]=s}},renderList:function(){var e=this.listTpl.fetch({listRelative:this.data.list,curSecondId:this.data.secondId,showUploadVideoBtn:this.data.showUploadVideoBtn});this.$list.html(e),this.data.showUploadVideoBtn&&s({type:y.uploadShow,lemmaTitle:this.data.lemmaTitle,lemmaId:this.data.lemmaId});var i=r.ie()&&r.ie()<=8,a=!r.chrome()&&!r.safari()&&!i;a&&l(".J-sl-player-list-ul").each(function(e,i){c.initialize(i,{wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:20,stopPropagationOnClick:!1})})},updateList:function(e){var i="relative",a=p.cssClasses.LIST_ITEM_ACTIVE,t=l(".J-sl-player__list__relative"),o=t.find(".J-sl-player-list-item[data-secondId="+e+"]");l("."+a).removeClass(a),o.addClass(a);var s=l('.J-sl-player-list-ul[data-name="'+i+'"]'),n=s.height(),r=o.height(),c=r/2,m=(o.position()||{}).top;if(-c>m||m>n-c){var h=s.scrollTop();d({duration:300,onStep:function(e){s.scrollTop(h+m*e)},onComplete:function(){s.scrollTop(h+m)}})}},generateShareData:function(e){return{url:window.location.origin+"/video?lemmaId="+(this.data.lemmaId||e.shareLemmaId)+"&secondId="+e.secondId,title:"快速了解"+(this.data.lemmaTitle||e.shareLemmaTitle)+"，就在百科秒懂视频！",pic:e.videoSrc.cover}},initializeShareBubble:function(){var e=this;l(".J-sl-player-list-item__share").each(function(i,a){var t=l(a),o=parseInt(t.parents(".J-sl-player-list-item").attr("data-secondId"),10),s=e.model.get(o);if(t.attr("secondid",o),s){var n=e.generateShareData(s);new h({host:t,classNames:"sl-share-bubble",pos:"bottom-center",marginFromHost:8,shareData:n,secondId:o})}})},isElementInViewport:function(e){var i=e.getBoundingClientRect();return i.bottom>=L},showNextVideoText:function(){if(!this.$elNextVideoTextContainer.is(":visible")){var e=this.getNextPlayInfo().title||"";if(e){var i=e;this.$elNextVideoText.text(i),this.getCurrentData().isVertical?(this.$elNextVideoTextContainer.removeClass("horizontal"),this.$elNextVideoTextContainer.addClass("vertical")):(this.$elNextVideoTextContainer.removeClass("vertical"),this.$elNextVideoTextContainer.addClass("horizontal")),this.$elNextVideoTextContainer.removeClass("hide")}}},hideNextVideoText:function(){this.$elNextVideoTextContainer.is(":visible")&&this.$elNextVideoTextContainer.addClass("hide")},updateVideoInfo:function(){var e=this.getCurrentData();e&&(l(".sl-player-detail-title").text(e.title),l(".sl-player-detail-like-num").text(e.playNum))},showReplay:function(){this.hideOriginalReplay(),l(".J-sl-player-replay").show()},hideReplay:function(){l(".J-sl-player-replay").hide()},showOriginalReplay:function(){l(".lark-complete").show()},hideOriginalReplay:function(){l(".lark-complete").hide()},initializeQuanminLogo:function(){var e=l('<div class="quanmin-normal-logo"></div>'),i=l('<div class="quanmin-wrapper" id="J-sl-player-quanmin-logo"></div>');i.append(e),l("#J-sl-player-el-container #sl-player-el-video-larkplayer").append(i),this.$logoEl=e,this.$logoWrapperEl=i},handleQuanminLogo:function(e){if(this.$logoWrapperEl&&this.$logoEl&&(this.data.secondId!==this.lastSecondId||e)){this.lastSecondId=this.data.secondId;var i=this.$logoEl,a=this.$logoWrapperEl;i.hide();var t=this.model.get(this.data.secondId),l=a.parent();t&&l&&t.isVertical&&(clearTimeout(this.logoTimer),this.logoTimer=setTimeout(function(){var e=l.height();if(e){var a=9*e/16,o=220/30,s=e/o,n=s/5,d=270>=e?5:10,r=d,c=a-s-2*d;i.css({width:s+"px",height:n+"px",marginLeft:c+"px",marginTop:r+"px"}),101===t.source&&i.show()}},200))}},audioComPause:function(){this.player.muted()||0===this.player.volume()||k.trigger(k.Events.LEMMA_VIDEO_PLAY)},audioComPlay:function(){this.player.muted()||0===this.player.volume()||k.trigger(k.Events.LEMMA_VIDEO_PAUSE)},initializePlayer:function(){var e=this,i=e.model.get(e.data.secondId),a=this.data.lemmaId,d=this.data.lemmaTitle;this.playerWidth=l("#sl-player-el").width(),this.playerHeight=9*this.playerWidth/16,e.player=o("sl-player-el",{poster:i.videoSrc.cover,width:e.playerWidth,height:e.playerHeight,plugin:{playContinue:{key:function(i){return e.data.secondId||i}}}}),l(".J-larkplayer-window-player").css("display","flex"),e.player.hasPoster=!0,e.player.muted(!0),e.play(e.data.secondId,!1),s({type:y.playerPv,secondId:e.data.secondId,lemmaId:a}),e.initializeQuanminLogo(),e.endAdComp=new C({player:this.player,onEnded:this.onEnded.bind(this),onAdShow:this.onAdShow.bind(this),getCurrentData:this.getCurrentData.bind(this),showEndAd:this.data.showEndAd,eid:this.data.eid||0}),e.player.on("play",function(){e.handleQuanminLogo();var i=e.model.get(e.data.secondId);e.isLoopEnd=!1,e.hideReplay(),e.hideOriginalReplay(),!e.isSkipTitle&&i.shouldSkipTTG&&(e.isSkipTitle=!0,e.skipTitleSecondId=i.secondId),s({type:y.play,lemmaTitle:d,lemmaId:a,secondId:e.data.secondId,title:i.title,large:1});var t=e.getWindowPlayerLogInfo().secondId;if(!e["play_vv_"+t]){var l=e.getWindowPlayerLogInfo();l.type=y.playVV,l.kind=e.getPlayerKind(),s(l),e["play_vv_"+t]=!0}e.videoPlayDurations={startTime:(new Date).getTime(),params:{type:y.play,lemmaTitle:d,lemmaId:a,secondId:e.data.secondId,title:i.title,large:1,recCategory:i.recCategory,isRecommend:i.isRecommend}},_.logPlay(i,"top",a),clearInterval(i.logDurationTimer),i.logDurationTimer=setInterval(function(){_.logPlayedTime(i,"top",a)},6*_.throttleInterval)}),e.player.on("pause",function(){var i=e.model.get(e.data.secondId);e.sendVideoPlayDurationsLog(),_.resetLogTimer(i,"top",a)}),e.player.on("error",function(i,a){var t=e.model.get(e.data.secondId);n.sendPv("play-error-log",{page:"lemma",code:a||"",lemmaId:e.data.lemmaId,secondId:e.data.secondId,src:t.playUrl||t.playMp4Url}),g.logActEvent({page:"lemma",act_type:"play-error-log",code:a||"",lemmaId:e.data.lemmaId,secondId:e.data.secondId,src:t.playUrl||t.playMp4Url})});var r=!1;e.player.on("firstplay",function(){var i=e.model.get(e.data.secondId);r=!1,n.sendPv("video_flow_first_play",{type:y.play,lemmaTitle:e.data.lemmaTitle,lemmaId:e.data.lemmaId,secondId:e.data.secondId,videoIdx:i.videoIdx,title:i.title,large:1,isShow:e.data.isShow,recCategory:i.recCategory,isRecommend:i.isRecommend})}),e.player.on("timeupdate",function(){var i=e.player.duration(),a=e.player.currentTime(),t=e.model.get(e.data.secondId),l=null,o={type:y.play,lemmaTitle:e.data.lemmaTitle,lemmaId:e.data.lemmaId,secondId:e.data.secondId,title:t.title,large:1,duration:i,currentTime:a,isShow:e.data.isShow,kind:e.getPlayerKind(),recCategory:t.recCategory,isRecommend:t.isRecommend};a>=.1&&"function"==typeof e.player.poster&&e.player.hasPoster&&(e.player.poster(""),e.player.hasPoster=!1),J(o,e.playGuid),!e["play_80Percent_"+t.secondId]&&parseInt(a/i*100,10)>=80&&(l=e.getWindowPlayerLogInfo(),l.type=y.play80Percent,l.kind=e.getPlayerKind(),s(l),e["play_80Percent_"+t.secondId]=!0),!e["play_3seconds_"+t.secondId]&&a>3&&(l=e.getWindowPlayerLogInfo(),l.type=y.play3Seconds,l.kind=e.getPlayerKind(),s(l),e["play_3seconds_"+t.secondId]=!0),!r&&a>3&&(r=!0,n.sendPv("video_flow_playtime_3seconds",o)),t.maximumPlayProgress||(n.sendPv("lemma_page_video_flow_play_times",{videoIdx:t.videoIdx,lemmaId:e.data.lemmaId,lemmaTitle:e.data.lemmaTitle,recCategory:t.recCategory,isRecommend:t.isRecommend}),g.logActVideo({page:"lemma",video_action:"play",kind:"lemma_page_video_flow_play_times",videoIdx:t.videoIdx,lemmaId:e.data.lemmaId,lemmaTitle:e.data.lemmaTitle,recCategory:t.recCategory,isRecommend:t.isRecommend})),a&&i&&(t.maximumPlayProgress=Math.max(a/i,t.maximumPlayProgress||.001)),e.isWindowPlayerShow&&(5>=i-a?e.showNextVideoText():e.hideNextVideoText())}),e.player.on("timeupdate",t(function(){var i=e.model.get(e.data.secondId);_.recordPlayedTime(i),_.logValidPlay(i,"top",a),e.player.currentTime()/e.player.duration()>=.8&&_.logCompletePlay(i,"top",a)},_.throttleInterval)),e.player.on("fullscreenchange",function(){e.handleQuanminLogo(!0)}),e.player.on("volumechange",function(){e.player.muted()||0===e.player.volume()||e.player.paused()||k.trigger(k.Events.LEMMA_VIDEO_PLAY)})},onEnded:function(){var e=this.data,i=this.getWindowPlayerLogInfo().secondId,a=this.model.get(e.secondId);this["play_vv_"+i]=!1,this["play_3seconds_"+i]=!1,this["play_80Percent_"+i]=!1;for(var t,l=e.hasMore,o=e.list,n=this.getCurrentData(),d=n.secondId,r=0;r<o.length;r++)d===o[r].secondId&&(t=r);if((t===o.length-3||t===o.length-2||t===o.length-1)&&l){var c=this.handlePn();this.getMoreVideo({pn:c})}s({type:y.complete,lemmaTitle:e.lemmaTitle,lemmaId:e.lemmaId,secondId:e.secondId,title:a.title,large:1});var m=o[t+1]&&o[t+1].secondId;this.playGuid=w(),m?(this.play(m,!0),this.initPlayerSize(),this.updateVideoInfo()):(this.isLoopEnd=!0,this.isWindowPlayerShow?this.showReplay():this.showOriginalReplay()),this.sendVideoPlayDurationsLog(),_.resetLogField(a,"top",e.lemmaId)},onAdShow:function(){this.isWindowPlayerShow&&this.hideNextVideoText(),this.$elPlayerCover.addClass("hide")},getPlayerKind:function(){var e="";return e=this.isWindowPlayerShow?"window":this.isPlayLayer?"layer":"normal"},sendVideoPlayDurationsLog:function(){this.videoPlayDurations&&(this.videoPlayDurations.params.videoPlayDuration=(new Date).getTime()-this.videoPlayDurations.startTime,n.sendPv("video_play_duration",this.videoPlayDurations.params),this.videoPlayDurations=null)},getNextPlayInfo:function(){for(var e={},i=this.data.secondId,a=this.model.get(),t=0;t<a.length-1;t++){var l=a[t];if(l.secondId===i){e=a[t+1];break}}return e},play:function(e,i){if(this.player){var a=this.model.get(this.data.secondId);a&&_.resetLogTimer(a,"top",this.data.lemmaId),this.data.secondId=e;var t=this.model.get(e);this.$initialCover.hide(),this.player.hasPoster=!0,this.player.poster(t.videoSrc.cover);var o="";t.shouldSkipTTG&&this.isSkipTitle&&this.skipTitleSecondId!==e?(o=t.miniPlayUrl.hls,this.player.src(o)):(o=t.playUrl||t.playMp4Url,this.player.src(o)),this.player.play(),this.audioComPause(),i&&this.updateList(e),l.getJSON("/api/second/dynamic/view?secondId="+e)}},gotoPage:function(e,i){var a=document.createElement("a");a.setAttribute("href",encodeURI(e)),a.setAttribute("target","_blank"),a.setAttribute("id",i),document.getElementById(i)||document.body.appendChild(a),a.click()},closeWindowPlayer:function(){this.isWindowPlayerShow&&(this.isWindowPlayerShow=!1,this.player.controls(!0),this.hideCloseModal(),this.$elPlayer.removeClass("sl-player-el-fixed"),this.endAdComp&&this.endAdComp.changeSize("normal"),this.hideNextVideoText(),this.handleReplay(),l(".J-sl-player__main").removeClass("window-player"),l("#J-sl-player__main").removeClass("window-player"),this.initPlayerSize())},handleReplay:function(){this.isWindowPlayerShow&&this.isLoopEnd?this.showReplay():this.isLoopEnd?(this.showOriginalReplay(),this.hideReplay()):this.hideReplay()},getWindowPlayerLogInfo:function(){var e=this.getCurrentData()||{},i={secondId:e.secondId,lemmaId:this.data.lemmaId,isVertical:e.isVertical,isPay:e.isPay,shareLemmaId:e.shareLemmaId,duration:e.intPlayTime};return i},showWindowPlayer:function(){this.isWindowPlayerShow=!0,this.player.controls(!1),this.initPlayerSize(),this.$elPlayer.addClass("sl-player-el-fixed"),this.handleReplay();var e=this.getWindowPlayerLogInfo();l(".J-sl-player__main").addClass("window-player"),l("#J-sl-player__main").addClass("window-player"),e.type=y.showWindowPlayer,s(e),this.endAdComp&&this.endAdComp.changeSize("small"),this.endAdComp&&this.endAdComp.isPlayingEndAd()&&this.endAdComp.endAd()},getCurrentData:function(){for(var e,i=this.data.secondId,a=this.model.get(),t=0;t<a.length-1;t++){var l=a[t];if(parseInt(l.secondId,10)===i)return e=a[t]}return a[a.length-1]},initPlayerSize:function(){if(this.isWindowPlayerShow){var e=this.getCurrentData();e.isVertical?(this.player.width(T.vertical.width),this.player.height(T.vertical.height),this.$elPlayerContainer.width(T.vertical.width),this.$elPlayerContainer.height(T.vertical.height)):(this.player.width(T.horizontal.width),this.player.height(T.horizontal.height),this.$elPlayerContainer.width(T.horizontal.width),this.$elPlayerContainer.height(T.horizontal.height))}else this.isPlayLayer?(this.player.width($.width),this.player.height($.height),this.$elPlayerContainer.width($.width),this.$elPlayerContainer.height($.height)):(this.player.width(this.playerWidth),this.player.height(this.playerHeight),this.$elPlayerContainer.width(this.playerWidth),this.$elPlayerContainer.height(this.playerHeight));this.handleQuanminLogo(!0)},normalize:function(e){var i=[];return l.each(e,function(e,i){i.maximumPlayProgress=0,i.videoSrc={type:"baikePlayer",source:i.source,secondId:i.secondId,mid:i.mediaId,cover:i.coverPic.imageUrl,cover_small:i.coverPic.imageUrl},_.addLogField(i)}),i=i.concat(e)},getMoreVideo:function(e){var i=e.pn,a=this.firstSecondId,t=this,o={adManager:t.data.adManager,kpdClassify:t.data.kpdClassify,memorial:t.data.memorial};l.ajax({url:"/api/second/video/list",data:{lemmaId:this.data.lemmaId,pn:i,classify:JSON.stringify(o),secondId:a,scene:"pc"},success:function(e){var a=P.getMockResponse(e,i);t.handleRelatedInsert(a)},error:this.errCatch})},handlePn:function(){this.data.pnSet.add(this.data.pn);var e=this.data.pn;return e},errCatch:function(e){console.error(e)},handleNum:function(e){return e>1e4?e=(e/1e4).toFixed(1)+"万":e},addRecommendAttribute:function(e){var i=this;l.each(e,function(e,a){a.isRecommend=0,e>=i.data.isRecIndex&&(a.isRecommend=1)})},handleRelatedInsert:function(e){if(e&&!e.errno){this.data.secondsKnow=this.normalize(e.list,"relative");var i=this.data.secondsKnow,a=i.length;this.data.pn=e.nextPn,this.data.hasMore=e.hasMore;for(var t=0;a-1>=t;t++){var o=this.data.secondsKnow[t];o.videoIdx=this.data.list.length,this.data.list.push(o)}var s=this.data.list;this.data.listLength=s.length;for(var n="",d=0;a-1>=d;d++)l(".recommend-tab").length||0!==d||(this.recFirstShow=!0,n+='<div class="recommend-tab">为你推荐</div>'),i[d].playNum=this.handleNum(i[d].playNum),n+='<div class="sl-player-list-item J-sl-player-list-item sl-player-relative-item"data-secondId="'+i[d].secondId+'"title="'+i[d].title+'"><div class="sl-player-list-item__cover" style="background-image: url('+i[d].videoSrc.cover+');"></div><div class="sl-player-list-item__text"><div class="sl-player-list-item__text__title">'+i[d].title+'</div><div class="sl-player-list-item__text__subtitle">'+i[d].playNum+'播放</div></div><em class="cmn-icon wiki-lemma-icons wiki-lemma-icons_share-circle sl-player-list-item__share J-sl-player-list-item__share"></em><div class="sl-player-list-item__overlay"></div></div>';l(".J-sl-player__list__relative").append(n),this.addRecommendAttribute(s),this.initializeShareBubble()}},findCurrentIndex:function(e,i){for(var a=void 0,t=0;t<e.length;t++)i===e[t].secondId&&(a=t);return a},initModalPosition:function(e){var i=5,a=e.width(),t=l(".J-sl-player-el").offset().left,o=l(window).width(),s=this.getCurrentData().isVertical?T.vertical.width:T.horizontal.width;s+i+a>o-t?(e.css("left",""),e.css("right",s+i+"px")):(e.css("right",""),e.css("left",s+i+"px"))},showCloseModal:function(){var e=l(".J-sl-player-el-close-modal");l(".J-sl-player-el-close-modal-mask").show(),this.initModalPosition(e),e.show(),l(".J-sl-player-cover-container").addClass("hide"),this.$el.off("mouseenter",".J-sl-player-el")},hideCloseModal:function(){var e=this;this.$el.on("mouseenter",".J-sl-player-el",function(){e.windowPlayerMouseEnter()}),l(".J-sl-player-el-close-modal-mask").hide(),l(".J-sl-player-el-close-modal").hide()},windowPlayerMouseEnter:function(){if(!(this.endAdComp&&this.endAdComp.isPlayingEndAd()||!this.isWindowPlayerShow||this.isLoopEnd)){var e=this.player.paused();e?(l(".J-sl-player-cover-icon").addClass("paused"),l(".J-sl-player-el-img").hide()):(l(".J-sl-player-cover-icon").removeClass("paused"),l(".J-sl-player-el-img").show()),this.$elPlayerCover.removeClass("hide")}},bindEvents:function(){var e=this;this.hasBindEvents||(this.hasBindEvents=!0,this.$el.on("click",".J-sl-player-el-close-modal-mask",function(){l(".J-sl-player-el-close-modal-mask").hide(),e.hideCloseModal(),e.isPlayerPlay&&(e.player.play(),e.audioComPause()),e.isPlayerPlay=""}),this.$el.on("click",".J-sl-player-initial-cover",function(){e.play(e.data.secondId,!0),s({type:y.playerClick,secondId:e.data.secondId,lemmaId:e.data.lemmaId})}),this.$el.on("click",".J-sl-upload-video",function(){s({type:y.uploadClick,lemmaTitle:e.data.lemmaTitle,lemmaId:e.data.lemmaId});var i="/second/publish?lemmaId="+e.data.lemmaId+"&from=lemma&lemmaTitle="+e.data.lemmaTitle+"&lemmaDesc="+e.data.lemmaDesc;e.gotoPage(i,"a_blank_tag")}),this.$el.on("click",".J-sl-cannot-upload-video",function(){var e=(l(this),'<div style="text-align: left;width: 528px"><h2 style="font-size: 20px;color: #333;line-height: 26px;margin-bottom: 20px;">对不起，该词条暂不开放视频上传</h2><p style="font-size: 16px;color: #ccc;line-height: 26px;">如有疑义，请点击左下角进行反馈</p></div>'),i=new I({title:"编辑提示",content:e,btns:[{text:'<span style="font-size: 14px">反馈问题</span>',key:"discussion"},{text:'<span class="hide-dialog" style="font-size: 14px">返回词条</span>',key:"back"}],onBtnClick:function(e){"discussion"===e&&(window.location.href="/feedback")}});i.show(),l(".hide-dialog").on("click",function(){i.hide()})}),this.$el.on("click",".J-sl-player-list-item",function(i){e.playGuid=w();var a=l(i.target).hasClass("J-sl-player-list-item__share");if(!a){var t=l(this),o=t.parent().attr("data-name");e.model.reset(e.data.list);var n=parseInt(t.attr("data-secondId"),10);e.sendVideoPlayDurationsLog(),e.play(n,!0),e.updateVideoInfo();var d=o===p.strings.RELATIVE_LIST?y.relativeListClick:y.recommendListClick;s({type:d,secondId:n,lemmaId:e.data.lemmaId})}}),this.$el.on("mouseup","#J-sl-player-el-container",function(i){var a=i.target.className;if(a.match("J-sl-player-cover-container")){var t=e.getWindowPlayerLogInfo();t.type=y.windowPlayerDrag,s(t)}}),this.$el.on("click",".J-sl-player-el-close",function(i){i.stopPropagation(),e.lastSecondId="",e.isPlayerPlay=!e.player.paused(),e.player.pause(),e.audioComPlay();var a=e.getWindowPlayerLogInfo();a.type=y.closeWindowPlayer,s(a);var t=localStorage.getItem("hide-window-player-nomore-recommend"),l=localStorage.getItem("hide-window-player-kind");"true"===t&&"once"===l?e.closeWindowPlayer():"true"===t&&"always"===l?e.closeWindowPlayer():e.showCloseModal()}),this.$el.on("mouseenter",".J-sl-player-el",function(){e.windowPlayerMouseEnter()}),this.$el.on("click",".J-sl-player-cover-icon",function(){e.isPlayerPlay="";var i=e.player.paused();i?(e.player.play(),e.audioComPause(),l(".J-sl-player-cover-icon").removeClass("paused"),l(".J-sl-player-el-img").show()):(l(".J-sl-player-cover-icon").addClass("paused"),l(".J-sl-player-el-img").hide(),e.player.pause(),e.audioComPlay())}),this.$el.on("mouseleave",".J-sl-player-cover-container",function(){e.$elPlayerCover.addClass("hide")}),this.$el.on("click",".J-sl-player-replay-content",function(){e.hideReplay();var i=e.model.get(),a=i[0].secondId;e.play(a,!0),e.initPlayerSize(),e.updateVideoInfo()}),this.$el.on("click",".J-sl-player-el-window",function(){e.lastSecondId="",e.$elPlayerCover.addClass("hide"),l(".J-sl-player-modal").addClass("sl-player-modal"),e.isPlayLayer=!0,e.closeWindowPlayer(),e.updateVideoInfo();var i=e.getWindowPlayerLogInfo();i.type=y.layerPlayerClick,s(i),f.disableScroll(),e.triggerScreenViewPv()}),this.$el.on("click",".J-sl-player-modal-close",function(){e.lastSecondId="",l(".J-sl-player-modal").removeClass("sl-player-modal"),f.enableScroll(),e.isPlayLayer=!1;var i=localStorage.getItem("hide-window-player-kind");"always"===i?(e.player.pause(),e.isWindowPlayerShow=!1,e.initPlayerSize(),e.audioComPlay()):e.showWindowPlayer()}),this.$el.on("click",".J-modal-close",function(){e.hideCloseModal(),e.isPlayerPlay&&(e.player.play(),e.audioComPause()),e.isPlayerPlay="",g.logActClick({page:"lemma",element:"window-player-modal-close"})}),this.$el.on("click",".J-sl-player-el-close-modal-select",function(){l(".J-sl-player-el-close-modal-select").toggleClass("checked")}),this.$el.on("click",".J-larkplayer-window-player-switch-input",function(){var e=l(".J-larkplayer-window-player-switch-input").hasClass("checked");g.logActClick({page:"lemma",element:"larkplayer-window-player",kind:e?"close":"open"})}),this.$el.on("click",".J-sl-player-el-close-modal-button-forever",function(){e.hideCloseModal();var i=l(".J-sl-player-el-close-modal-select").hasClass("checked");localStorage.setItem("hide-window-player-nomore-recommend",i),localStorage.setItem("hide-window-player-kind","always"),localStorage.setItem("hide-window-player",!0),l(".J-larkplayer-window-player-switch-input").removeClass("checked"),e.player.pause(),e.audioComPlay(),e.closeWindowPlayer(),i&&g.logActClick({page:"lemma",element:"window-player-no-recommend"}),g.logActClick({page:"lemma",element:"window-player-never-show"})}),this.$el.on("click",".J-sl-player-el-close-modal-button-once",function(){e.hideCloseModal();var i=l(".J-sl-player-el-close-modal-select").hasClass("checked");localStorage.setItem("hide-window-player-nomore-recommend",i),localStorage.setItem("hide-window-player-kind","once"),e.player.pause(),e.audioComPlay(),e.closeWindowPlayer(),i&&g.logActClick({page:"lemma",element:"window-player-no-recommend"}),g.logActClick({page:"lemma",element:"window-player-once-close"})}),this.$el.on("click",".J-sl-player-list-item__share",function(){e.initializeShareBubble()}),this.$el.on("click",".J-sl-player-el-close-modal",function(e){e.stopPropagation()}),l(window).on("beforeunload",function(){var i=e.model.get(),a=e.model.get(e.data.secondId);e.player&&_.resetLogTimer(a,"top",e.data.lemmaId),i&&i.forEach(function(i){i.maximumPlayProgress&&(n.sendPv("lemma_page_video_flow_play_maximum_progress",{videoProgress:Math.round(100*i.maximumPlayProgress),videoIdx:i.videoIdx,lemmaId:e.data.lemmaId,lemmaTitle:e.data.lemmaTitle,recCategory:i.recCategory,isRecommend:i.isRecommend}),g.logActVideo({video_action:"play",kind:"lemma_page_video_flow_play_maximum_progress",videoProgress:Math.round(100*i.maximumPlayProgress),videoIdx:i.videoIdx,lemmaId:e.data.lemmaId,lemmaTitle:e.data.lemmaTitle,page:"lemma",recCategory:i.recCategory,isRecommend:i.isRecommend}))})}),l(window).on("scroll",function(){if(!e.data.isMemorial&&!e.isPlayLayer){var i=e.isElementInViewport(e.$player);if(i!==e.isLastStatusInViewPoint){var a=localStorage.getItem("hide-window-player-kind");if("always"===a){var i=e.isElementInViewport(e.$player);return i?i&&e.isPlayerPlay&&(e.player.play(),e.audioComPause()):(e.isPlayerPlay=!e.player.paused(),e.isPlayerPlay&&e.player.pause()),void(e.isLastStatusInViewPoint=i)}clearTimeout(this.timer),e.timer=setTimeout(function(){if(i)e.closeWindowPlayer();else{if(e.$elPlayer.hasClass("sl-player-el-fixed"))return;e.showWindowPlayer()}e.isLastStatusInViewPoint=i},200)}}}),this.$el.on("click",".lark-play-button__play",function(){e.audioComPause()}),this.$el.on("click",".lark-play-button__pause",function(){e.audioComPlay()}),k.on(k.Events.LEMMA_AUDIO_PLAY,function(){e.player.muted()||0===e.player.volume()||e.player.pause()}),k.on(k.Events.LEMMA_AUDIO_PAUSE,function(){e.player.paused()&&e.player.play()}))}}});
;/*!wiki-lemma:node_modules/resize-observer-polyfill/dist/ResizeObserver.js*/
define("wiki-lemma:node_modules/resize-observer-polyfill/dist/ResizeObserver",function(t,e,n){!function(t,r){"object"==typeof e&&"undefined"!=typeof n?n.exports=r():"function"==typeof define&&define.amd?define(r):t.ResizeObserver=r()}(this,function(){"use strict";function t(t,e){function n(){o&&(o=!1,t()),s&&i()}function r(){p(n)}function i(){var t=Date.now();if(o){if(v>t-c)return;s=!0}else o=!0,s=!1,setTimeout(r,e);c=t}var o=!1,s=!1,c=0;return i}function e(t){return parseFloat(t)||0}function n(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.reduce(function(n,r){var i=t["border-"+r+"-width"];return n+e(i)},0)}function r(t){for(var n=["top","right","bottom","left"],r={},i=0,o=n;i<o.length;i++){var s=o[i],c=t["padding-"+s];r[s]=e(c)}return r}function i(t){var e=t.getBBox();return u(0,0,e.width,e.height)}function o(t){var i=t.clientWidth,o=t.clientHeight;if(!i&&!o)return w;var c=g(t).getComputedStyle(t),a=r(c),h=a.left+a.right,f=a.top+a.bottom,d=e(c.width),p=e(c.height);if("border-box"===c.boxSizing&&(Math.round(d+h)!==i&&(d-=n(c,"left","right")+h),Math.round(p+f)!==o&&(p-=n(c,"top","bottom")+f)),!s(t)){var v=Math.round(d+h)-i,l=Math.round(p+f)-o;1!==Math.abs(v)&&(d-=v),1!==Math.abs(l)&&(p-=l)}return u(a.left,a.top,d,p)}function s(t){return t===g(t).document.documentElement}function c(t){return f?O(t)?i(t):o(t):w}function a(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return y(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}function u(t,e,n,r){return{x:t,y:e,width:n,height:r}}var h=function(){function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e?(n=r,!0):!1}),n}return"undefined"!=typeof Map?Map:function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,d=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),p=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(d):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),v=2,l=20,_=["top","right","bottom","left","width","height","size","weight"],b="undefined"!=typeof MutationObserver,m=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=t(this.refresh.bind(this),l)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},e.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),b?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,r=_.some(function(t){return!!~n.indexOf(t)});r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),y=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},g=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||d},w=u(0,0,0,0),O=function(){return"undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof g(t).SVGGraphicsElement}:function(t){return t instanceof g(t).SVGElement&&"function"==typeof t.getBBox}}(),E=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=u(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=c(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),M=function(){function t(t,e){var n=a(e);y(this,{target:t,contentRect:n})}return t}(),A=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new h,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new E(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof g(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new M(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),T="undefined"!=typeof WeakMap?new WeakMap:new h,R=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),r=new A(e,n,this);T.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){R.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}});var x=function(){return"undefined"!=typeof d.ResizeObserver?d.ResizeObserver:R}();return x})});