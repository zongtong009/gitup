define("wiki-lemma:widget/feature/Audio/audioHelper.es",function(e,a,t){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function i(e,a){return m["default"](e).attr("data-pid",a)}function u(e){return"para-title"===m["default"](e).attr("label-module")}function n(e){return("para"===m["default"](e).attr("label-module")||m["default"](e).hasClass("para-list"))&&o(e)}function r(e,a){return e?e:[a]}function d(e,a,t){var l=o(e,a,t);return c(l)}function o(e,a,t){var l=m["default"](e).clone();u(e)&&l.find('span[class="title-prefix"]').remove();var i=l.find("sup").remove().end().find(".J-lemma-album").remove().end().find(".J-lemma-picture").remove().end().text().replace(/\s/g," ").trim();if(i=i.replace(/[（][^）]+[\）)]|[(][^）]+[\))]/g,""),t){var n=new RegExp(""+a,"gi");i=i.replace(n,t)}return i}function c(e){var a=arguments.length<=1||void 0===arguments[1]?100:arguments[1],t=arguments.length<=2||void 0===arguments[2]?50:arguments[2];if(""===e)return"";e.replace(/"|'/g,"");var l=[];return e.length>t?!function(){var i=[],u=["、","，","；","？","！","：","。"];i=e.split(new RegExp(/(、|，|；|？|！|：|。)/g)),i.forEach(function(e,a){i[a+1]&&u.indexOf(i[a+1])>-1&&(i[a]+=i[a+1],i[a+1]="")});var n="";i.forEach(function(e){if(""!==e){var i=e+n;0===l.length?i.length>=t&&""!==n?(l.push(n),n=e):n+=e:i.length>a?(l.push(n),n=e):n+=e}}),n&&(l.push(n),n="")}():l=[e],l}function f(e){var a=e.lemmaTitle,t=e.pinyin,l=e.catalog,c=e.extData,f=m["default"](".J-lemma-title"),s=m["default"]('[label-module="lemmaSummary"]'),g=m["default"](".J-basic-info"),p=m["default"](".J-content").find(".curTab").length?m["default"](".J-content").find(".curTab"):m["default"](".J-content"),v=[],h=0,b=0,x=void 0,J=void 0;return v.push({pid:h,catalogPid:void 0,catalogName:"标题",voice:r(t,a)}),i(f,h),h++,s.children().each(function(e,l){m["default"](l).hasClass("para")&&m["default"](l).attr("label-module")&&(i(l,h),v.push({pid:h,catalogPid:J,catalogName:"概述",voice:d(l,a,t)}),h++)}),c.card&&c.card.length&&(i(g,"card"),v.push({pid:"card",catalogPid:J,catalogName:"基本信息栏",voice:c.card})),p.children().each(function(e,r){u(r)&&(x=l.length>0?l[b].title:o(r),i(r,h),(1===l[b].level||m["default"](r).hasClass("level-2"))&&(J=h),v.push({pid:h,catalogPid:J,catalogName:x,voice:[x]}),b++,h++),n(r)&&(i(r,h),v.push({pid:h,catalogPid:J,catalogName:x,voice:d(r,a,t)}),h++),m["default"](r).attr("audio-id")&&c.modules&&c.modules[m["default"](r).attr("audio-id")]&&c.modules[m["default"](r).attr("audio-id")].hasVoice&&(i(r,h),v.push({pid:h,catalogPid:J,catalogName:x,voice:c.modules[m["default"](r).attr("audio-id")].arrVoice}),h++)}),v}Object.defineProperty(a,"__esModule",{value:!0});var s=e("wiki-common:widget/lib/jquery/jquery"),m=l(s);a["default"]=f,t.exports=a["default"]});